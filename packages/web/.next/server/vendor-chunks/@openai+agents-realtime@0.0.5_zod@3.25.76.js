"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@openai+agents-realtime@0.0.5_zod@3.25.76";
exports.ids = ["vendor-chunks/@openai+agents-realtime@0.0.5_zod@3.25.76"];
exports.modules = {

/***/ "(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/guardrail.mjs":
/*!**********************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/guardrail.mjs ***!
  \**********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defineRealtimeOutputGuardrail: () => (/* binding */ defineRealtimeOutputGuardrail),\n/* harmony export */   getRealtimeGuardrailFeedbackMessage: () => (/* binding */ getRealtimeGuardrailFeedbackMessage),\n/* harmony export */   getRealtimeGuardrailSettings: () => (/* binding */ getRealtimeGuardrailSettings)\n/* harmony export */ });\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-core@0.0.5_ws@8.18.3_zod@3.25.76/node_modules/@openai/agents-core/dist/index.mjs\");\n\nfunction getRealtimeGuardrailSettings(settings) {\n    return {\n        debounceTextLength: settings.debounceTextLength ?? 100,\n    };\n}\nfunction defineRealtimeOutputGuardrail({ policyHint: policyHintInput, ...options }) {\n    const baseGuardrail = (0,_openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.defineOutputGuardrail)(options);\n    const policyHint = policyHintInput ?? baseGuardrail.name;\n    return {\n        ...baseGuardrail,\n        policyHint,\n        run: async (args) => {\n            const result = await baseGuardrail.run(args);\n            return {\n                ...result,\n                guardrail: { ...result.guardrail, policyHint },\n            };\n        },\n    };\n}\n/**\n * Generates a message that informs the model about why the guardrail was triggered and to\n * correct the behavior.\n */\nfunction getRealtimeGuardrailFeedbackMessage(result) {\n    return `\n⚠️ Your last answer was blocked. \nFailed Guardrail Reason: ${result.guardrail.policyHint}. \nFailure Details: ${JSON.stringify(result.output.outputInfo ?? {})}. \nPlease respond again following policy. Apologize for not being able to answer the question (while avoiding the specific reason) and divert discussion back to an approved topic immediately and not invite more discussion.\n`.trim();\n}\n//# sourceMappingURL=guardrail.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L2d1YXJkcmFpbC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE2RDtBQUN0RDtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ08seUNBQXlDLHlDQUF5QztBQUN6RiwwQkFBMEIsMEVBQXFCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaUNBQWlDO0FBQzlEO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLDJCQUEyQiw0QkFBNEI7QUFDdkQsbUJBQW1CLDZDQUE2QyxFQUFFO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMveXV3YW5nL3Byb2plY3RzL29wZW5haS1yZWFsdGltZS1hZ2VudHMvbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L2d1YXJkcmFpbC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3Moc2V0dGluZ3MpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBkZWJvdW5jZVRleHRMZW5ndGg6IHNldHRpbmdzLmRlYm91bmNlVGV4dExlbmd0aCA/PyAxMDAsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVSZWFsdGltZU91dHB1dEd1YXJkcmFpbCh7IHBvbGljeUhpbnQ6IHBvbGljeUhpbnRJbnB1dCwgLi4ub3B0aW9ucyB9KSB7XG4gICAgY29uc3QgYmFzZUd1YXJkcmFpbCA9IGRlZmluZU91dHB1dEd1YXJkcmFpbChvcHRpb25zKTtcbiAgICBjb25zdCBwb2xpY3lIaW50ID0gcG9saWN5SGludElucHV0ID8/IGJhc2VHdWFyZHJhaWwubmFtZTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5iYXNlR3VhcmRyYWlsLFxuICAgICAgICBwb2xpY3lIaW50LFxuICAgICAgICBydW46IGFzeW5jIChhcmdzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBiYXNlR3VhcmRyYWlsLnJ1bihhcmdzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICAgICAgICAgIGd1YXJkcmFpbDogeyAuLi5yZXN1bHQuZ3VhcmRyYWlsLCBwb2xpY3lIaW50IH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIG1lc3NhZ2UgdGhhdCBpbmZvcm1zIHRoZSBtb2RlbCBhYm91dCB3aHkgdGhlIGd1YXJkcmFpbCB3YXMgdHJpZ2dlcmVkIGFuZCB0b1xuICogY29ycmVjdCB0aGUgYmVoYXZpb3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZShyZXN1bHQpIHtcbiAgICByZXR1cm4gYFxu4pqg77iPIFlvdXIgbGFzdCBhbnN3ZXIgd2FzIGJsb2NrZWQuIFxuRmFpbGVkIEd1YXJkcmFpbCBSZWFzb246ICR7cmVzdWx0Lmd1YXJkcmFpbC5wb2xpY3lIaW50fS4gXG5GYWlsdXJlIERldGFpbHM6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvID8/IHt9KX0uIFxuUGxlYXNlIHJlc3BvbmQgYWdhaW4gZm9sbG93aW5nIHBvbGljeS4gQXBvbG9naXplIGZvciBub3QgYmVpbmcgYWJsZSB0byBhbnN3ZXIgdGhlIHF1ZXN0aW9uICh3aGlsZSBhdm9pZGluZyB0aGUgc3BlY2lmaWMgcmVhc29uKSBhbmQgZGl2ZXJ0IGRpc2N1c3Npb24gYmFjayB0byBhbiBhcHByb3ZlZCB0b3BpYyBpbW1lZGlhdGVseSBhbmQgbm90IGludml0ZSBtb3JlIGRpc2N1c3Npb24uXG5gLnRyaW0oKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWd1YXJkcmFpbC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/guardrail.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/index.mjs":
/*!******************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/index.mjs ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_OPENAI_REALTIME_MODEL: () => (/* reexport safe */ _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_OPENAI_REALTIME_MODEL),\n/* harmony export */   DEFAULT_OPENAI_REALTIME_SESSION_CONFIG: () => (/* reexport safe */ _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_OPENAI_REALTIME_SESSION_CONFIG),\n/* harmony export */   ModelBehaviorError: () => (/* reexport safe */ _openai_agents_core__WEBPACK_IMPORTED_MODULE_6__.ModelBehaviorError),\n/* harmony export */   OpenAIRealtimeBase: () => (/* reexport safe */ _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_5__.OpenAIRealtimeBase),\n/* harmony export */   OpenAIRealtimeWebRTC: () => (/* reexport safe */ _openaiRealtimeWebRtc_mjs__WEBPACK_IMPORTED_MODULE_3__.OpenAIRealtimeWebRTC),\n/* harmony export */   OpenAIRealtimeWebSocket: () => (/* reexport safe */ _openaiRealtimeWebsocket_mjs__WEBPACK_IMPORTED_MODULE_4__.OpenAIRealtimeWebSocket),\n/* harmony export */   OutputGuardrailTripwireTriggered: () => (/* reexport safe */ _openai_agents_core__WEBPACK_IMPORTED_MODULE_6__.OutputGuardrailTripwireTriggered),\n/* harmony export */   RealtimeAgent: () => (/* reexport safe */ _realtimeAgent_mjs__WEBPACK_IMPORTED_MODULE_1__.RealtimeAgent),\n/* harmony export */   RealtimeSession: () => (/* reexport safe */ _realtimeSession_mjs__WEBPACK_IMPORTED_MODULE_2__.RealtimeSession),\n/* harmony export */   UserError: () => (/* reexport safe */ _openai_agents_core__WEBPACK_IMPORTED_MODULE_6__.UserError),\n/* harmony export */   tool: () => (/* reexport safe */ _openai_agents_core__WEBPACK_IMPORTED_MODULE_6__.tool),\n/* harmony export */   utils: () => (/* binding */ utils)\n/* harmony export */ });\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/utils.mjs\");\n/* harmony import */ var _realtimeAgent_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./realtimeAgent.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/realtimeAgent.mjs\");\n/* harmony import */ var _realtimeSession_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./realtimeSession.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/realtimeSession.mjs\");\n/* harmony import */ var _openaiRealtimeWebRtc_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./openaiRealtimeWebRtc.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebRtc.mjs\");\n/* harmony import */ var _openaiRealtimeWebsocket_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./openaiRealtimeWebsocket.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebsocket.mjs\");\n/* harmony import */ var _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./openaiRealtimeBase.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeBase.mjs\");\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-core@0.0.5_ws@8.18.3_zod@3.25.76/node_modules/@openai/agents-core/dist/index.mjs\");\n\n\n\n\n\n\nconst utils = {\n    base64ToArrayBuffer: _utils_mjs__WEBPACK_IMPORTED_MODULE_0__.base64ToArrayBuffer,\n    arrayBufferToBase64: _utils_mjs__WEBPACK_IMPORTED_MODULE_0__.arrayBufferToBase64,\n    getLastTextFromAudioOutputMessage: _utils_mjs__WEBPACK_IMPORTED_MODULE_0__.getLastTextFromAudioOutputMessage,\n};\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTBDO0FBQ1U7QUFDSztBQUNVO0FBQ007QUFDNkQ7QUFDL0g7QUFDUCx5QkFBeUIsMkRBQThCO0FBQ3ZELHlCQUF5QiwyREFBOEI7QUFDdkQsdUNBQXVDLHlFQUE0QztBQUNuRjtBQUM2RztBQUM3RyIsInNvdXJjZXMiOlsiL1VzZXJzL3l1d2FuZy9wcm9qZWN0cy9vcGVuYWktcmVhbHRpbWUtYWdlbnRzL25vZGVfbW9kdWxlcy8ucG5wbS9Ab3BlbmFpK2FnZW50cy1yZWFsdGltZUAwLjAuNV96b2RAMy4yNS43Ni9ub2RlX21vZHVsZXMvQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvZGlzdC9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgdXRpbEltcG9ydCBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCB7IFJlYWx0aW1lQWdlbnQgfSBmcm9tIFwiLi9yZWFsdGltZUFnZW50Lm1qc1wiO1xuZXhwb3J0IHsgUmVhbHRpbWVTZXNzaW9uLCB9IGZyb20gXCIuL3JlYWx0aW1lU2Vzc2lvbi5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViUlRDLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2ViUnRjLm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZUJhc2UsIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMLCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRywgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5leHBvcnQgY29uc3QgdXRpbHMgPSB7XG4gICAgYmFzZTY0VG9BcnJheUJ1ZmZlcjogdXRpbEltcG9ydC5iYXNlNjRUb0FycmF5QnVmZmVyLFxuICAgIGFycmF5QnVmZmVyVG9CYXNlNjQ6IHV0aWxJbXBvcnQuYXJyYXlCdWZmZXJUb0Jhc2U2NCxcbiAgICBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2U6IHV0aWxJbXBvcnQuZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlLFxufTtcbmV4cG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIHRvb2wsIFVzZXJFcnJvciwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/items.mjs":
/*!******************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/items.mjs ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   baseItemSchema: () => (/* binding */ baseItemSchema),\n/* harmony export */   realtimeMessageItemSchema: () => (/* binding */ realtimeMessageItemSchema),\n/* harmony export */   realtimeToolCallItem: () => (/* binding */ realtimeToolCallItem)\n/* harmony export */ });\n/* harmony import */ var _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/zod/v3 */ \"(ssr)/../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js\");\n\nconst baseItemSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    itemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n});\nconst realtimeMessageItemSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion('role', [\n    _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n        itemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n        previousItemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n        type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('message'),\n        role: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('system'),\n        content: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({ type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('input_text'), text: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string() })),\n    }),\n    _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n        itemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n        previousItemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n        type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('message'),\n        role: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('user'),\n        status: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__[\"enum\"](['in_progress', 'completed']),\n        content: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({ type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('input_text'), text: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string() }).or(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('input_audio'),\n            audio: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n            transcript: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n        }))),\n    }),\n    _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n        itemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n        previousItemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n        type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('message'),\n        role: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('assistant'),\n        status: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__[\"enum\"](['in_progress', 'completed', 'incomplete']),\n        content: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({ type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('text'), text: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string() }).or(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('audio'),\n            audio: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n            transcript: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n        }))),\n    }),\n]);\nconst realtimeToolCallItem = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    itemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    previousItemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('function_call'),\n    status: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__[\"enum\"](['in_progress', 'completed']),\n    arguments: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    name: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    output: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n});\n//# sourceMappingURL=items.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L2l0ZW1zLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW1DO0FBQzVCLHVCQUF1QixrREFBUTtBQUN0QyxZQUFZLGtEQUFRO0FBQ3BCLENBQUM7QUFDTSxrQ0FBa0MsOERBQW9CO0FBQzdELElBQUksa0RBQVE7QUFDWixnQkFBZ0Isa0RBQVE7QUFDeEIsd0JBQXdCLGtEQUFRO0FBQ2hDLGNBQWMsbURBQVM7QUFDdkIsY0FBYyxtREFBUztBQUN2QixpQkFBaUIsaURBQU8sQ0FBQyxrREFBUSxHQUFHLE1BQU0sbURBQVMsc0JBQXNCLGtEQUFRLElBQUk7QUFDckYsS0FBSztBQUNMLElBQUksa0RBQVE7QUFDWixnQkFBZ0Isa0RBQVE7QUFDeEIsd0JBQXdCLGtEQUFRO0FBQ2hDLGNBQWMsbURBQVM7QUFDdkIsY0FBYyxtREFBUztBQUN2QixnQkFBZ0IsbURBQU07QUFDdEIsaUJBQWlCLGlEQUFPLENBQUMsa0RBQVEsR0FBRyxNQUFNLG1EQUFTLHNCQUFzQixrREFBUSxJQUFJLEtBQUssa0RBQVE7QUFDbEcsa0JBQWtCLG1EQUFTO0FBQzNCLG1CQUFtQixrREFBUTtBQUMzQix3QkFBd0Isa0RBQVE7QUFDaEMsU0FBUztBQUNULEtBQUs7QUFDTCxJQUFJLGtEQUFRO0FBQ1osZ0JBQWdCLGtEQUFRO0FBQ3hCLHdCQUF3QixrREFBUTtBQUNoQyxjQUFjLG1EQUFTO0FBQ3ZCLGNBQWMsbURBQVM7QUFDdkIsZ0JBQWdCLG1EQUFNO0FBQ3RCLGlCQUFpQixpREFBTyxDQUFDLGtEQUFRLEdBQUcsTUFBTSxtREFBUyxnQkFBZ0Isa0RBQVEsSUFBSSxLQUFLLGtEQUFRO0FBQzVGLGtCQUFrQixtREFBUztBQUMzQixtQkFBbUIsa0RBQVE7QUFDM0Isd0JBQXdCLGtEQUFRO0FBQ2hDLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDTyw2QkFBNkIsa0RBQVE7QUFDNUMsWUFBWSxrREFBUTtBQUNwQixvQkFBb0Isa0RBQVE7QUFDNUIsVUFBVSxtREFBUztBQUNuQixZQUFZLG1EQUFNO0FBQ2xCLGVBQWUsa0RBQVE7QUFDdkIsVUFBVSxrREFBUTtBQUNsQixZQUFZLGtEQUFRO0FBQ3BCLENBQUM7QUFDRCIsInNvdXJjZXMiOlsiL1VzZXJzL3l1d2FuZy9wcm9qZWN0cy9vcGVuYWktcmVhbHRpbWUtYWdlbnRzL25vZGVfbW9kdWxlcy8ucG5wbS9Ab3BlbmFpK2FnZW50cy1yZWFsdGltZUAwLjAuNV96b2RAMy4yNS43Ni9ub2RlX21vZHVsZXMvQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvZGlzdC9pdGVtcy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ0BvcGVuYWkvem9kL3YzJztcbmV4cG9ydCBjb25zdCBiYXNlSXRlbVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3JvbGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgICAgIHByZXZpb3VzSXRlbUlkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgICAgIHJvbGU6IHoubGl0ZXJhbCgnc3lzdGVtJyksXG4gICAgICAgIGNvbnRlbnQ6IHouYXJyYXkoei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSwgdGV4dDogei5zdHJpbmcoKSB9KSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgICAgIHByZXZpb3VzSXRlbUlkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgICAgIHJvbGU6IHoubGl0ZXJhbCgndXNlcicpLFxuICAgICAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCddKSxcbiAgICAgICAgY29udGVudDogei5hcnJheSh6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pLm9yKHoub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW8nKSxcbiAgICAgICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICAgICAgfSkpKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCdhc3Npc3RhbnQnKSxcbiAgICAgICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAgICAgY29udGVudDogei5hcnJheSh6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgndGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pLm9yKHoub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnYXVkaW8nKSxcbiAgICAgICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB9KSkpLFxuICAgIH0pLFxuXSk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVUb29sQ2FsbEl0ZW0gPSB6Lm9iamVjdCh7XG4gICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgIHByZXZpb3VzSXRlbUlkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Z1bmN0aW9uX2NhbGwnKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCddKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlbXMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/items.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/logger.mjs":
/*!*******************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/logger.mjs ***!
  \*******************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-core@0.0.5_ws@8.18.3_zod@3.25.76/node_modules/@openai/agents-core/dist/index.mjs\");\n\nconst logger = (0,_openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.getLogger)('openai-agents:realtime');\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n//# sourceMappingURL=logger.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L2xvZ2dlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBZ0Q7QUFDaEQsZUFBZSw4REFBUztBQUN4QixpRUFBZSxNQUFNLEVBQUM7QUFDdEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy95dXdhbmcvcHJvamVjdHMvb3BlbmFpLXJlYWx0aW1lLWFnZW50cy9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjVfem9kQDMuMjUuNzYvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvbG9nZ2VyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignb3BlbmFpLWFnZW50czpyZWFsdGltZScpO1xuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/logger.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/metadata.mjs":
/*!*********************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/metadata.mjs ***!
  \*********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   METADATA: () => (/* binding */ METADATA),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// This file is automatically generated\nconst METADATA = {\n    \"name\": \"@openai/agents-realtime\",\n    \"version\": \"0.0.5\",\n    \"versions\": {\n        \"@openai/agents-realtime\": \"0.0.5\",\n        \"@openai/agents-core\": \"workspace:*\",\n        \"@openai/zod\": \"npm:zod@^3.25.40\"\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (METADATA);\n//# sourceMappingURL=metadata.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L21ldGFkYXRhLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWUsUUFBUSxFQUFDO0FBQ3hCIiwic291cmNlcyI6WyIvVXNlcnMveXV3YW5nL3Byb2plY3RzL29wZW5haS1yZWFsdGltZS1hZ2VudHMvbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L21ldGFkYXRhLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGZpbGUgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWRcbmV4cG9ydCBjb25zdCBNRVRBREFUQSA9IHtcbiAgICBcIm5hbWVcIjogXCJAb3BlbmFpL2FnZW50cy1yZWFsdGltZVwiLFxuICAgIFwidmVyc2lvblwiOiBcIjAuMC41XCIsXG4gICAgXCJ2ZXJzaW9uc1wiOiB7XG4gICAgICAgIFwiQG9wZW5haS9hZ2VudHMtcmVhbHRpbWVcIjogXCIwLjAuNVwiLFxuICAgICAgICBcIkBvcGVuYWkvYWdlbnRzLWNvcmVcIjogXCJ3b3Jrc3BhY2U6KlwiLFxuICAgICAgICBcIkBvcGVuYWkvem9kXCI6IFwibnBtOnpvZEBeMy4yNS40MFwiXG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IE1FVEFEQVRBO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWV0YWRhdGEubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/metadata.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeBase.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeBase.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_OPENAI_REALTIME_MODEL: () => (/* binding */ DEFAULT_OPENAI_REALTIME_MODEL),\n/* harmony export */   DEFAULT_OPENAI_REALTIME_SESSION_CONFIG: () => (/* binding */ DEFAULT_OPENAI_REALTIME_SESSION_CONFIG),\n/* harmony export */   OpenAIRealtimeBase: () => (/* binding */ OpenAIRealtimeBase)\n/* harmony export */ });\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-core@0.0.5_ws@8.18.3_zod@3.25.76/node_modules/@openai/agents-core/dist/index.mjs\");\n/* harmony import */ var _items_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./items.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/items.mjs\");\n/* harmony import */ var _logger_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./logger.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/logger.mjs\");\n/* harmony import */ var _openaiRealtimeEvents_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./openaiRealtimeEvents.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeEvents.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/utils.mjs\");\n/* harmony import */ var _openai_agents_core_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @openai/agents-core/utils */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-core@0.0.5_ws@8.18.3_zod@3.25.76/node_modules/@openai/agents-core/dist/utils/index.mjs\");\n\n\n\n\n\n\n/**\n * The default model that is used during the connection if no model is provided.\n */\nconst DEFAULT_OPENAI_REALTIME_MODEL = 'gpt-4o-realtime-preview';\n/**\n * The default session config that gets send over during session connection unless overriden\n * by the user.\n */\nconst DEFAULT_OPENAI_REALTIME_SESSION_CONFIG = {\n    voice: 'ash',\n    modalities: ['text', 'audio'],\n    inputAudioFormat: 'pcm16',\n    outputAudioFormat: 'pcm16',\n    inputAudioTranscription: {\n        model: 'gpt-4o-mini-transcribe',\n    },\n    turnDetection: {\n        type: 'semantic_vad',\n    },\n};\nclass OpenAIRealtimeBase extends _openai_agents_core_utils__WEBPACK_IMPORTED_MODULE_5__.EventEmitterDelegate {\n    #model;\n    #apiKey;\n    #tracingConfig = null;\n    eventEmitter = new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.RuntimeEventEmitter();\n    constructor(options = {}) {\n        super();\n        this.#model = options.model ?? DEFAULT_OPENAI_REALTIME_MODEL;\n        this.#apiKey = options.apiKey;\n    }\n    /**\n     * The current model that is being used by the transport layer.\n     */\n    get currentModel() {\n        return this.#model;\n    }\n    /**\n     * The current model that is being used by the transport layer.\n     * **Note**: The model cannot be changed mid conversation.\n     */\n    set currentModel(model) {\n        this.#model = model;\n    }\n    async _getApiKey(options) {\n        const apiKey = options.apiKey ?? this.#apiKey;\n        if (typeof apiKey === 'function') {\n            return await apiKey();\n        }\n        return apiKey;\n    }\n    _onMessage(event) {\n        const { data: parsed, isGeneric } = (0,_openaiRealtimeEvents_mjs__WEBPACK_IMPORTED_MODULE_3__.parseRealtimeEvent)(event);\n        if (parsed === null) {\n            return;\n        }\n        this.emit('*', parsed);\n        if (isGeneric) {\n            return;\n        }\n        if (parsed.type === 'error') {\n            this.emit('error', { type: 'error', error: parsed });\n        }\n        else {\n            this.emit(parsed.type, parsed);\n        }\n        if (parsed.type === 'response.created') {\n            this.emit('turn_started', {\n                type: 'response_started',\n                providerData: {\n                    ...parsed,\n                },\n            });\n            return;\n        }\n        if (parsed.type === 'response.done') {\n            const response = _openaiRealtimeEvents_mjs__WEBPACK_IMPORTED_MODULE_3__.responseDoneEventSchema.safeParse(parsed);\n            if (!response.success) {\n                _logger_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error parsing response done event', response.error);\n                return;\n            }\n            const inputTokens = response.data.response.usage?.input_tokens ?? 0;\n            const outputTokens = response.data.response.usage?.output_tokens ?? 0;\n            const totalTokens = inputTokens + outputTokens;\n            const usage = new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.Usage({\n                inputTokens,\n                inputTokensDetails: response.data.response.usage?.input_tokens_details ?? {},\n                outputTokens,\n                outputTokensDetails: response.data.response.usage?.output_tokens_details ?? {},\n                totalTokens,\n            });\n            this.emit('usage_update', usage);\n            this.emit('turn_done', {\n                type: 'response_done',\n                response: {\n                    id: response.data.response.id ?? '',\n                    output: response.data.response.output ?? [],\n                    usage: {\n                        inputTokens,\n                        inputTokensDetails: response.data.response.usage?.input_tokens_details ?? {},\n                        outputTokens,\n                        outputTokensDetails: response.data.response.usage?.output_tokens_details ?? {},\n                        totalTokens,\n                    },\n                },\n            });\n            return;\n        }\n        if (parsed.type === 'response.audio.done') {\n            this.emit('audio_done');\n            return;\n        }\n        if (parsed.type === 'conversation.item.deleted') {\n            this.emit('item_deleted', {\n                itemId: parsed.item_id,\n            });\n            return;\n        }\n        if (parsed.type === 'conversation.item.input_audio_transcription.completed' ||\n            parsed.type === 'conversation.item.truncated') {\n            // right now rather than keeping track of partials and rebuilding the item we\n            // will retrieve it instead which triggers the `conversation.item.retrieved` event below\n            this.sendEvent({\n                type: 'conversation.item.retrieve',\n                item_id: parsed.item_id,\n            });\n            return;\n        }\n        if (parsed.type === 'conversation.item.input_audio_transcription.delta' ||\n            parsed.type === 'response.text.delta' ||\n            parsed.type === 'response.audio_transcript.delta' ||\n            parsed.type === 'response.function_call_arguments.delta') {\n            if (parsed.type === 'response.audio_transcript.delta') {\n                this.emit('audio_transcript_delta', {\n                    type: 'transcript_delta',\n                    delta: parsed.delta,\n                    itemId: parsed.item_id,\n                    responseId: parsed.response_id,\n                });\n            }\n            // no support for partial transcripts yet.\n            return;\n        }\n        if (parsed.type === 'conversation.item.created' ||\n            parsed.type === 'conversation.item.retrieved') {\n            if (parsed.item.type === 'message') {\n                const previousItemId = parsed.type === 'conversation.item.created'\n                    ? parsed.previous_item_id\n                    : null;\n                const item = _items_mjs__WEBPACK_IMPORTED_MODULE_1__.realtimeMessageItemSchema.parse({\n                    itemId: parsed.item.id,\n                    previousItemId,\n                    type: parsed.item.type,\n                    role: parsed.item.role,\n                    content: parsed.item.content,\n                    status: parsed.item.status,\n                });\n                this.emit('item_update', item);\n                return;\n            }\n        }\n        if (parsed.type === 'response.output_item.done' ||\n            parsed.type === 'response.output_item.added') {\n            const item = parsed.item;\n            if (item.type === 'function_call' && item.status === 'completed') {\n                const toolCall = _items_mjs__WEBPACK_IMPORTED_MODULE_1__.realtimeToolCallItem.parse({\n                    itemId: item.id,\n                    type: item.type,\n                    status: 'in_progress', // we set it to in_progress for the UI as it will only be completed with the output\n                    arguments: item.arguments,\n                    name: item.name,\n                    output: null,\n                });\n                this.emit('item_update', toolCall);\n                this.emit('function_call', {\n                    id: item.id,\n                    type: 'function_call',\n                    callId: item.call_id ?? '',\n                    arguments: item.arguments ?? '',\n                    name: item.name ?? '',\n                });\n                return;\n            }\n            if (item.type === 'message') {\n                const realtimeItem = _items_mjs__WEBPACK_IMPORTED_MODULE_1__.realtimeMessageItemSchema.parse({\n                    itemId: parsed.item.id,\n                    type: parsed.item.type,\n                    role: parsed.item.role,\n                    content: parsed.item.content,\n                    status: 'in_progress',\n                });\n                this.emit('item_update', realtimeItem);\n                return;\n            }\n        }\n    }\n    _onError(error) {\n        this.emit('error', {\n            type: 'error',\n            error,\n        });\n    }\n    _onOpen() {\n        this.emit('connected');\n    }\n    _onClose() {\n        this.emit('disconnected');\n    }\n    /**\n     * Send a message to the Realtime API. This will create a new item in the conversation and\n     * trigger a response.\n     *\n     * @param message - The message to send.\n     * @param otherEventData - Additional event data to send.\n     */\n    sendMessage(message, otherEventData) {\n        this.sendEvent({\n            type: 'conversation.item.create',\n            item: typeof message === 'string'\n                ? {\n                    type: 'message',\n                    role: 'user',\n                    content: [\n                        {\n                            type: 'input_text',\n                            text: message,\n                        },\n                    ],\n                }\n                : message,\n            ...otherEventData,\n        });\n        this.sendEvent({\n            type: 'response.create',\n        });\n    }\n    _getMergedSessionConfig(config) {\n        const sessionData = {\n            instructions: config.instructions,\n            model: config.model ??\n                this.#model ??\n                DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.model,\n            voice: config.voice ?? DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.voice,\n            modalities: config.modalities ?? DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.modalities,\n            input_audio_format: config.inputAudioFormat ??\n                DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.inputAudioFormat,\n            output_audio_format: config.outputAudioFormat ??\n                DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.outputAudioFormat,\n            input_audio_transcription: config.inputAudioTranscription ??\n                DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.inputAudioTranscription,\n            turn_detection: config.turnDetection ??\n                DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.turnDetection,\n            tool_choice: config.toolChoice ?? DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.toolChoice,\n            tools: config.tools?.map((tool) => ({\n                ...tool,\n                strict: undefined,\n            })),\n            // We don't set tracing here to make sure that we don't try to override it on every\n            // session.update as it might lead to errors\n            ...(config.providerData ?? {}),\n        };\n        return sessionData;\n    }\n    /**\n     * Sets the internal tracing config. This is used to track the tracing config that has been set\n     * during the session.create event.\n     */\n    set _tracingConfig(tracingConfig) {\n        this.#tracingConfig = tracingConfig;\n    }\n    /**\n     * Sets the tracing config for the session. This will send the tracing config to the Realtime API.\n     *\n     * @param tracingConfig - The tracing config to set. We don't support 'auto' here as the SDK will always configure a Workflow Name unless it exists\n     */\n    _updateTracingConfig(tracingConfig) {\n        if (typeof this.#tracingConfig === 'undefined') {\n            // treating it as default value\n            this.#tracingConfig = null;\n        }\n        if (tracingConfig === 'auto') {\n            // turn on tracing in auto mode\n            this.sendEvent({\n                type: 'session.update',\n                session: {\n                    tracing: 'auto',\n                },\n            });\n            return;\n        }\n        if (typeof this.#tracingConfig !== 'string' &&\n            typeof tracingConfig !== 'string') {\n            // tracing is already set, we can't change it\n            _logger_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].warn('Tracing config is already set, skipping setting it again. This likely happens when you already set a tracing config on session creation.');\n            return;\n        }\n        if (tracingConfig === null) {\n            _logger_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].debug('Disabling tracing for this session. It cannot be turned on for this session from this point on.');\n            this.sendEvent({\n                type: 'session.update',\n                session: {\n                    tracing: null,\n                },\n            });\n            return;\n        }\n        if (this.#tracingConfig === null ||\n            typeof this.#tracingConfig === 'string') {\n            // tracing is currently not set so we can set it to the new value\n            this.sendEvent({\n                type: 'session.update',\n                session: {\n                    tracing: tracingConfig,\n                },\n            });\n            return;\n        }\n        if (tracingConfig?.group_id !== this.#tracingConfig?.group_id ||\n            tracingConfig?.metadata !== this.#tracingConfig?.metadata ||\n            tracingConfig?.workflow_name !== this.#tracingConfig?.workflow_name) {\n            _logger_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].warn('Mismatch in tracing config. Ignoring the new tracing config. This likely happens when you already set a tracing config on session creation. Current tracing config: %s, new tracing config: %s', JSON.stringify(this.#tracingConfig), JSON.stringify(tracingConfig));\n            return;\n        }\n        this.sendEvent({\n            type: 'session.update',\n            session: {\n                tracing: tracingConfig,\n            },\n        });\n    }\n    /**\n     * Updates the session config. This will merge it with the current session config with the default\n     * values and send it to the Realtime API.\n     *\n     * @param config - The session config to update.\n     */\n    updateSessionConfig(config) {\n        const sessionData = this._getMergedSessionConfig(config);\n        this.sendEvent({\n            type: 'session.update',\n            session: sessionData,\n        });\n    }\n    /**\n     * Send the output of a function call to the Realtime API.\n     *\n     * @param toolCall - The tool call to send the output for.\n     * @param output - The output of the function call.\n     * @param startResponse - Whether to start a new response after sending the output.\n     */\n    sendFunctionCallOutput(toolCall, output, startResponse = true) {\n        this.sendEvent({\n            type: 'conversation.item.create',\n            item: {\n                type: 'function_call_output',\n                output,\n                call_id: toolCall.callId,\n            },\n        });\n        try {\n            const item = _items_mjs__WEBPACK_IMPORTED_MODULE_1__.realtimeToolCallItem.parse({\n                itemId: toolCall.id,\n                previousItemId: toolCall.previousItemId,\n                type: 'function_call',\n                status: 'completed',\n                arguments: toolCall.arguments,\n                name: toolCall.name,\n                output,\n            });\n            this.emit('item_update', item);\n        }\n        catch (error) {\n            _logger_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error parsing tool call item', error, toolCall);\n        }\n        if (startResponse) {\n            this.sendEvent({\n                type: 'response.create',\n            });\n        }\n    }\n    /**\n     * Send an audio buffer to the Realtime API. If `{ commit: true }` is passed, the audio buffer\n     * will be committed and the model will start processing it. This is necessary if you have\n     * disabled turn detection / voice activity detection (VAD).\n     *\n     * @param audio - The audio buffer to send.\n     * @param options - The options for the audio buffer.\n     */\n    sendAudio(audio, { commit = false } = {}) {\n        this.sendEvent({\n            type: 'input_audio_buffer.append',\n            audio: (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_4__.arrayBufferToBase64)(audio),\n        });\n        if (commit) {\n            this.sendEvent({\n                type: 'input_audio_buffer.commit',\n            });\n        }\n    }\n    /**\n     * Reset the history of the conversation. This will create a diff between the old and new history\n     * and send the necessary events to the Realtime API to update the history.\n     *\n     * @param oldHistory - The old history of the conversation.\n     * @param newHistory - The new history of the conversation.\n     */\n    resetHistory(oldHistory, newHistory) {\n        const { removals, additions, updates } = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_4__.diffRealtimeHistory)(oldHistory, newHistory);\n        const removalIds = new Set(removals.map((item) => item.itemId));\n        // we don't have an update event for items so we will remove and re-add what's there\n        for (const update of updates) {\n            removalIds.add(update.itemId);\n        }\n        if (removalIds.size > 0) {\n            for (const itemId of removalIds) {\n                this.sendEvent({\n                    type: 'conversation.item.delete',\n                    item_id: itemId,\n                });\n            }\n        }\n        const additionsAndUpdates = [...additions, ...updates];\n        for (const addition of additionsAndUpdates) {\n            if (addition.type === 'message') {\n                const itemEntry = {\n                    type: 'message',\n                    role: addition.role,\n                    content: addition.content,\n                    id: addition.itemId,\n                };\n                if (addition.role !== 'system' && addition.status) {\n                    itemEntry.status = addition.status;\n                }\n                this.sendEvent({\n                    type: 'conversation.item.create',\n                    item: itemEntry,\n                });\n            }\n            else if (addition.type === 'function_call') {\n                _logger_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].warn('Function calls cannot be manually added or updated at the moment. Ignoring.');\n            }\n        }\n    }\n}\n//# sourceMappingURL=openaiRealtimeBase.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L29wZW5haVJlYWx0aW1lQmFzZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQWlFO0FBQ2M7QUFDN0M7QUFDd0Q7QUFDbkI7QUFDTjtBQUNqRTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPLGlDQUFpQywyRUFBb0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9FQUFtQjtBQUMxQyw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMEJBQTBCLEVBQUUsNkVBQWtCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsOEJBQThCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDhFQUF1QjtBQUNwRDtBQUNBLGdCQUFnQixtREFBTTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHNEQUFLO0FBQ25DO0FBQ0EsNEZBQTRGO0FBQzVGO0FBQ0EsOEZBQThGO0FBQzlGO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvR0FBb0c7QUFDcEc7QUFDQSxz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QUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLCtCQUErQixFQUFFLCtEQUFtQjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxnQkFBZ0IsbURBQU07QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL3l1d2FuZy9wcm9qZWN0cy9vcGVuYWktcmVhbHRpbWUtYWdlbnRzL25vZGVfbW9kdWxlcy8ucG5wbS9Ab3BlbmFpK2FnZW50cy1yZWFsdGltZUAwLjAuNV96b2RAMy4yNS43Ni9ub2RlX21vZHVsZXMvQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvZGlzdC9vcGVuYWlSZWFsdGltZUJhc2UubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIsIFVzYWdlIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hLCByZWFsdGltZVRvb2xDYWxsSXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWFsdGltZUV2ZW50LCByZXNwb25zZURvbmVFdmVudFNjaGVtYSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbmltcG9ydCB7IGFycmF5QnVmZmVyVG9CYXNlNjQsIGRpZmZSZWFsdGltZUhpc3RvcnkgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IEV2ZW50RW1pdHRlckRlbGVnYXRlIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS91dGlscyc7XG4vKipcbiAqIFRoZSBkZWZhdWx0IG1vZGVsIHRoYXQgaXMgdXNlZCBkdXJpbmcgdGhlIGNvbm5lY3Rpb24gaWYgbm8gbW9kZWwgaXMgcHJvdmlkZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTCA9ICdncHQtNG8tcmVhbHRpbWUtcHJldmlldyc7XG4vKipcbiAqIFRoZSBkZWZhdWx0IHNlc3Npb24gY29uZmlnIHRoYXQgZ2V0cyBzZW5kIG92ZXIgZHVyaW5nIHNlc3Npb24gY29ubmVjdGlvbiB1bmxlc3Mgb3ZlcnJpZGVuXG4gKiBieSB0aGUgdXNlci5cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHID0ge1xuICAgIHZvaWNlOiAnYXNoJyxcbiAgICBtb2RhbGl0aWVzOiBbJ3RleHQnLCAnYXVkaW8nXSxcbiAgICBpbnB1dEF1ZGlvRm9ybWF0OiAncGNtMTYnLFxuICAgIG91dHB1dEF1ZGlvRm9ybWF0OiAncGNtMTYnLFxuICAgIGlucHV0QXVkaW9UcmFuc2NyaXB0aW9uOiB7XG4gICAgICAgIG1vZGVsOiAnZ3B0LTRvLW1pbmktdHJhbnNjcmliZScsXG4gICAgfSxcbiAgICB0dXJuRGV0ZWN0aW9uOiB7XG4gICAgICAgIHR5cGU6ICdzZW1hbnRpY192YWQnLFxuICAgIH0sXG59O1xuZXhwb3J0IGNsYXNzIE9wZW5BSVJlYWx0aW1lQmFzZSBleHRlbmRzIEV2ZW50RW1pdHRlckRlbGVnYXRlIHtcbiAgICAjbW9kZWw7XG4gICAgI2FwaUtleTtcbiAgICAjdHJhY2luZ0NvbmZpZyA9IG51bGw7XG4gICAgZXZlbnRFbWl0dGVyID0gbmV3IFJ1bnRpbWVFdmVudEVtaXR0ZXIoKTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy4jbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMO1xuICAgICAgICB0aGlzLiNhcGlLZXkgPSBvcHRpb25zLmFwaUtleTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgbW9kZWwgdGhhdCBpcyBiZWluZyB1c2VkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIuXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRNb2RlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21vZGVsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBtb2RlbCB0aGF0IGlzIGJlaW5nIHVzZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllci5cbiAgICAgKiAqKk5vdGUqKjogVGhlIG1vZGVsIGNhbm5vdCBiZSBjaGFuZ2VkIG1pZCBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgc2V0IGN1cnJlbnRNb2RlbChtb2RlbCkge1xuICAgICAgICB0aGlzLiNtb2RlbCA9IG1vZGVsO1xuICAgIH1cbiAgICBhc3luYyBfZ2V0QXBpS2V5KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gb3B0aW9ucy5hcGlLZXkgPz8gdGhpcy4jYXBpS2V5O1xuICAgICAgICBpZiAodHlwZW9mIGFwaUtleSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGFwaUtleSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcGlLZXk7XG4gICAgfVxuICAgIF9vbk1lc3NhZ2UoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBwYXJzZWQsIGlzR2VuZXJpYyB9ID0gcGFyc2VSZWFsdGltZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgaWYgKHBhcnNlZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnKicsIHBhcnNlZCk7XG4gICAgICAgIGlmIChpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7IHR5cGU6ICdlcnJvcicsIGVycm9yOiBwYXJzZWQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQocGFyc2VkLnR5cGUsIHBhcnNlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuY3JlYXRlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndHVybl9zdGFydGVkJywge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZV9zdGFydGVkJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyc2VkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5kb25lJykge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSByZXNwb25zZURvbmVFdmVudFNjaGVtYS5zYWZlUGFyc2UocGFyc2VkKTtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgcGFyc2luZyByZXNwb25zZSBkb25lIGV2ZW50JywgcmVzcG9uc2UuZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGlucHV0VG9rZW5zID0gcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8uaW5wdXRfdG9rZW5zID8/IDA7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRUb2tlbnMgPSByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5vdXRwdXRfdG9rZW5zID8/IDA7XG4gICAgICAgICAgICBjb25zdCB0b3RhbFRva2VucyA9IGlucHV0VG9rZW5zICsgb3V0cHV0VG9rZW5zO1xuICAgICAgICAgICAgY29uc3QgdXNhZ2UgPSBuZXcgVXNhZ2Uoe1xuICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8uaW5wdXRfdG9rZW5zX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/Lm91dHB1dF90b2tlbnNfZGV0YWlscyA/PyB7fSxcbiAgICAgICAgICAgICAgICB0b3RhbFRva2VucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd1c2FnZV91cGRhdGUnLCB1c2FnZSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3R1cm5fZG9uZScsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2VfZG9uZScsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UuaWQgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS5vdXRwdXQgPz8gW10sXG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8uaW5wdXRfdG9rZW5zX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5vdXRwdXRfdG9rZW5zX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuYXVkaW8uZG9uZScpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9fZG9uZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmRlbGV0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fZGVsZXRlZCcsIHtcbiAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtX2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlZCcpIHtcbiAgICAgICAgICAgIC8vIHJpZ2h0IG5vdyByYXRoZXIgdGhhbiBrZWVwaW5nIHRyYWNrIG9mIHBhcnRpYWxzIGFuZCByZWJ1aWxkaW5nIHRoZSBpdGVtIHdlXG4gICAgICAgICAgICAvLyB3aWxsIHJldHJpZXZlIGl0IGluc3RlYWQgd2hpY2ggdHJpZ2dlcnMgdGhlIGBjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZWRgIGV2ZW50IGJlbG93XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyxcbiAgICAgICAgICAgICAgICBpdGVtX2lkOiBwYXJzZWQuaXRlbV9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLnRleHQuZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmF1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRlbHRhJykge1xuICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuYXVkaW9fdHJhbnNjcmlwdC5kZWx0YScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX3RyYW5zY3JpcHRfZGVsdGEnLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0cmFuc2NyaXB0X2RlbHRhJyxcbiAgICAgICAgICAgICAgICAgICAgZGVsdGE6IHBhcnNlZC5kZWx0YSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbV9pZCxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VJZDogcGFyc2VkLnJlc3BvbnNlX2lkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbm8gc3VwcG9ydCBmb3IgcGFydGlhbCB0cmFuc2NyaXB0cyB5ZXQuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlZCcgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkJykge1xuICAgICAgICAgICAgaWYgKHBhcnNlZC5pdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzSXRlbUlkID0gcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGVkJ1xuICAgICAgICAgICAgICAgICAgICA/IHBhcnNlZC5wcmV2aW91c19pdGVtX2lkXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzSXRlbUlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZWQuaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICByb2xlOiBwYXJzZWQuaXRlbS5yb2xlLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBwYXJzZWQuaXRlbS5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHBhcnNlZC5pdGVtLnN0YXR1cyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgaXRlbSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmFkZGVkJykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHBhcnNlZC5pdGVtO1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnICYmIGl0ZW0uc3RhdHVzID09PSAnY29tcGxldGVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsID0gcmVhbHRpbWVUb29sQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGl0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLCAvLyB3ZSBzZXQgaXQgdG8gaW5fcHJvZ3Jlc3MgZm9yIHRoZSBVSSBhcyBpdCB3aWxsIG9ubHkgYmUgY29tcGxldGVkIHdpdGggdGhlIG91dHB1dFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IGl0ZW0uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogbnVsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgdG9vbENhbGwpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZnVuY3Rpb25fY2FsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkOiBpdGVtLmNhbGxfaWQgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogaXRlbS5hcmd1bWVudHMgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSA/PyAnJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsdGltZUl0ZW0gPSByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VkLml0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogcGFyc2VkLml0ZW0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFyc2VkLml0ZW0uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCByZWFsdGltZUl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfb25FcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgIGVycm9yLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX29uT3BlbigpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0ZWQnKTtcbiAgICB9XG4gICAgX29uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnZGlzY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBjcmVhdGUgYSBuZXcgaXRlbSBpbiB0aGUgY29udmVyc2F0aW9uIGFuZFxuICAgICAqIHRyaWdnZXIgYSByZXNwb25zZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gVGhlIG1lc3NhZ2UgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3RoZXJFdmVudERhdGEgLSBBZGRpdGlvbmFsIGV2ZW50IGRhdGEgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kTWVzc2FnZShtZXNzYWdlLCBvdGhlckV2ZW50RGF0YSkge1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgIGl0ZW06IHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnB1dF90ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBtZXNzYWdlLFxuICAgICAgICAgICAgLi4ub3RoZXJFdmVudERhdGEsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY3JlYXRlJyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9nZXRNZXJnZWRTZXNzaW9uQ29uZmlnKGNvbmZpZykge1xuICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IHtcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogY29uZmlnLmluc3RydWN0aW9ucyxcbiAgICAgICAgICAgIG1vZGVsOiBjb25maWcubW9kZWwgPz9cbiAgICAgICAgICAgICAgICB0aGlzLiNtb2RlbCA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLm1vZGVsLFxuICAgICAgICAgICAgdm9pY2U6IGNvbmZpZy52b2ljZSA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy52b2ljZSxcbiAgICAgICAgICAgIG1vZGFsaXRpZXM6IGNvbmZpZy5tb2RhbGl0aWVzID8/IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLm1vZGFsaXRpZXMsXG4gICAgICAgICAgICBpbnB1dF9hdWRpb19mb3JtYXQ6IGNvbmZpZy5pbnB1dEF1ZGlvRm9ybWF0ID8/XG4gICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuaW5wdXRBdWRpb0Zvcm1hdCxcbiAgICAgICAgICAgIG91dHB1dF9hdWRpb19mb3JtYXQ6IGNvbmZpZy5vdXRwdXRBdWRpb0Zvcm1hdCA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLm91dHB1dEF1ZGlvRm9ybWF0LFxuICAgICAgICAgICAgaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbjogY29uZmlnLmlucHV0QXVkaW9UcmFuc2NyaXB0aW9uID8/XG4gICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuaW5wdXRBdWRpb1RyYW5zY3JpcHRpb24sXG4gICAgICAgICAgICB0dXJuX2RldGVjdGlvbjogY29uZmlnLnR1cm5EZXRlY3Rpb24gPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy50dXJuRGV0ZWN0aW9uLFxuICAgICAgICAgICAgdG9vbF9jaG9pY2U6IGNvbmZpZy50b29sQ2hvaWNlID8/IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLnRvb2xDaG9pY2UsXG4gICAgICAgICAgICB0b29sczogY29uZmlnLnRvb2xzPy5tYXAoKHRvb2wpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udG9vbCxcbiAgICAgICAgICAgICAgICBzdHJpY3Q6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIC8vIFdlIGRvbid0IHNldCB0cmFjaW5nIGhlcmUgdG8gbWFrZSBzdXJlIHRoYXQgd2UgZG9uJ3QgdHJ5IHRvIG92ZXJyaWRlIGl0IG9uIGV2ZXJ5XG4gICAgICAgICAgICAvLyBzZXNzaW9uLnVwZGF0ZSBhcyBpdCBtaWdodCBsZWFkIHRvIGVycm9yc1xuICAgICAgICAgICAgLi4uKGNvbmZpZy5wcm92aWRlckRhdGEgPz8ge30pLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gc2Vzc2lvbkRhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGludGVybmFsIHRyYWNpbmcgY29uZmlnLiBUaGlzIGlzIHVzZWQgdG8gdHJhY2sgdGhlIHRyYWNpbmcgY29uZmlnIHRoYXQgaGFzIGJlZW4gc2V0XG4gICAgICogZHVyaW5nIHRoZSBzZXNzaW9uLmNyZWF0ZSBldmVudC5cbiAgICAgKi9cbiAgICBzZXQgX3RyYWNpbmdDb25maWcodHJhY2luZ0NvbmZpZykge1xuICAgICAgICB0aGlzLiN0cmFjaW5nQ29uZmlnID0gdHJhY2luZ0NvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdHJhY2luZyBjb25maWcgZm9yIHRoZSBzZXNzaW9uLiBUaGlzIHdpbGwgc2VuZCB0aGUgdHJhY2luZyBjb25maWcgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFjaW5nQ29uZmlnIC0gVGhlIHRyYWNpbmcgY29uZmlnIHRvIHNldC4gV2UgZG9uJ3Qgc3VwcG9ydCAnYXV0bycgaGVyZSBhcyB0aGUgU0RLIHdpbGwgYWx3YXlzIGNvbmZpZ3VyZSBhIFdvcmtmbG93IE5hbWUgdW5sZXNzIGl0IGV4aXN0c1xuICAgICAqL1xuICAgIF91cGRhdGVUcmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLiN0cmFjaW5nQ29uZmlnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgLy8gdHJlYXRpbmcgaXQgYXMgZGVmYXVsdCB2YWx1ZVxuICAgICAgICAgICAgdGhpcy4jdHJhY2luZ0NvbmZpZyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWcgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgLy8gdHVybiBvbiB0cmFjaW5nIGluIGF1dG8gbW9kZVxuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyAhPT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0cmFjaW5nQ29uZmlnICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gdHJhY2luZyBpcyBhbHJlYWR5IHNldCwgd2UgY2FuJ3QgY2hhbmdlIGl0XG4gICAgICAgICAgICBsb2dnZXIud2FybignVHJhY2luZyBjb25maWcgaXMgYWxyZWFkeSBzZXQsIHNraXBwaW5nIHNldHRpbmcgaXQgYWdhaW4uIFRoaXMgbGlrZWx5IGhhcHBlbnMgd2hlbiB5b3UgYWxyZWFkeSBzZXQgYSB0cmFjaW5nIGNvbmZpZyBvbiBzZXNzaW9uIGNyZWF0aW9uLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnID09PSBudWxsKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0Rpc2FibGluZyB0cmFjaW5nIGZvciB0aGlzIHNlc3Npb24uIEl0IGNhbm5vdCBiZSB0dXJuZWQgb24gZm9yIHRoaXMgc2Vzc2lvbiBmcm9tIHRoaXMgcG9pbnQgb24uJyk7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IG51bGwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiN0cmFjaW5nQ29uZmlnID09PSBudWxsIHx8XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIHRyYWNpbmcgaXMgY3VycmVudGx5IG5vdCBzZXQgc28gd2UgY2FuIHNldCBpdCB0byB0aGUgbmV3IHZhbHVlXG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnPy5ncm91cF9pZCAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8uZ3JvdXBfaWQgfHxcbiAgICAgICAgICAgIHRyYWNpbmdDb25maWc/Lm1ldGFkYXRhICE9PSB0aGlzLiN0cmFjaW5nQ29uZmlnPy5tZXRhZGF0YSB8fFxuICAgICAgICAgICAgdHJhY2luZ0NvbmZpZz8ud29ya2Zsb3dfbmFtZSAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8ud29ya2Zsb3dfbmFtZSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ01pc21hdGNoIGluIHRyYWNpbmcgY29uZmlnLiBJZ25vcmluZyB0aGUgbmV3IHRyYWNpbmcgY29uZmlnLiBUaGlzIGxpa2VseSBoYXBwZW5zIHdoZW4geW91IGFscmVhZHkgc2V0IGEgdHJhY2luZyBjb25maWcgb24gc2Vzc2lvbiBjcmVhdGlvbi4gQ3VycmVudCB0cmFjaW5nIGNvbmZpZzogJXMsIG5ldyB0cmFjaW5nIGNvbmZpZzogJXMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLiN0cmFjaW5nQ29uZmlnKSwgSlNPTi5zdHJpbmdpZnkodHJhY2luZ0NvbmZpZykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgdHJhY2luZzogdHJhY2luZ0NvbmZpZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBzZXNzaW9uIGNvbmZpZy4gVGhpcyB3aWxsIG1lcmdlIGl0IHdpdGggdGhlIGN1cnJlbnQgc2Vzc2lvbiBjb25maWcgd2l0aCB0aGUgZGVmYXVsdFxuICAgICAqIHZhbHVlcyBhbmQgc2VuZCBpdCB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIFRoZSBzZXNzaW9uIGNvbmZpZyB0byB1cGRhdGUuXG4gICAgICovXG4gICAgdXBkYXRlU2Vzc2lvbkNvbmZpZyhjb25maWcpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSB0aGlzLl9nZXRNZXJnZWRTZXNzaW9uQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICBzZXNzaW9uOiBzZXNzaW9uRGF0YSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgdGhlIG91dHB1dCBvZiBhIGZ1bmN0aW9uIGNhbGwgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0b29sQ2FsbCAtIFRoZSB0b29sIGNhbGwgdG8gc2VuZCB0aGUgb3V0cHV0IGZvci5cbiAgICAgKiBAcGFyYW0gb3V0cHV0IC0gVGhlIG91dHB1dCBvZiB0aGUgZnVuY3Rpb24gY2FsbC5cbiAgICAgKiBAcGFyYW0gc3RhcnRSZXNwb25zZSAtIFdoZXRoZXIgdG8gc3RhcnQgYSBuZXcgcmVzcG9uc2UgYWZ0ZXIgc2VuZGluZyB0aGUgb3V0cHV0LlxuICAgICAqL1xuICAgIHNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIG91dHB1dCwgc3RhcnRSZXNwb25zZSA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICBpdGVtOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGxfb3V0cHV0JyxcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICAgICAgY2FsbF9pZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcmVhbHRpbWVUb29sQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgIGl0ZW1JZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHRvb2xDYWxsLnByZXZpb3VzSXRlbUlkLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsJyxcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50czogdG9vbENhbGwuYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgdG9vbCBjYWxsIGl0ZW0nLCBlcnJvciwgdG9vbENhbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydFJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGF1ZGlvIGJ1ZmZlciB0byB0aGUgUmVhbHRpbWUgQVBJLiBJZiBgeyBjb21taXQ6IHRydWUgfWAgaXMgcGFzc2VkLCB0aGUgYXVkaW8gYnVmZmVyXG4gICAgICogd2lsbCBiZSBjb21taXR0ZWQgYW5kIHRoZSBtb2RlbCB3aWxsIHN0YXJ0IHByb2Nlc3NpbmcgaXQuIFRoaXMgaXMgbmVjZXNzYXJ5IGlmIHlvdSBoYXZlXG4gICAgICogZGlzYWJsZWQgdHVybiBkZXRlY3Rpb24gLyB2b2ljZSBhY3Rpdml0eSBkZXRlY3Rpb24gKFZBRCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gYnVmZmVyIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGF1ZGlvIGJ1ZmZlci5cbiAgICAgKi9cbiAgICBzZW5kQXVkaW8oYXVkaW8sIHsgY29tbWl0ID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdpbnB1dF9hdWRpb19idWZmZXIuYXBwZW5kJyxcbiAgICAgICAgICAgIGF1ZGlvOiBhcnJheUJ1ZmZlclRvQmFzZTY0KGF1ZGlvKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjb21taXQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW5wdXRfYXVkaW9fYnVmZmVyLmNvbW1pdCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLiBUaGlzIHdpbGwgY3JlYXRlIGEgZGlmZiBiZXR3ZWVuIHRoZSBvbGQgYW5kIG5ldyBoaXN0b3J5XG4gICAgICogYW5kIHNlbmQgdGhlIG5lY2Vzc2FyeSBldmVudHMgdG8gdGhlIFJlYWx0aW1lIEFQSSB0byB1cGRhdGUgdGhlIGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb2xkSGlzdG9yeSAtIFRoZSBvbGQgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5IG9mIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgcmVzZXRIaXN0b3J5KG9sZEhpc3RvcnksIG5ld0hpc3RvcnkpIHtcbiAgICAgICAgY29uc3QgeyByZW1vdmFscywgYWRkaXRpb25zLCB1cGRhdGVzIH0gPSBkaWZmUmVhbHRpbWVIaXN0b3J5KG9sZEhpc3RvcnksIG5ld0hpc3RvcnkpO1xuICAgICAgICBjb25zdCByZW1vdmFsSWRzID0gbmV3IFNldChyZW1vdmFscy5tYXAoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkKSk7XG4gICAgICAgIC8vIHdlIGRvbid0IGhhdmUgYW4gdXBkYXRlIGV2ZW50IGZvciBpdGVtcyBzbyB3ZSB3aWxsIHJlbW92ZSBhbmQgcmUtYWRkIHdoYXQncyB0aGVyZVxuICAgICAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XG4gICAgICAgICAgICByZW1vdmFsSWRzLmFkZCh1cGRhdGUuaXRlbUlkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVtb3ZhbElkcy5zaXplID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtSWQgb2YgcmVtb3ZhbElkcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmRlbGV0ZScsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1faWQ6IGl0ZW1JZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhZGRpdGlvbnNBbmRVcGRhdGVzID0gWy4uLmFkZGl0aW9ucywgLi4udXBkYXRlc107XG4gICAgICAgIGZvciAoY29uc3QgYWRkaXRpb24gb2YgYWRkaXRpb25zQW5kVXBkYXRlcykge1xuICAgICAgICAgICAgaWYgKGFkZGl0aW9uLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1FbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICByb2xlOiBhZGRpdGlvbi5yb2xlLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBhZGRpdGlvbi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBpZDogYWRkaXRpb24uaXRlbUlkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uLnJvbGUgIT09ICdzeXN0ZW0nICYmIGFkZGl0aW9uLnN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICBpdGVtRW50cnkuc3RhdHVzID0gYWRkaXRpb24uc3RhdHVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtOiBpdGVtRW50cnksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhZGRpdGlvbi50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRnVuY3Rpb24gY2FsbHMgY2Fubm90IGJlIG1hbnVhbGx5IGFkZGVkIG9yIHVwZGF0ZWQgYXQgdGhlIG1vbWVudC4gSWdub3JpbmcuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZUJhc2UubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeBase.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeEvents.mjs":
/*!*********************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeEvents.mjs ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   conversationCreatedEventSchema: () => (/* binding */ conversationCreatedEventSchema),\n/* harmony export */   conversationItemContentSchema: () => (/* binding */ conversationItemContentSchema),\n/* harmony export */   conversationItemCreateEventSchema: () => (/* binding */ conversationItemCreateEventSchema),\n/* harmony export */   conversationItemCreatedEventSchema: () => (/* binding */ conversationItemCreatedEventSchema),\n/* harmony export */   conversationItemDeleteEventSchema: () => (/* binding */ conversationItemDeleteEventSchema),\n/* harmony export */   conversationItemDeletedEventSchema: () => (/* binding */ conversationItemDeletedEventSchema),\n/* harmony export */   conversationItemInputAudioTranscriptionCompletedEventSchema: () => (/* binding */ conversationItemInputAudioTranscriptionCompletedEventSchema),\n/* harmony export */   conversationItemInputAudioTranscriptionDeltaEventSchema: () => (/* binding */ conversationItemInputAudioTranscriptionDeltaEventSchema),\n/* harmony export */   conversationItemInputAudioTranscriptionFailedEventSchema: () => (/* binding */ conversationItemInputAudioTranscriptionFailedEventSchema),\n/* harmony export */   conversationItemRetrieveEventSchema: () => (/* binding */ conversationItemRetrieveEventSchema),\n/* harmony export */   conversationItemRetrievedEventSchema: () => (/* binding */ conversationItemRetrievedEventSchema),\n/* harmony export */   conversationItemSchema: () => (/* binding */ conversationItemSchema),\n/* harmony export */   conversationItemTruncateEventSchema: () => (/* binding */ conversationItemTruncateEventSchema),\n/* harmony export */   conversationItemTruncatedEventSchema: () => (/* binding */ conversationItemTruncatedEventSchema),\n/* harmony export */   errorEventSchema: () => (/* binding */ errorEventSchema),\n/* harmony export */   genericEventSchema: () => (/* binding */ genericEventSchema),\n/* harmony export */   inputAudioBufferAppendEventSchema: () => (/* binding */ inputAudioBufferAppendEventSchema),\n/* harmony export */   inputAudioBufferClearEventSchema: () => (/* binding */ inputAudioBufferClearEventSchema),\n/* harmony export */   inputAudioBufferClearedEventSchema: () => (/* binding */ inputAudioBufferClearedEventSchema),\n/* harmony export */   inputAudioBufferCommitEventSchema: () => (/* binding */ inputAudioBufferCommitEventSchema),\n/* harmony export */   inputAudioBufferCommittedEventSchema: () => (/* binding */ inputAudioBufferCommittedEventSchema),\n/* harmony export */   inputAudioBufferSpeechStartedEventSchema: () => (/* binding */ inputAudioBufferSpeechStartedEventSchema),\n/* harmony export */   inputAudioBufferSpeechStoppedEventSchema: () => (/* binding */ inputAudioBufferSpeechStoppedEventSchema),\n/* harmony export */   outputAudioBufferClearedEventSchema: () => (/* binding */ outputAudioBufferClearedEventSchema),\n/* harmony export */   outputAudioBufferStartedEventSchema: () => (/* binding */ outputAudioBufferStartedEventSchema),\n/* harmony export */   outputAudioBufferStoppedEventSchema: () => (/* binding */ outputAudioBufferStoppedEventSchema),\n/* harmony export */   parseRealtimeEvent: () => (/* binding */ parseRealtimeEvent),\n/* harmony export */   rateLimitsUpdatedEventSchema: () => (/* binding */ rateLimitsUpdatedEventSchema),\n/* harmony export */   realtimeClientEventSchema: () => (/* binding */ realtimeClientEventSchema),\n/* harmony export */   realtimeResponse: () => (/* binding */ realtimeResponse),\n/* harmony export */   realtimeServerEventSchema: () => (/* binding */ realtimeServerEventSchema),\n/* harmony export */   responseAudioDeltaEventSchema: () => (/* binding */ responseAudioDeltaEventSchema),\n/* harmony export */   responseAudioDoneEventSchema: () => (/* binding */ responseAudioDoneEventSchema),\n/* harmony export */   responseAudioTranscriptDeltaEventSchema: () => (/* binding */ responseAudioTranscriptDeltaEventSchema),\n/* harmony export */   responseAudioTranscriptDoneEventSchema: () => (/* binding */ responseAudioTranscriptDoneEventSchema),\n/* harmony export */   responseCancelEventSchema: () => (/* binding */ responseCancelEventSchema),\n/* harmony export */   responseContentPartAddedEventSchema: () => (/* binding */ responseContentPartAddedEventSchema),\n/* harmony export */   responseContentPartDoneEventSchema: () => (/* binding */ responseContentPartDoneEventSchema),\n/* harmony export */   responseCreateEventSchema: () => (/* binding */ responseCreateEventSchema),\n/* harmony export */   responseCreatedEventSchema: () => (/* binding */ responseCreatedEventSchema),\n/* harmony export */   responseDoneEventSchema: () => (/* binding */ responseDoneEventSchema),\n/* harmony export */   responseFunctionCallArgumentsDeltaEventSchema: () => (/* binding */ responseFunctionCallArgumentsDeltaEventSchema),\n/* harmony export */   responseFunctionCallArgumentsDoneEventSchema: () => (/* binding */ responseFunctionCallArgumentsDoneEventSchema),\n/* harmony export */   responseOutputItemAddedEventSchema: () => (/* binding */ responseOutputItemAddedEventSchema),\n/* harmony export */   responseOutputItemDoneEventSchema: () => (/* binding */ responseOutputItemDoneEventSchema),\n/* harmony export */   responseTextDeltaEventSchema: () => (/* binding */ responseTextDeltaEventSchema),\n/* harmony export */   responseTextDoneEventSchema: () => (/* binding */ responseTextDoneEventSchema),\n/* harmony export */   sessionCreatedEventSchema: () => (/* binding */ sessionCreatedEventSchema),\n/* harmony export */   sessionUpdateEventSchema: () => (/* binding */ sessionUpdateEventSchema),\n/* harmony export */   sessionUpdatedEventSchema: () => (/* binding */ sessionUpdatedEventSchema),\n/* harmony export */   transcriptionSessionUpdateEventSchema: () => (/* binding */ transcriptionSessionUpdateEventSchema),\n/* harmony export */   transcriptionSessionUpdatedEventSchema: () => (/* binding */ transcriptionSessionUpdatedEventSchema)\n/* harmony export */ });\n/* harmony import */ var _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/zod/v3 */ \"(ssr)/../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js\");\n\n// Event schemas mirroring the structures defined in the OpenAI SDK typings.\n// Most fields from the interfaces in `realtime.d.ts` are captured here to\n// provide better runtime validation when parsing events from the server.\nconst realtimeResponse = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional().nullable(),\n    conversation_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional().nullable(),\n    max_output_tokens: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().or(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('inf')).optional().nullable(),\n    metadata: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(), _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.any()).optional().nullable(),\n    modalities: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string()).optional().nullable(),\n    object: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('realtime.response').optional().nullable(),\n    output: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.any()).optional().nullable(),\n    output_audio_format: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional().nullable(),\n    status: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__[\"enum\"](['completed', 'incomplete', 'failed', 'cancelled', 'in_progress'])\n        .optional()\n        .nullable(),\n    status_details: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(), _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.any()).optional().nullable(),\n    usage: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n        input_tokens: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n        input_tokens_details: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(), _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.any()).optional().nullable(),\n        output_tokens: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n        output_tokens_details: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(), _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.any())\n            .optional()\n            .nullable(),\n    })\n        .optional()\n        .nullable(),\n    voice: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional().nullable(),\n});\n// Basic content schema used by ConversationItem.\nconst conversationItemContentSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    audio: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n    text: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n    transcript: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.union([\n        _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('input_text'),\n        _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('input_audio'),\n        _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('item_reference'),\n        _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('text'),\n        _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('audio'),\n    ]),\n});\nconst conversationItemSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    arguments: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    call_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    content: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(conversationItemContentSchema).optional(),\n    name: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    object: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('realtime.item').optional(),\n    output: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    role: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__[\"enum\"](['user', 'assistant', 'system']).optional(),\n    status: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__[\"enum\"](['completed', 'incomplete', 'in_progress']).optional(),\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__[\"enum\"](['message', 'function_call', 'function_call_output']).optional(),\n});\nconst conversationCreatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('conversation.created'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    conversation: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n        id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n        object: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('realtime.conversation').optional(),\n    }),\n});\nconst conversationItemCreatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('conversation.item.created'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item: conversationItemSchema,\n    previous_item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n});\nconst conversationItemDeletedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('conversation.item.deleted'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n});\nconst conversationItemInputAudioTranscriptionCompletedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('conversation.item.input_audio_transcription.completed'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    transcript: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    logprobs: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.any()).nullable().optional(),\n});\nconst conversationItemInputAudioTranscriptionDeltaEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('conversation.item.input_audio_transcription.delta'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    delta: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    logprobs: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.any()).nullable().optional(),\n});\nconst conversationItemInputAudioTranscriptionFailedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('conversation.item.input_audio_transcription.failed'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    error: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n        code: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n        message: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n        param: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n        type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    }),\n});\nconst conversationItemRetrievedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('conversation.item.retrieved'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item: conversationItemSchema,\n});\nconst conversationItemTruncatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('conversation.item.truncated'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    audio_end_ms: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n});\nconst conversationItemCreateEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('conversation.item.create'),\n    item: conversationItemSchema,\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    previous_item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n});\nconst conversationItemDeleteEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('conversation.item.delete'),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n});\nconst conversationItemRetrieveEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('conversation.item.retrieve'),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n});\nconst conversationItemTruncateEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('conversation.item.truncate'),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    audio_end_ms: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n});\nconst errorEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('error'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    error: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.any().optional(),\n});\nconst inputAudioBufferClearedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('input_audio_buffer.cleared'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n});\nconst inputAudioBufferAppendEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('input_audio_buffer.append'),\n    audio: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n});\nconst inputAudioBufferClearEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('input_audio_buffer.clear'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n});\nconst inputAudioBufferCommitEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('input_audio_buffer.commit'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n});\nconst inputAudioBufferCommittedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('input_audio_buffer.committed'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    previous_item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n});\nconst inputAudioBufferSpeechStartedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('input_audio_buffer.speech_started'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    audio_start_ms: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n});\nconst inputAudioBufferSpeechStoppedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('input_audio_buffer.speech_stopped'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    audio_end_ms: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n});\nconst outputAudioBufferStartedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('output_audio_buffer.started'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n})\n    .passthrough();\nconst outputAudioBufferStoppedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('output_audio_buffer.stopped'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n})\n    .passthrough();\nconst outputAudioBufferClearedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('output_audio_buffer.cleared'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n});\nconst rateLimitsUpdatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('rate_limits.updated'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    rate_limits: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n        limit: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n        name: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__[\"enum\"](['requests', 'tokens']).optional(),\n        remaining: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n        reset_seconds: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    })),\n});\nconst responseAudioDeltaEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.audio.delta'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    delta: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n});\nconst responseAudioDoneEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.audio.done'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n});\nconst responseAudioTranscriptDeltaEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.audio_transcript.delta'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    delta: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n});\nconst responseAudioTranscriptDoneEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.audio_transcript.done'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    transcript: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n});\nconst responseContentPartAddedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.content_part.added'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    part: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n        audio: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n        text: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n        transcript: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n        type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__[\"enum\"](['text', 'audio']).optional(),\n    }),\n});\nconst responseContentPartDoneEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.content_part.done'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    part: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n        audio: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n        text: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n        transcript: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n        type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__[\"enum\"](['text', 'audio']).optional(),\n    }),\n});\nconst responseCreatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.created'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    response: realtimeResponse,\n});\nconst responseDoneEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.done'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    response: realtimeResponse,\n});\nconst responseFunctionCallArgumentsDeltaEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.function_call_arguments.delta'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    call_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    delta: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n});\nconst responseFunctionCallArgumentsDoneEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.function_call_arguments.done'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    call_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    arguments: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n});\nconst responseOutputItemAddedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.output_item.added'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item: conversationItemSchema,\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n});\nconst responseOutputItemDoneEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.output_item.done'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item: conversationItemSchema,\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n});\nconst responseTextDeltaEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.text.delta'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    delta: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n});\nconst responseTextDoneEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.text.done'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    text: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n});\nconst sessionCreatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('session.created'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    session: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.any(),\n});\nconst sessionUpdatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('session.updated'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    session: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.any(),\n});\nconst responseCancelEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.cancel'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n});\nconst responseCreateEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('response.create'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    response: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.any().optional(),\n});\nconst sessionUpdateEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('session.update'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    session: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.any(),\n});\nconst transcriptionSessionUpdateEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('transcription_session.update'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    session: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.any(),\n});\nconst transcriptionSessionUpdatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal('transcription_session.updated'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    session: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.any(),\n});\n/**\n * This schema is used if an event is unknown to the client. The Realtime API might introduce\n * new events at some point and we should handle them gracefully by treating them as generic events\n * only requiring a type and an optional event_id.\n */\nconst genericEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional().nullable(),\n})\n    .passthrough();\nconst realtimeServerEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion('type', [\n    conversationCreatedEventSchema,\n    conversationItemCreatedEventSchema,\n    conversationItemDeletedEventSchema,\n    conversationItemInputAudioTranscriptionCompletedEventSchema,\n    conversationItemInputAudioTranscriptionDeltaEventSchema,\n    conversationItemInputAudioTranscriptionFailedEventSchema,\n    conversationItemRetrievedEventSchema,\n    conversationItemTruncatedEventSchema,\n    errorEventSchema,\n    inputAudioBufferClearedEventSchema,\n    inputAudioBufferCommittedEventSchema,\n    inputAudioBufferSpeechStartedEventSchema,\n    inputAudioBufferSpeechStoppedEventSchema,\n    outputAudioBufferStartedEventSchema,\n    outputAudioBufferStoppedEventSchema,\n    outputAudioBufferClearedEventSchema,\n    rateLimitsUpdatedEventSchema,\n    responseAudioDeltaEventSchema,\n    responseAudioDoneEventSchema,\n    responseAudioTranscriptDeltaEventSchema,\n    responseAudioTranscriptDoneEventSchema,\n    responseContentPartAddedEventSchema,\n    responseContentPartDoneEventSchema,\n    responseCreatedEventSchema,\n    responseDoneEventSchema,\n    responseFunctionCallArgumentsDeltaEventSchema,\n    responseFunctionCallArgumentsDoneEventSchema,\n    responseOutputItemAddedEventSchema,\n    responseOutputItemDoneEventSchema,\n    responseTextDeltaEventSchema,\n    responseTextDoneEventSchema,\n    sessionCreatedEventSchema,\n    sessionUpdatedEventSchema,\n    transcriptionSessionUpdatedEventSchema,\n]);\nconst realtimeClientEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion('type', [\n    conversationItemCreateEventSchema,\n    conversationItemDeleteEventSchema,\n    conversationItemRetrieveEventSchema,\n    conversationItemTruncateEventSchema,\n    inputAudioBufferAppendEventSchema,\n    inputAudioBufferClearEventSchema,\n    inputAudioBufferCommitEventSchema,\n    responseCancelEventSchema,\n    responseCreateEventSchema,\n    sessionUpdateEventSchema,\n    transcriptionSessionUpdateEventSchema,\n]);\n/**\n * Parses a realtime event from the server. If the event is unknown to the client, it will be treated as a generic event.\n * @param event - The event to parse.\n * @returns The parsed event or null if the event is unknown to the client.\n */\nfunction parseRealtimeEvent(event) {\n    const raw = JSON.parse(event.data.toString());\n    const parsed = realtimeServerEventSchema.safeParse(raw);\n    if (!parsed.success) {\n        const genericParsed = genericEventSchema.safeParse(raw);\n        if (genericParsed.success) {\n            return { data: genericParsed.data, isGeneric: true };\n        }\n        return { data: null, isGeneric: true };\n    }\n    return { data: parsed.data, isGeneric: false };\n}\n//# sourceMappingURL=openaiRealtimeEvents.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L29wZW5haVJlYWx0aW1lRXZlbnRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDTyx5QkFBeUIsa0RBQVE7QUFDeEMsUUFBUSxrREFBUTtBQUNoQixxQkFBcUIsa0RBQVE7QUFDN0IsdUJBQXVCLGtEQUFRLE1BQU0sbURBQVM7QUFDOUMsY0FBYyxrREFBUSxDQUFDLGtEQUFRLElBQUksK0NBQUs7QUFDeEMsZ0JBQWdCLGlEQUFPLENBQUMsa0RBQVE7QUFDaEMsWUFBWSxtREFBUztBQUNyQixZQUFZLGlEQUFPLENBQUMsK0NBQUs7QUFDekIseUJBQXlCLGtEQUFRO0FBQ2pDLFlBQVksbURBQ0M7QUFDYjtBQUNBO0FBQ0Esb0JBQW9CLGtEQUFRLENBQUMsa0RBQVEsSUFBSSwrQ0FBSztBQUM5QyxXQUFXLGtEQUNJO0FBQ2Ysc0JBQXNCLGtEQUFRO0FBQzlCLDhCQUE4QixrREFBUSxDQUFDLGtEQUFRLElBQUksK0NBQUs7QUFDeEQsdUJBQXVCLGtEQUFRO0FBQy9CLCtCQUErQixrREFDWixDQUFDLGtEQUFRLElBQUksK0NBQUs7QUFDckM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsV0FBVyxrREFBUTtBQUNuQixDQUFDO0FBQ0Q7QUFDTyxzQ0FBc0Msa0RBQVE7QUFDckQsUUFBUSxrREFBUTtBQUNoQixXQUFXLGtEQUFRO0FBQ25CLFVBQVUsa0RBQVE7QUFDbEIsZ0JBQWdCLGtEQUFRO0FBQ3hCLFVBQVUsaURBQU87QUFDakIsUUFBUSxtREFBUztBQUNqQixRQUFRLG1EQUFTO0FBQ2pCLFFBQVEsbURBQVM7QUFDakIsUUFB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLGtDQUFrQyw4REFBb0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMveXV3YW5nL3Byb2plY3RzL29wZW5haS1yZWFsdGltZS1hZ2VudHMvbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L29wZW5haVJlYWx0aW1lRXZlbnRzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSAnQG9wZW5haS96b2QvdjMnO1xuLy8gRXZlbnQgc2NoZW1hcyBtaXJyb3JpbmcgdGhlIHN0cnVjdHVyZXMgZGVmaW5lZCBpbiB0aGUgT3BlbkFJIFNESyB0eXBpbmdzLlxuLy8gTW9zdCBmaWVsZHMgZnJvbSB0aGUgaW50ZXJmYWNlcyBpbiBgcmVhbHRpbWUuZC50c2AgYXJlIGNhcHR1cmVkIGhlcmUgdG9cbi8vIHByb3ZpZGUgYmV0dGVyIHJ1bnRpbWUgdmFsaWRhdGlvbiB3aGVuIHBhcnNpbmcgZXZlbnRzIGZyb20gdGhlIHNlcnZlci5cbmV4cG9ydCBjb25zdCByZWFsdGltZVJlc3BvbnNlID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBjb252ZXJzYXRpb25faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG1heF9vdXRwdXRfdG9rZW5zOiB6Lm51bWJlcigpLm9yKHoubGl0ZXJhbCgnaW5mJykpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtZXRhZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG1vZGFsaXRpZXM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG9iamVjdDogei5saXRlcmFsKCdyZWFsdGltZS5yZXNwb25zZScpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBvdXRwdXQ6IHouYXJyYXkoei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG91dHB1dF9hdWRpb19mb3JtYXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHN0YXR1czogelxuICAgICAgICAuZW51bShbJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJywgJ2ZhaWxlZCcsICdjYW5jZWxsZWQnLCAnaW5fcHJvZ3Jlc3MnXSlcbiAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgLm51bGxhYmxlKCksXG4gICAgc3RhdHVzX2RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICB1c2FnZTogelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgaW5wdXRfdG9rZW5zOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIGlucHV0X3Rva2Vuc19kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgICAgIG91dHB1dF90b2tlbnM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgb3V0cHV0X3Rva2Vuc19kZXRhaWxzOiB6XG4gICAgICAgICAgICAucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpXG4gICAgICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAgICAgLm51bGxhYmxlKCksXG4gICAgfSlcbiAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgLm51bGxhYmxlKCksXG4gICAgdm9pY2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG4vLyBCYXNpYyBjb250ZW50IHNjaGVtYSB1c2VkIGJ5IENvbnZlcnNhdGlvbkl0ZW0uXG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUNvbnRlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBhdWRpbzogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdGV4dDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei51bmlvbihbXG4gICAgICAgIHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLFxuICAgICAgICB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvJyksXG4gICAgICAgIHoubGl0ZXJhbCgnaXRlbV9yZWZlcmVuY2UnKSxcbiAgICAgICAgei5saXRlcmFsKCd0ZXh0JyksXG4gICAgICAgIHoubGl0ZXJhbCgnYXVkaW8nKSxcbiAgICBdKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBjYWxsX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY29udGVudDogei5hcnJheShjb252ZXJzYXRpb25JdGVtQ29udGVudFNjaGVtYSkub3B0aW9uYWwoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3JlYWx0aW1lLml0ZW0nKS5vcHRpb25hbCgpLFxuICAgIG91dHB1dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHJvbGU6IHouZW51bShbJ3VzZXInLCAnYXNzaXN0YW50JywgJ3N5c3RlbSddKS5vcHRpb25hbCgpLFxuICAgIHN0YXR1czogei5lbnVtKFsnY29tcGxldGVkJywgJ2luY29tcGxldGUnLCAnaW5fcHJvZ3Jlc3MnXSkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6LmVudW0oWydtZXNzYWdlJywgJ2Z1bmN0aW9uX2NhbGwnLCAnZnVuY3Rpb25fY2FsbF9vdXRwdXQnXSkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgY29udmVyc2F0aW9uOiB6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIG9iamVjdDogei5saXRlcmFsKCdyZWFsdGltZS5jb252ZXJzYXRpb24nKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbURlbGV0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmRlbGV0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uQ29tcGxldGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLFxuICAgIGxvZ3Byb2JzOiB6LmFycmF5KHouYW55KCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkRlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBsb2dwcm9iczogei5hcnJheSh6LmFueSgpKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25GYWlsZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uZmFpbGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGVycm9yOiB6Lm9iamVjdCh7XG4gICAgICAgIGNvZGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgbWVzc2FnZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBwYXJhbTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19lbmRfbXM6IHoubnVtYmVyKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmRlbGV0ZScpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmUnKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlJyksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19lbmRfbXM6IHoubnVtYmVyKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgZXJyb3JFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Vycm9yJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBlcnJvcjogei5hbnkoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jbGVhcmVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuYXBwZW5kJyksXG4gICAgYXVkaW86IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDbGVhckV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNsZWFyJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDb21taXRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdHRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNvbW1pdHRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RhcnRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdGFydGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19zdGFydF9tczogei5udW1iZXIoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdG9wcGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuc3BlZWNoX3N0b3BwZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX2VuZF9tczogei5udW1iZXIoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IG91dHB1dEF1ZGlvQnVmZmVyU3RhcnRlZEV2ZW50U2NoZW1hID0gelxuICAgIC5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X2F1ZGlvX2J1ZmZlci5zdGFydGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IG91dHB1dEF1ZGlvQnVmZmVyU3RvcHBlZEV2ZW50U2NoZW1hID0gelxuICAgIC5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X2F1ZGlvX2J1ZmZlci5zdG9wcGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IG91dHB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X2F1ZGlvX2J1ZmZlci5jbGVhcmVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByYXRlTGltaXRzVXBkYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmF0ZV9saW1pdHMudXBkYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJhdGVfbGltaXRzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgbGltaXQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgbmFtZTogei5lbnVtKFsncmVxdWVzdHMnLCAndG9rZW5zJ10pLm9wdGlvbmFsKCksXG4gICAgICAgIHJlbWFpbmluZzogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICByZXNldF9zZWNvbmRzOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgfSkpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb0RlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5hdWRpby5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuYXVkaW8uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5hdWRpb190cmFuc2NyaXB0LmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuYXVkaW9fdHJhbnNjcmlwdC5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDb250ZW50UGFydEFkZGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jb250ZW50X3BhcnQuYWRkZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcnQ6IHoub2JqZWN0KHtcbiAgICAgICAgYXVkaW86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouZW51bShbJ3RleHQnLCAnYXVkaW8nXSkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ29udGVudFBhcnREb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jb250ZW50X3BhcnQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG4gICAgcGFydDogei5vYmplY3Qoe1xuICAgICAgICBhdWRpbzogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0ZXh0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5lbnVtKFsndGV4dCcsICdhdWRpbyddKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2U6IHJlYWx0aW1lUmVzcG9uc2UsXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZURvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByZXNwb25zZTogcmVhbHRpbWVSZXNwb25zZSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjYWxsX2lkOiB6LnN0cmluZygpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuZnVuY3Rpb25fY2FsbF9hcmd1bWVudHMuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU91dHB1dEl0ZW1Eb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UudGV4dC5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZVRleHREb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS50ZXh0LmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBzZXNzaW9uQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdzZXNzaW9uLnVwZGF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDYW5jZWxFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmNhbmNlbCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ3JlYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jcmVhdGUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHJlc3BvbnNlOiB6LmFueSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdzZXNzaW9uLnVwZGF0ZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHRyYW5zY3JpcHRpb25TZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCd0cmFuc2NyaXB0aW9uX3Nlc3Npb24udXBkYXRlJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3QgdHJhbnNjcmlwdGlvblNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCd0cmFuc2NyaXB0aW9uX3Nlc3Npb24udXBkYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbi8qKlxuICogVGhpcyBzY2hlbWEgaXMgdXNlZCBpZiBhbiBldmVudCBpcyB1bmtub3duIHRvIHRoZSBjbGllbnQuIFRoZSBSZWFsdGltZSBBUEkgbWlnaHQgaW50cm9kdWNlXG4gKiBuZXcgZXZlbnRzIGF0IHNvbWUgcG9pbnQgYW5kIHdlIHNob3VsZCBoYW5kbGUgdGhlbSBncmFjZWZ1bGx5IGJ5IHRyZWF0aW5nIHRoZW0gYXMgZ2VuZXJpYyBldmVudHNcbiAqIG9ubHkgcmVxdWlyaW5nIGEgdHlwZSBhbmQgYW4gb3B0aW9uYWwgZXZlbnRfaWQuXG4gKi9cbmV4cG9ydCBjb25zdCBnZW5lcmljRXZlbnRTY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgdHlwZTogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lU2VydmVyRXZlbnRTY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBjb252ZXJzYXRpb25DcmVhdGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtRGVsZXRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkNvbXBsZXRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkRlbHRhRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRmFpbGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZWRFdmVudFNjaGVtYSxcbiAgICBlcnJvckV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdHRlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdGFydGVkRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0b3BwZWRFdmVudFNjaGVtYSxcbiAgICBvdXRwdXRBdWRpb0J1ZmZlclN0YXJ0ZWRFdmVudFNjaGVtYSxcbiAgICBvdXRwdXRBdWRpb0J1ZmZlclN0b3BwZWRFdmVudFNjaGVtYSxcbiAgICBvdXRwdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSxcbiAgICByYXRlTGltaXRzVXBkYXRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9EZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9Eb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ29udGVudFBhcnREb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDcmVhdGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlVGV4dERlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VUZXh0RG9uZUV2ZW50U2NoZW1hLFxuICAgIHNlc3Npb25DcmVhdGVkRXZlbnRTY2hlbWEsXG4gICAgc2Vzc2lvblVwZGF0ZWRFdmVudFNjaGVtYSxcbiAgICB0cmFuc2NyaXB0aW9uU2Vzc2lvblVwZGF0ZWRFdmVudFNjaGVtYSxcbl0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lQ2xpZW50RXZlbnRTY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBjb252ZXJzYXRpb25JdGVtQ3JlYXRlRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbURlbGV0ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZUV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJBcHBlbmRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0RXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDYW5jZWxFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNyZWF0ZUV2ZW50U2NoZW1hLFxuICAgIHNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSxcbiAgICB0cmFuc2NyaXB0aW9uU2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hLFxuXSk7XG4vKipcbiAqIFBhcnNlcyBhIHJlYWx0aW1lIGV2ZW50IGZyb20gdGhlIHNlcnZlci4gSWYgdGhlIGV2ZW50IGlzIHVua25vd24gdG8gdGhlIGNsaWVudCwgaXQgd2lsbCBiZSB0cmVhdGVkIGFzIGEgZ2VuZXJpYyBldmVudC5cbiAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBwYXJzZS5cbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgZXZlbnQgb3IgbnVsbCBpZiB0aGUgZXZlbnQgaXMgdW5rbm93biB0byB0aGUgY2xpZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZWFsdGltZUV2ZW50KGV2ZW50KSB7XG4gICAgY29uc3QgcmF3ID0gSlNPTi5wYXJzZShldmVudC5kYXRhLnRvU3RyaW5nKCkpO1xuICAgIGNvbnN0IHBhcnNlZCA9IHJlYWx0aW1lU2VydmVyRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHJhdyk7XG4gICAgaWYgKCFwYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICBjb25zdCBnZW5lcmljUGFyc2VkID0gZ2VuZXJpY0V2ZW50U2NoZW1hLnNhZmVQYXJzZShyYXcpO1xuICAgICAgICBpZiAoZ2VuZXJpY1BhcnNlZC5zdWNjZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiBnZW5lcmljUGFyc2VkLmRhdGEsIGlzR2VuZXJpYzogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGlzR2VuZXJpYzogdHJ1ZSB9O1xuICAgIH1cbiAgICByZXR1cm4geyBkYXRhOiBwYXJzZWQuZGF0YSwgaXNHZW5lcmljOiBmYWxzZSB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVFdmVudHMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeEvents.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebRtc.mjs":
/*!*********************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebRtc.mjs ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpenAIRealtimeWebRTC: () => (/* binding */ OpenAIRealtimeWebRTC)\n/* harmony export */ });\n/* harmony import */ var _openai_agents_core_shims__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/agents-core/_shims */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-core@0.0.5_ws@8.18.3_zod@3.25.76/node_modules/@openai/agents-core/dist/shims/shims-node.mjs\");\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-core@0.0.5_ws@8.18.3_zod@3.25.76/node_modules/@openai/agents-core/dist/index.mjs\");\n/* harmony import */ var _logger_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./logger.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/logger.mjs\");\n/* harmony import */ var _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./openaiRealtimeBase.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeBase.mjs\");\n/* harmony import */ var _openaiRealtimeEvents_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./openaiRealtimeEvents.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeEvents.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/utils.mjs\");\n/// <reference lib=\"dom\" />\n\n\n\n\n\n\n/**\n * Transport layer that's handling the connection between the client and OpenAI's Realtime API\n * via WebRTC. While this transport layer is designed to be used within a RealtimeSession, it can\n * also be used standalone if you want to have a direct connection to the Realtime API.\n *\n * Unless you specify a `mediaStream` or `audioElement` option, the transport layer will\n * automatically configure the microphone and audio output to be used by the session.\n */\nclass OpenAIRealtimeWebRTC extends _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_3__.OpenAIRealtimeBase {\n    options;\n    #url;\n    #state = {\n        status: 'disconnected',\n        peerConnection: undefined,\n        dataChannel: undefined,\n    };\n    #useInsecureApiKey;\n    #ongoingResponse = false;\n    #muted = false;\n    constructor(options = {}) {\n        if (typeof RTCPeerConnection === 'undefined') {\n            throw new Error('WebRTC is not supported in this environment');\n        }\n        super(options);\n        this.options = options;\n        this.#url = options.baseUrl ?? `https://api.openai.com/v1/realtime`;\n        this.#useInsecureApiKey = options.useInsecureApiKey ?? false;\n    }\n    /**\n     * The current status of the WebRTC connection.\n     */\n    get status() {\n        return this.#state.status;\n    }\n    /**\n     * The current connection state of the WebRTC connection including the peer connection and data\n     * channel.\n     */\n    get connectionState() {\n        return this.#state;\n    }\n    /**\n     * Whether the session is muted.\n     */\n    get muted() {\n        return this.#muted;\n    }\n    /**\n     * Connect to the Realtime API. This will establish the connection to the OpenAI Realtime API\n     * via WebRTC.\n     *\n     * If you are using a browser, the transport layer will also automatically configure the\n     * microphone and audio output to be used by the session.\n     *\n     * @param options - The options for the connection.\n     */\n    async connect(options) {\n        if (this.#state.status === 'connected') {\n            return;\n        }\n        if (this.#state.status === 'connecting') {\n            _logger_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].warn('Realtime connection already in progress. Please await original promise');\n        }\n        const model = options.model ?? this.currentModel;\n        this.currentModel = model;\n        const baseUrl = options.url ?? this.#url;\n        const apiKey = await this._getApiKey(options);\n        const isClientKey = typeof apiKey === 'string' && apiKey.startsWith('ek_');\n        if ((0,_openai_agents_core_shims__WEBPACK_IMPORTED_MODULE_0__.isBrowserEnvironment)() && !this.#useInsecureApiKey && !isClientKey) {\n            throw new _openai_agents_core__WEBPACK_IMPORTED_MODULE_1__.UserError('Using the WebRTC connection in a browser environment requires an insecure API key. Please use a WebSocket connection instead or set the useInsecureApiKey option to true.');\n        }\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise(async (resolve, reject) => {\n            try {\n                const userSessionConfig = {\n                    ...(options.initialSessionConfig || {}),\n                    model: this.currentModel,\n                };\n                const connectionUrl = new URL(baseUrl);\n                let peerConnection = new RTCPeerConnection();\n                const dataChannel = peerConnection.createDataChannel('oai-events');\n                this.#state = {\n                    status: 'connecting',\n                    peerConnection,\n                    dataChannel,\n                };\n                this.emit('connection_change', this.#state.status);\n                dataChannel.addEventListener('open', () => {\n                    this.#state = {\n                        status: 'connected',\n                        peerConnection,\n                        dataChannel,\n                    };\n                    // Sending the session config again here once the channel is connected to ensure\n                    // that the session config is sent to the server before the first response is received\n                    // Setting it on connection should work but the config is not being validated on the\n                    // server. This triggers a validation error if the config is not valid.\n                    this.updateSessionConfig(userSessionConfig);\n                    this.emit('connection_change', this.#state.status);\n                    this._onOpen();\n                    resolve();\n                });\n                dataChannel.addEventListener('error', (event) => {\n                    this.close();\n                    this._onError(event);\n                    reject(event);\n                });\n                dataChannel.addEventListener('message', (event) => {\n                    this._onMessage(event);\n                    const { data: parsed, isGeneric } = (0,_openaiRealtimeEvents_mjs__WEBPACK_IMPORTED_MODULE_4__.parseRealtimeEvent)(event);\n                    if (!parsed || isGeneric) {\n                        return;\n                    }\n                    if (parsed.type === 'response.created') {\n                        this.#ongoingResponse = true;\n                    }\n                    else if (parsed.type === 'response.done') {\n                        this.#ongoingResponse = false;\n                    }\n                    if (parsed.type === 'session.created') {\n                        this._tracingConfig = parsed.session.tracing;\n                        // Trying to turn on tracing after the session is created\n                        this._updateTracingConfig(userSessionConfig.tracing ?? 'auto');\n                    }\n                });\n                // set up audio playback\n                const audioElement = this.options.audioElement ?? document.createElement('audio');\n                audioElement.autoplay = true;\n                peerConnection.ontrack = (event) => {\n                    audioElement.srcObject = event.streams[0];\n                };\n                // get microphone stream\n                const stream = this.options.mediaStream ??\n                    (await navigator.mediaDevices.getUserMedia({\n                        audio: true,\n                    }));\n                peerConnection.addTrack(stream.getAudioTracks()[0]);\n                if (this.options.changePeerConnection) {\n                    peerConnection =\n                        await this.options.changePeerConnection(peerConnection);\n                    this.#state = { ...this.#state, peerConnection };\n                }\n                const offer = await peerConnection.createOffer();\n                await peerConnection.setLocalDescription(offer);\n                if (!offer.sdp) {\n                    throw new Error('Failed to create offer');\n                }\n                const sessionConfig = {\n                    ...this._getMergedSessionConfig(userSessionConfig),\n                    model: this.currentModel,\n                };\n                const data = new FormData();\n                data.append('sdp', offer.sdp);\n                data.append('session', JSON.stringify(sessionConfig));\n                const sdpResponse = await fetch(connectionUrl, {\n                    method: 'POST',\n                    body: data,\n                    headers: {\n                        Authorization: `Bearer ${apiKey}`,\n                        'X-OpenAI-Agents-SDK': _utils_mjs__WEBPACK_IMPORTED_MODULE_5__.HEADERS['X-OpenAI-Agents-SDK'],\n                    },\n                });\n                const answer = {\n                    type: 'answer',\n                    sdp: await sdpResponse.text(),\n                };\n                await peerConnection.setRemoteDescription(answer);\n            }\n            catch (error) {\n                this.close();\n                this._onError(error);\n                reject(error);\n            }\n        });\n    }\n    /**\n     * Send an event to the Realtime API. This will stringify the event and send it directly to the\n     * API. This can be used if you want to take control over the connection and send events manually.\n     *\n     * @param event - The event to send.\n     */\n    sendEvent(event) {\n        if (!this.#state.dataChannel ||\n            this.#state.dataChannel.readyState !== 'open') {\n            throw new Error('WebRTC data channel is not connected. Make sure you call `connect()` before sending events.');\n        }\n        this.#state.dataChannel.send(JSON.stringify(event));\n    }\n    /**\n     * Mute or unmute the session.\n     * @param muted - Whether to mute the session.\n     */\n    mute(muted) {\n        this.#muted = muted;\n        if (this.#state.peerConnection) {\n            const peerConnection = this.#state.peerConnection;\n            peerConnection.getSenders().forEach((sender) => {\n                if (sender.track) {\n                    sender.track.enabled = !muted;\n                }\n            });\n        }\n    }\n    /**\n     * Close the connection to the Realtime API and disconnects the underlying WebRTC connection.\n     */\n    close() {\n        if (this.#state.dataChannel) {\n            this.#state.dataChannel.close();\n        }\n        if (this.#state.peerConnection) {\n            const peerConnection = this.#state.peerConnection;\n            peerConnection.getSenders().forEach((sender) => {\n                sender.track?.stop();\n            });\n            peerConnection.close();\n        }\n        if (this.#state.status !== 'disconnected') {\n            this.#state = {\n                status: 'disconnected',\n                peerConnection: undefined,\n                dataChannel: undefined,\n            };\n            this.emit('connection_change', this.#state.status);\n            this._onClose();\n        }\n    }\n    /**\n     * Interrupt the current response if one is ongoing and clear the audio buffer so that the agent\n     * stops talking.\n     */\n    interrupt() {\n        if (this.#ongoingResponse) {\n            this.sendEvent({\n                type: 'response.cancel',\n            });\n            this.#ongoingResponse = false;\n        }\n        this.sendEvent({\n            type: 'output_audio_buffer.clear',\n        });\n    }\n}\n//# sourceMappingURL=openaiRealtimeWebRtc.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L29wZW5haVJlYWx0aW1lV2ViUnRjLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDa0U7QUFDbEI7QUFDZDtBQUM2QjtBQUNDO0FBQzFCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxtQ0FBbUMsdUVBQWtCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1EQUFNO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0VBQW9CO0FBQ2hDLHNCQUFzQiwwREFBUztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSw0QkFBNEIsMEJBQTBCLEVBQUUsNkVBQWtCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxPQUFPO0FBQ3hELCtDQUErQywrQ0FBTztBQUN0RCxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL3l1d2FuZy9wcm9qZWN0cy9vcGVuYWktcmVhbHRpbWUtYWdlbnRzL25vZGVfbW9kdWxlcy8ucG5wbS9Ab3BlbmFpK2FnZW50cy1yZWFsdGltZUAwLjAuNV96b2RAMy4yNS43Ni9ub2RlX21vZHVsZXMvQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvZGlzdC9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgbGliPVwiZG9tXCIgLz5cbmltcG9ydCB7IGlzQnJvd3NlckVudmlyb25tZW50IH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbmltcG9ydCB7IEhFQURFUlMgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbi8qKlxuICogVHJhbnNwb3J0IGxheWVyIHRoYXQncyBoYW5kbGluZyB0aGUgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIE9wZW5BSSdzIFJlYWx0aW1lIEFQSVxuICogdmlhIFdlYlJUQy4gV2hpbGUgdGhpcyB0cmFuc3BvcnQgbGF5ZXIgaXMgZGVzaWduZWQgdG8gYmUgdXNlZCB3aXRoaW4gYSBSZWFsdGltZVNlc3Npb24sIGl0IGNhblxuICogYWxzbyBiZSB1c2VkIHN0YW5kYWxvbmUgaWYgeW91IHdhbnQgdG8gaGF2ZSBhIGRpcmVjdCBjb25uZWN0aW9uIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gKlxuICogVW5sZXNzIHlvdSBzcGVjaWZ5IGEgYG1lZGlhU3RyZWFtYCBvciBgYXVkaW9FbGVtZW50YCBvcHRpb24sIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbFxuICogYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlIG1pY3JvcGhvbmUgYW5kIGF1ZGlvIG91dHB1dCB0byBiZSB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVXZWJSVEMgZXh0ZW5kcyBPcGVuQUlSZWFsdGltZUJhc2Uge1xuICAgIG9wdGlvbnM7XG4gICAgI3VybDtcbiAgICAjc3RhdGUgPSB7XG4gICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgIHBlZXJDb25uZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgIGRhdGFDaGFubmVsOiB1bmRlZmluZWQsXG4gICAgfTtcbiAgICAjdXNlSW5zZWN1cmVBcGlLZXk7XG4gICAgI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICNtdXRlZCA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAodHlwZW9mIFJUQ1BlZXJDb25uZWN0aW9uID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJSVEMgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuI3VybCA9IG9wdGlvbnMuYmFzZVVybCA/PyBgaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9yZWFsdGltZWA7XG4gICAgICAgIHRoaXMuI3VzZUluc2VjdXJlQXBpS2V5ID0gb3B0aW9ucy51c2VJbnNlY3VyZUFwaUtleSA/PyBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgc3RhdHVzIG9mIHRoZSBXZWJSVEMgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGUuc3RhdHVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBjb25uZWN0aW9uIHN0YXRlIG9mIHRoZSBXZWJSVEMgY29ubmVjdGlvbiBpbmNsdWRpbmcgdGhlIHBlZXIgY29ubmVjdGlvbiBhbmQgZGF0YVxuICAgICAqIGNoYW5uZWwuXG4gICAgICovXG4gICAgZ2V0IGNvbm5lY3Rpb25TdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBzZXNzaW9uIGlzIG11dGVkLlxuICAgICAqL1xuICAgIGdldCBtdXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI211dGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBlc3RhYmxpc2ggdGhlIGNvbm5lY3Rpb24gdG8gdGhlIE9wZW5BSSBSZWFsdGltZSBBUElcbiAgICAgKiB2aWEgV2ViUlRDLlxuICAgICAqXG4gICAgICogSWYgeW91IGFyZSB1c2luZyBhIGJyb3dzZXIsIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbCBhbHNvIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZVxuICAgICAqIG1pY3JvcGhvbmUgYW5kIGF1ZGlvIG91dHB1dCB0byBiZSB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RpbmcnKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignUmVhbHRpbWUgY29ubmVjdGlvbiBhbHJlYWR5IGluIHByb2dyZXNzLiBQbGVhc2UgYXdhaXQgb3JpZ2luYWwgcHJvbWlzZScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1vZGVsID0gb3B0aW9ucy5tb2RlbCA/PyB0aGlzLmN1cnJlbnRNb2RlbDtcbiAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtb2RlbDtcbiAgICAgICAgY29uc3QgYmFzZVVybCA9IG9wdGlvbnMudXJsID8/IHRoaXMuI3VybDtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gYXdhaXQgdGhpcy5fZ2V0QXBpS2V5KG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBpc0NsaWVudEtleSA9IHR5cGVvZiBhcGlLZXkgPT09ICdzdHJpbmcnICYmIGFwaUtleS5zdGFydHNXaXRoKCdla18nKTtcbiAgICAgICAgaWYgKGlzQnJvd3NlckVudmlyb25tZW50KCkgJiYgIXRoaXMuI3VzZUluc2VjdXJlQXBpS2V5ICYmICFpc0NsaWVudEtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignVXNpbmcgdGhlIFdlYlJUQyBjb25uZWN0aW9uIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudCByZXF1aXJlcyBhbiBpbnNlY3VyZSBBUEkga2V5LiBQbGVhc2UgdXNlIGEgV2ViU29ja2V0IGNvbm5lY3Rpb24gaW5zdGVhZCBvciBzZXQgdGhlIHVzZUluc2VjdXJlQXBpS2V5IG9wdGlvbiB0byB0cnVlLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hc3luYy1wcm9taXNlLWV4ZWN1dG9yXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJTZXNzaW9uQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi4ob3B0aW9ucy5pbml0aWFsU2Vzc2lvbkNvbmZpZyB8fCB7fSksXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLmN1cnJlbnRNb2RlbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb25VcmwgPSBuZXcgVVJMKGJhc2VVcmwpO1xuICAgICAgICAgICAgICAgIGxldCBwZWVyQ29ubmVjdGlvbiA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFDaGFubmVsID0gcGVlckNvbm5lY3Rpb24uY3JlYXRlRGF0YUNoYW5uZWwoJ29haS1ldmVudHMnKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGluZycsXG4gICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIC8vIFNlbmRpbmcgdGhlIHNlc3Npb24gY29uZmlnIGFnYWluIGhlcmUgb25jZSB0aGUgY2hhbm5lbCBpcyBjb25uZWN0ZWQgdG8gZW5zdXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoYXQgdGhlIHNlc3Npb24gY29uZmlnIGlzIHNlbnQgdG8gdGhlIHNlcnZlciBiZWZvcmUgdGhlIGZpcnN0IHJlc3BvbnNlIGlzIHJlY2VpdmVkXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldHRpbmcgaXQgb24gY29ubmVjdGlvbiBzaG91bGQgd29yayBidXQgdGhlIGNvbmZpZyBpcyBub3QgYmVpbmcgdmFsaWRhdGVkIG9uIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBzZXJ2ZXIuIFRoaXMgdHJpZ2dlcnMgYSB2YWxpZGF0aW9uIGVycm9yIGlmIHRoZSBjb25maWcgaXMgbm90IHZhbGlkLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlc3Npb25Db25maWcodXNlclNlc3Npb25Db25maWcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25PcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25NZXNzYWdlKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBwYXJzZWQsIGlzR2VuZXJpYyB9ID0gcGFyc2VSZWFsdGltZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZWQgfHwgaXNHZW5lcmljKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5kb25lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnc2Vzc2lvbi5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJhY2luZ0NvbmZpZyA9IHBhcnNlZC5zZXNzaW9uLnRyYWNpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUcnlpbmcgdG8gdHVybiBvbiB0cmFjaW5nIGFmdGVyIHRoZSBzZXNzaW9uIGlzIGNyZWF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRyYWNpbmdDb25maWcodXNlclNlc3Npb25Db25maWcudHJhY2luZyA/PyAnYXV0bycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gc2V0IHVwIGF1ZGlvIHBsYXliYWNrXG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9FbGVtZW50ID0gdGhpcy5vcHRpb25zLmF1ZGlvRWxlbWVudCA/PyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xuICAgICAgICAgICAgICAgIGF1ZGlvRWxlbWVudC5hdXRvcGxheSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24ub250cmFjayA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnQuc3JjT2JqZWN0ID0gZXZlbnQuc3RyZWFtc1swXTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIGdldCBtaWNyb3Bob25lIHN0cmVhbVxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMub3B0aW9ucy5tZWRpYVN0cmVhbSA/P1xuICAgICAgICAgICAgICAgICAgICAoYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5hZGRUcmFjayhzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jaGFuZ2VQZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9wdGlvbnMuY2hhbmdlUGVlckNvbm5lY3Rpb24ocGVlckNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHsgLi4udGhpcy4jc3RhdGUsIHBlZXJDb25uZWN0aW9uIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG9mZmVyID0gYXdhaXQgcGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIoKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKG9mZmVyKTtcbiAgICAgICAgICAgICAgICBpZiAoIW9mZmVyLnNkcCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgb2ZmZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5fZ2V0TWVyZ2VkU2Vzc2lvbkNvbmZpZyh1c2VyU2Vzc2lvbkNvbmZpZyksXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLmN1cnJlbnRNb2RlbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgICAgICBkYXRhLmFwcGVuZCgnc2RwJywgb2ZmZXIuc2RwKTtcbiAgICAgICAgICAgICAgICBkYXRhLmFwcGVuZCgnc2Vzc2lvbicsIEpTT04uc3RyaW5naWZ5KHNlc3Npb25Db25maWcpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZHBSZXNwb25zZSA9IGF3YWl0IGZldGNoKGNvbm5lY3Rpb25VcmwsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthcGlLZXl9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdYLU9wZW5BSS1BZ2VudHMtU0RLJzogSEVBREVSU1snWC1PcGVuQUktQWdlbnRzLVNESyddLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuc3dlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Fuc3dlcicsXG4gICAgICAgICAgICAgICAgICAgIHNkcDogYXdhaXQgc2RwUmVzcG9uc2UudGV4dCgpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYXdhaXQgcGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24oYW5zd2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBldmVudCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgc3RyaW5naWZ5IHRoZSBldmVudCBhbmQgc2VuZCBpdCBkaXJlY3RseSB0byB0aGVcbiAgICAgKiBBUEkuIFRoaXMgY2FuIGJlIHVzZWQgaWYgeW91IHdhbnQgdG8gdGFrZSBjb250cm9sIG92ZXIgdGhlIGNvbm5lY3Rpb24gYW5kIHNlbmQgZXZlbnRzIG1hbnVhbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwgfHxcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsLnJlYWR5U3RhdGUgIT09ICdvcGVuJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJSVEMgZGF0YSBjaGFubmVsIGlzIG5vdCBjb25uZWN0ZWQuIE1ha2Ugc3VyZSB5b3UgY2FsbCBgY29ubmVjdCgpYCBiZWZvcmUgc2VuZGluZyBldmVudHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwuc2VuZChKU09OLnN0cmluZ2lmeShldmVudCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNdXRlIG9yIHVubXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbXV0ZWQgLSBXaGV0aGVyIHRvIG11dGUgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgbXV0ZShtdXRlZCkge1xuICAgICAgICB0aGlzLiNtdXRlZCA9IG11dGVkO1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHBlZXJDb25uZWN0aW9uID0gdGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb247XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZm9yRWFjaCgoc2VuZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbmRlci50cmFjaykge1xuICAgICAgICAgICAgICAgICAgICBzZW5kZXIudHJhY2suZW5hYmxlZCA9ICFtdXRlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZSB0aGUgY29ubmVjdGlvbiB0byB0aGUgUmVhbHRpbWUgQVBJIGFuZCBkaXNjb25uZWN0cyB0aGUgdW5kZXJseWluZyBXZWJSVEMgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsKSB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbC5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgY29uc3QgcGVlckNvbm5lY3Rpb24gPSB0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbjtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKS5mb3JFYWNoKChzZW5kZXIpID0+IHtcbiAgICAgICAgICAgICAgICBzZW5kZXIudHJhY2s/LnN0b3AoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzICE9PSAnZGlzY29ubmVjdGVkJykge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLl9vbkNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBjdXJyZW50IHJlc3BvbnNlIGlmIG9uZSBpcyBvbmdvaW5nIGFuZCBjbGVhciB0aGUgYXVkaW8gYnVmZmVyIHNvIHRoYXQgdGhlIGFnZW50XG4gICAgICogc3RvcHMgdGFsa2luZy5cbiAgICAgKi9cbiAgICBpbnRlcnJ1cHQoKSB7XG4gICAgICAgIGlmICh0aGlzLiNvbmdvaW5nUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY2FuY2VsJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ291dHB1dF9hdWRpb19idWZmZXIuY2xlYXInLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebRtc.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebsocket.mjs":
/*!************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebsocket.mjs ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpenAIRealtimeWebSocket: () => (/* binding */ OpenAIRealtimeWebSocket)\n/* harmony export */ });\n/* harmony import */ var _openai_agents_realtime_shims__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/agents-realtime/_shims */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/shims/shims-node.mjs\");\n/* harmony import */ var _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./openaiRealtimeBase.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeBase.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/utils.mjs\");\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-core@0.0.5_ws@8.18.3_zod@3.25.76/node_modules/@openai/agents-core/dist/index.mjs\");\n/* harmony import */ var _openaiRealtimeEvents_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./openaiRealtimeEvents.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeEvents.mjs\");\n\n\n\n\n\n/**\n * Transport layer that's handling the connection between the client and OpenAI's Realtime API\n * via WebSockets. While this transport layer is designed to be used within a RealtimeSession, it\n * can also be used standalone if you want to have a direct connection to the Realtime API.\n */\nclass OpenAIRealtimeWebSocket extends _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_1__.OpenAIRealtimeBase {\n    #apiKey;\n    #url;\n    #state = {\n        status: 'disconnected',\n        websocket: undefined,\n    };\n    #useInsecureApiKey;\n    #currentItemId;\n    #currentAudioContentIndex;\n    /**\n     * Timestamp maintained by the transport layer to aid with the calculation of the elapsed time\n     * since the response started to compute the right interruption time.\n     *\n     * Mostly internal but might be used by extended transport layers for their interruption\n     * calculation.\n     */\n    _firstAudioTimestamp;\n    _audioLengthMs = 0;\n    #ongoingResponse = false;\n    constructor(options = {}) {\n        super(options);\n        this.#url = `wss://api.openai.com/v1/realtime?model=${this.currentModel}`;\n        this.#useInsecureApiKey = options.useInsecureApiKey ?? false;\n    }\n    /**\n     * The current status of the WebSocket connection.\n     */\n    get status() {\n        return this.#state.status;\n    }\n    /**\n     * The current connection state of the WebSocket connection.\n     */\n    get connectionState() {\n        return this.#state;\n    }\n    /**\n     * Always returns `null` as the WebSocket transport layer does not handle muting. Instead,\n     * this should be handled by the client by not triggering the `sendAudio` method.\n     */\n    get muted() {\n        return null;\n    }\n    /**\n     * The current item ID of the ongoing response.\n     */\n    get currentItemId() {\n        return this.#currentItemId;\n    }\n    /**\n     * Triggers the `audio` event that a client might listen to to receive the audio buffer.\n     * Protected for you to be able to override and disable emitting this event in case your extended\n     * transport layer handles audio internally.\n     *\n     * @param audioEvent - The audio event to emit.\n     */\n    _onAudio(audioEvent) {\n        this.emit('audio', audioEvent);\n    }\n    #setupWebSocket(resolve, reject, sessionConfig) {\n        if (this.#state.websocket) {\n            resolve();\n            return;\n        }\n        if (!this.#apiKey) {\n            throw new _openai_agents_core__WEBPACK_IMPORTED_MODULE_3__.UserError('API key is not set. Please call `connect()` with an API key first.');\n        }\n        if ((0,_openai_agents_realtime_shims__WEBPACK_IMPORTED_MODULE_0__.isBrowserEnvironment)() &&\n            !this.#apiKey.startsWith('ek_') &&\n            !this.#useInsecureApiKey) {\n            throw new _openai_agents_core__WEBPACK_IMPORTED_MODULE_3__.UserError('Using the WebSocket connection in a browser environment requires an ephemeral client key. If you have to use a regular API key, set the `useInsecureApiKey` option to true.');\n        }\n        const websocketArguments = (0,_openai_agents_realtime_shims__WEBPACK_IMPORTED_MODULE_0__.isBrowserEnvironment)()\n            ? [\n                'realtime',\n                // Auth\n                'openai-insecure-api-key.' + this.#apiKey,\n                // Beta protocol, required\n                'openai-beta.realtime-v1',\n                // Version header\n                _utils_mjs__WEBPACK_IMPORTED_MODULE_2__.WEBSOCKET_META,\n            ]\n            : {\n                headers: {\n                    Authorization: `Bearer ${this.#apiKey}`,\n                    'OpenAI-Beta': 'realtime=v1',\n                    ..._utils_mjs__WEBPACK_IMPORTED_MODULE_2__.HEADERS,\n                },\n            };\n        const ws = new _openai_agents_realtime_shims__WEBPACK_IMPORTED_MODULE_0__.WebSocket(this.#url, websocketArguments);\n        this.#state = {\n            status: 'connecting',\n            websocket: ws,\n        };\n        this.emit('connection_change', this.#state.status);\n        ws.addEventListener('open', () => {\n            this.#state = {\n                status: 'connected',\n                websocket: ws,\n            };\n            this.emit('connection_change', this.#state.status);\n            this._onOpen();\n            resolve();\n        });\n        ws.addEventListener('error', (error) => {\n            this._onError(error);\n            this.#state = {\n                status: 'disconnected',\n                websocket: undefined,\n            };\n            this.emit('connection_change', this.#state.status);\n            reject(error);\n        });\n        ws.addEventListener('message', (message) => {\n            this._onMessage(message);\n            const { data: parsed, isGeneric } = (0,_openaiRealtimeEvents_mjs__WEBPACK_IMPORTED_MODULE_4__.parseRealtimeEvent)(message);\n            if (!parsed || isGeneric) {\n                return;\n            }\n            if (parsed.type === 'response.audio.delta') {\n                this.#currentAudioContentIndex = parsed.content_index;\n                this.#currentItemId = parsed.item_id;\n                if (this._firstAudioTimestamp === undefined) {\n                    // If the response start timestamp is not set, we set it to the current time.\n                    // This is used to calculate the elapsed time for interruption.\n                    this._firstAudioTimestamp = Date.now();\n                    this._audioLengthMs = 0;\n                }\n                const buff = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.base64ToArrayBuffer)(parsed.delta);\n                // calculate the audio length in milliseconds assuming 24kHz pcm16le\n                this._audioLengthMs += buff.byteLength / 24 / 2; // 24kHz * 2 bytes per sample\n                const audioEvent = {\n                    type: 'audio',\n                    data: buff,\n                    responseId: parsed.response_id,\n                };\n                this._onAudio(audioEvent);\n            }\n            else if (parsed.type === 'input_audio_buffer.speech_started') {\n                this.interrupt();\n            }\n            else if (parsed.type === 'response.created') {\n                this.#ongoingResponse = true;\n            }\n            else if (parsed.type === 'response.done') {\n                this.#ongoingResponse = false;\n            }\n            else if (parsed.type === 'session.created') {\n                this._tracingConfig = parsed.session.tracing;\n                // Trying to turn on tracing after the session is created\n                this._updateTracingConfig(sessionConfig.tracing ?? 'auto');\n            }\n        });\n        ws.addEventListener('close', () => {\n            this.#state = {\n                status: 'disconnected',\n                websocket: undefined,\n            };\n            this.emit('connection_change', this.#state.status);\n            this._onClose();\n        });\n    }\n    async connect(options) {\n        const model = options.model ?? this.currentModel;\n        this.currentModel = model;\n        this.#apiKey = await this._getApiKey(options);\n        this.#url =\n            options.url ??\n                `wss://api.openai.com/v1/realtime?model=${this.currentModel}`;\n        const sessionConfig = {\n            ...(options.initialSessionConfig || {}),\n            model: this.currentModel,\n        };\n        await new Promise((resolve, reject) => {\n            try {\n                this.#setupWebSocket(resolve, reject, sessionConfig);\n            }\n            catch (error) {\n                reject(error);\n            }\n        });\n        await this.updateSessionConfig(sessionConfig);\n    }\n    /**\n     * Send an event to the Realtime API. This will stringify the event and send it directly to the\n     * API. This can be used if you want to take control over the connection and send events manually.\n     *\n     * @param event - The event to send.\n     */\n    sendEvent(event) {\n        if (!this.#state.websocket) {\n            throw new Error('WebSocket is not connected. Make sure you call `connect()` before sending events.');\n        }\n        this.#state.websocket.send(JSON.stringify(event));\n    }\n    /**\n     * Close the WebSocket connection.\n     *\n     * This will also reset any internal connection tracking used for interruption handling.\n     */\n    close() {\n        this.#state.websocket?.close();\n        this.#currentItemId = undefined;\n        this._firstAudioTimestamp = undefined;\n        this._audioLengthMs = 0;\n        this.#currentAudioContentIndex = undefined;\n    }\n    /**\n     * Will throw an error as the WebSocket transport layer does not support muting.\n     */\n    mute(_muted) {\n        throw new Error('Mute is not supported for the WebSocket transport. You have to mute the audio input yourself.');\n    }\n    /**\n     * Send an audio buffer to the Realtime API. This is used for your client to send audio to the\n     * model to respond.\n     *\n     * @param audio - The audio buffer to send.\n     * @param options - The options for the audio buffer.\n     */\n    sendAudio(audio, options = {}) {\n        if (this.#state.status === 'connected') {\n            super.sendAudio(audio, options);\n        }\n    }\n    /**\n     * Send a cancel response event to the Realtime API. This is used to cancel an ongoing\n     *  response that the model is currently generating.\n     */\n    _cancelResponse() {\n        // cancel the ongoing response\n        if (this.#ongoingResponse) {\n            this.sendEvent({\n                type: 'response.cancel',\n            });\n            this.#ongoingResponse = false;\n        }\n    }\n    /**\n     * Do NOT call this method directly. Call `interrupt()` instead for proper interruption handling.\n     *\n     * This method is used to send the right events to the API to inform the model that the user has\n     * interrupted the response. It might be overridden/extended by an extended transport layer. See\n     * the `TwilioRealtimeTransportLayer` for an example.\n     *\n     * @param elapsedTime - The elapsed time since the response started.\n     */\n    _interrupt(elapsedTime) {\n        // immediately emit this event so the client can stop playing audio\n        this.emit('audio_interrupted');\n        this.sendEvent({\n            type: 'conversation.item.truncate',\n            item_id: this.#currentItemId,\n            content_index: this.#currentAudioContentIndex,\n            audio_end_ms: elapsedTime,\n        });\n    }\n    /**\n     * Interrupt the ongoing response. This method is triggered automatically by the client when\n     * voice activity detection (VAD) is enabled (default) as well as when an output guardrail got\n     * triggered.\n     *\n     * You can also call this method directly if you want to interrupt the conversation for example\n     * based on an event in the client.\n     */\n    interrupt() {\n        if (!this.#currentItemId || typeof this._firstAudioTimestamp !== 'number') {\n            return;\n        }\n        this._cancelResponse();\n        const elapsedTime = Date.now() - this._firstAudioTimestamp;\n        if (elapsedTime >= 0 && elapsedTime < this._audioLengthMs) {\n            this._interrupt(elapsedTime);\n        }\n        this.#currentItemId = undefined;\n        this._firstAudioTimestamp = undefined;\n        this._audioLengthMs = 0;\n        this.#currentAudioContentIndex = undefined;\n    }\n}\n//# sourceMappingURL=openaiRealtimeWebsocket.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0Y7QUFDbkI7QUFDWTtBQUMzQjtBQUNnQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sc0NBQXNDLHVFQUFrQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBLDhEQUE4RCxrQkFBa0I7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMERBQVM7QUFDL0I7QUFDQSxZQUFZLG1GQUFvQjtBQUNoQztBQUNBO0FBQ0Esc0JBQXNCLDBEQUFTO0FBQy9CO0FBQ0EsbUNBQW1DLG1GQUFvQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzREFBYztBQUM5QjtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsYUFBYTtBQUMxRDtBQUNBLHVCQUF1QiwrQ0FBTztBQUM5QixpQkFBaUI7QUFDakI7QUFDQSx1QkFBdUIsb0VBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esb0JBQW9CLDBCQUEwQixFQUFFLDZFQUFrQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsK0RBQW1CO0FBQ2hEO0FBQ0EsaUVBQWlFO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxrQkFBa0I7QUFDNUU7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMveXV3YW5nL3Byb2plY3RzL29wZW5haS1yZWFsdGltZS1hZ2VudHMvbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0Jyb3dzZXJFbnZpcm9ubWVudCwgV2ViU29ja2V0LCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL19zaGltcyc7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZUJhc2UsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qc1wiO1xuaW1wb3J0IHsgYmFzZTY0VG9BcnJheUJ1ZmZlciwgSEVBREVSUywgV0VCU09DS0VUX01FVEEgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgcGFyc2VSZWFsdGltZUV2ZW50IH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzXCI7XG4vKipcbiAqIFRyYW5zcG9ydCBsYXllciB0aGF0J3MgaGFuZGxpbmcgdGhlIGNvbm5lY3Rpb24gYmV0d2VlbiB0aGUgY2xpZW50IGFuZCBPcGVuQUkncyBSZWFsdGltZSBBUElcbiAqIHZpYSBXZWJTb2NrZXRzLiBXaGlsZSB0aGlzIHRyYW5zcG9ydCBsYXllciBpcyBkZXNpZ25lZCB0byBiZSB1c2VkIHdpdGhpbiBhIFJlYWx0aW1lU2Vzc2lvbiwgaXRcbiAqIGNhbiBhbHNvIGJlIHVzZWQgc3RhbmRhbG9uZSBpZiB5b3Ugd2FudCB0byBoYXZlIGEgZGlyZWN0IGNvbm5lY3Rpb24gdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAqL1xuZXhwb3J0IGNsYXNzIE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IGV4dGVuZHMgT3BlbkFJUmVhbHRpbWVCYXNlIHtcbiAgICAjYXBpS2V5O1xuICAgICN1cmw7XG4gICAgI3N0YXRlID0ge1xuICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICB3ZWJzb2NrZXQ6IHVuZGVmaW5lZCxcbiAgICB9O1xuICAgICN1c2VJbnNlY3VyZUFwaUtleTtcbiAgICAjY3VycmVudEl0ZW1JZDtcbiAgICAjY3VycmVudEF1ZGlvQ29udGVudEluZGV4O1xuICAgIC8qKlxuICAgICAqIFRpbWVzdGFtcCBtYWludGFpbmVkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIgdG8gYWlkIHdpdGggdGhlIGNhbGN1bGF0aW9uIG9mIHRoZSBlbGFwc2VkIHRpbWVcbiAgICAgKiBzaW5jZSB0aGUgcmVzcG9uc2Ugc3RhcnRlZCB0byBjb21wdXRlIHRoZSByaWdodCBpbnRlcnJ1cHRpb24gdGltZS5cbiAgICAgKlxuICAgICAqIE1vc3RseSBpbnRlcm5hbCBidXQgbWlnaHQgYmUgdXNlZCBieSBleHRlbmRlZCB0cmFuc3BvcnQgbGF5ZXJzIGZvciB0aGVpciBpbnRlcnJ1cHRpb25cbiAgICAgKiBjYWxjdWxhdGlvbi5cbiAgICAgKi9cbiAgICBfZmlyc3RBdWRpb1RpbWVzdGFtcDtcbiAgICBfYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy4jdXJsID0gYHdzczovL2FwaS5vcGVuYWkuY29tL3YxL3JlYWx0aW1lP21vZGVsPSR7dGhpcy5jdXJyZW50TW9kZWx9YDtcbiAgICAgICAgdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgPSBvcHRpb25zLnVzZUluc2VjdXJlQXBpS2V5ID8/IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBzdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZS5zdGF0dXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbm5lY3Rpb24gc3RhdGUgb2YgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBjb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWx3YXlzIHJldHVybnMgYG51bGxgIGFzIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90IGhhbmRsZSBtdXRpbmcuIEluc3RlYWQsXG4gICAgICogdGhpcyBzaG91bGQgYmUgaGFuZGxlZCBieSB0aGUgY2xpZW50IGJ5IG5vdCB0cmlnZ2VyaW5nIHRoZSBgc2VuZEF1ZGlvYCBtZXRob2QuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgaXRlbSBJRCBvZiB0aGUgb25nb2luZyByZXNwb25zZS5cbiAgICAgKi9cbiAgICBnZXQgY3VycmVudEl0ZW1JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRJdGVtSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJzIHRoZSBgYXVkaW9gIGV2ZW50IHRoYXQgYSBjbGllbnQgbWlnaHQgbGlzdGVuIHRvIHRvIHJlY2VpdmUgdGhlIGF1ZGlvIGJ1ZmZlci5cbiAgICAgKiBQcm90ZWN0ZWQgZm9yIHlvdSB0byBiZSBhYmxlIHRvIG92ZXJyaWRlIGFuZCBkaXNhYmxlIGVtaXR0aW5nIHRoaXMgZXZlbnQgaW4gY2FzZSB5b3VyIGV4dGVuZGVkXG4gICAgICogdHJhbnNwb3J0IGxheWVyIGhhbmRsZXMgYXVkaW8gaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdWRpb0V2ZW50IC0gVGhlIGF1ZGlvIGV2ZW50IHRvIGVtaXQuXG4gICAgICovXG4gICAgX29uQXVkaW8oYXVkaW9FdmVudCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvJywgYXVkaW9FdmVudCk7XG4gICAgfVxuICAgICNzZXR1cFdlYlNvY2tldChyZXNvbHZlLCByZWplY3QsIHNlc3Npb25Db25maWcpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLndlYnNvY2tldCkge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy4jYXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdBUEkga2V5IGlzIG5vdCBzZXQuIFBsZWFzZSBjYWxsIGBjb25uZWN0KClgIHdpdGggYW4gQVBJIGtleSBmaXJzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNCcm93c2VyRW52aXJvbm1lbnQoKSAmJlxuICAgICAgICAgICAgIXRoaXMuI2FwaUtleS5zdGFydHNXaXRoKCdla18nKSAmJlxuICAgICAgICAgICAgIXRoaXMuI3VzZUluc2VjdXJlQXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdVc2luZyB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24gaW4gYSBicm93c2VyIGVudmlyb25tZW50IHJlcXVpcmVzIGFuIGVwaGVtZXJhbCBjbGllbnQga2V5LiBJZiB5b3UgaGF2ZSB0byB1c2UgYSByZWd1bGFyIEFQSSBrZXksIHNldCB0aGUgYHVzZUluc2VjdXJlQXBpS2V5YCBvcHRpb24gdG8gdHJ1ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3ZWJzb2NrZXRBcmd1bWVudHMgPSBpc0Jyb3dzZXJFbnZpcm9ubWVudCgpXG4gICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICAncmVhbHRpbWUnLFxuICAgICAgICAgICAgICAgIC8vIEF1dGhcbiAgICAgICAgICAgICAgICAnb3BlbmFpLWluc2VjdXJlLWFwaS1rZXkuJyArIHRoaXMuI2FwaUtleSxcbiAgICAgICAgICAgICAgICAvLyBCZXRhIHByb3RvY29sLCByZXF1aXJlZFxuICAgICAgICAgICAgICAgICdvcGVuYWktYmV0YS5yZWFsdGltZS12MScsXG4gICAgICAgICAgICAgICAgLy8gVmVyc2lvbiBoZWFkZXJcbiAgICAgICAgICAgICAgICBXRUJTT0NLRVRfTUVUQSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuI2FwaUtleX1gLFxuICAgICAgICAgICAgICAgICAgICAnT3BlbkFJLUJldGEnOiAncmVhbHRpbWU9djEnLFxuICAgICAgICAgICAgICAgICAgICAuLi5IRUFERVJTLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICBjb25zdCB3cyA9IG5ldyBXZWJTb2NrZXQodGhpcy4jdXJsLCB3ZWJzb2NrZXRBcmd1bWVudHMpO1xuICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RpbmcnLFxuICAgICAgICAgICAgd2Vic29ja2V0OiB3cyxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHdlYnNvY2tldDogd3MsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLl9vbk9wZW4oKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9vbk1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IHBhcnNlZCwgaXNHZW5lcmljIH0gPSBwYXJzZVJlYWx0aW1lRXZlbnQobWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAoIXBhcnNlZCB8fCBpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5hdWRpby5kZWx0YScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXggPSBwYXJzZWQuY29udGVudF9pbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50SXRlbUlkID0gcGFyc2VkLml0ZW1faWQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVzcG9uc2Ugc3RhcnQgdGltZXN0YW1wIGlzIG5vdCBzZXQsIHdlIHNldCBpdCB0byB0aGUgY3VycmVudCB0aW1lLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBlbGFwc2VkIHRpbWUgZm9yIGludGVycnVwdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBidWZmID0gYmFzZTY0VG9BcnJheUJ1ZmZlcihwYXJzZWQuZGVsdGEpO1xuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgYXVkaW8gbGVuZ3RoIGluIG1pbGxpc2Vjb25kcyBhc3N1bWluZyAyNGtIeiBwY20xNmxlXG4gICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyAyNCAvIDI7IC8vIDI0a0h6ICogMiBieXRlcyBwZXIgc2FtcGxlXG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9FdmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2F1ZGlvJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogYnVmZixcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VJZDogcGFyc2VkLnJlc3BvbnNlX2lkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5fb25BdWRpbyhhdWRpb0V2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdGFydGVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJydXB0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAnc2Vzc2lvbi5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyYWNpbmdDb25maWcgPSBwYXJzZWQuc2Vzc2lvbi50cmFjaW5nO1xuICAgICAgICAgICAgICAgIC8vIFRyeWluZyB0byB0dXJuIG9uIHRyYWNpbmcgYWZ0ZXIgdGhlIHNlc3Npb24gaXMgY3JlYXRlZFxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRyYWNpbmdDb25maWcoc2Vzc2lvbkNvbmZpZy50cmFjaW5nID8/ICdhdXRvJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLl9vbkNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IHRoaXMuY3VycmVudE1vZGVsO1xuICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLiNhcGlLZXkgPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXkob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuI3VybCA9XG4gICAgICAgICAgICBvcHRpb25zLnVybCA/P1xuICAgICAgICAgICAgICAgIGB3c3M6Ly9hcGkub3BlbmFpLmNvbS92MS9yZWFsdGltZT9tb2RlbD0ke3RoaXMuY3VycmVudE1vZGVsfWA7XG4gICAgICAgIGNvbnN0IHNlc3Npb25Db25maWcgPSB7XG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5pbml0aWFsU2Vzc2lvbkNvbmZpZyB8fCB7fSksXG4gICAgICAgICAgICBtb2RlbDogdGhpcy5jdXJyZW50TW9kZWwsXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jc2V0dXBXZWJTb2NrZXQocmVzb2x2ZSwgcmVqZWN0LCBzZXNzaW9uQ29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVNlc3Npb25Db25maWcoc2Vzc2lvbkNvbmZpZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIHN0cmluZ2lmeSB0aGUgZXZlbnQgYW5kIHNlbmQgaXQgZGlyZWN0bHkgdG8gdGhlXG4gICAgICogQVBJLiBUaGlzIGNhbiBiZSB1c2VkIGlmIHlvdSB3YW50IHRvIHRha2UgY29udHJvbCBvdmVyIHRoZSBjb25uZWN0aW9uIGFuZCBzZW5kIGV2ZW50cyBtYW51YWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRFdmVudChldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuI3N0YXRlLndlYnNvY2tldCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJTb2NrZXQgaXMgbm90IGNvbm5lY3RlZC4gTWFrZSBzdXJlIHlvdSBjYWxsIGBjb25uZWN0KClgIGJlZm9yZSBzZW5kaW5nIGV2ZW50cy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGF0ZS53ZWJzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShldmVudCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZSB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGlzIHdpbGwgYWxzbyByZXNldCBhbnkgaW50ZXJuYWwgY29ubmVjdGlvbiB0cmFja2luZyB1c2VkIGZvciBpbnRlcnJ1cHRpb24gaGFuZGxpbmcuXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuI3N0YXRlLndlYnNvY2tldD8uY2xvc2UoKTtcbiAgICAgICAgdGhpcy4jY3VycmVudEl0ZW1JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2lsbCB0aHJvdyBhbiBlcnJvciBhcyB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydCBsYXllciBkb2VzIG5vdCBzdXBwb3J0IG11dGluZy5cbiAgICAgKi9cbiAgICBtdXRlKF9tdXRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011dGUgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQuIFlvdSBoYXZlIHRvIG11dGUgdGhlIGF1ZGlvIGlucHV0IHlvdXJzZWxmLicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGF1ZGlvIGJ1ZmZlciB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIGlzIHVzZWQgZm9yIHlvdXIgY2xpZW50IHRvIHNlbmQgYXVkaW8gdG8gdGhlXG4gICAgICogbW9kZWwgdG8gcmVzcG9uZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdWRpbyAtIFRoZSBhdWRpbyBidWZmZXIgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgYXVkaW8gYnVmZmVyLlxuICAgICAqL1xuICAgIHNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICBzdXBlci5zZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBjYW5jZWwgcmVzcG9uc2UgZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyBpcyB1c2VkIHRvIGNhbmNlbCBhbiBvbmdvaW5nXG4gICAgICogIHJlc3BvbnNlIHRoYXQgdGhlIG1vZGVsIGlzIGN1cnJlbnRseSBnZW5lcmF0aW5nLlxuICAgICAqL1xuICAgIF9jYW5jZWxSZXNwb25zZSgpIHtcbiAgICAgICAgLy8gY2FuY2VsIHRoZSBvbmdvaW5nIHJlc3BvbnNlXG4gICAgICAgIGlmICh0aGlzLiNvbmdvaW5nUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY2FuY2VsJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRG8gTk9UIGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkuIENhbGwgYGludGVycnVwdCgpYCBpbnN0ZWFkIGZvciBwcm9wZXIgaW50ZXJydXB0aW9uIGhhbmRsaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZW5kIHRoZSByaWdodCBldmVudHMgdG8gdGhlIEFQSSB0byBpbmZvcm0gdGhlIG1vZGVsIHRoYXQgdGhlIHVzZXIgaGFzXG4gICAgICogaW50ZXJydXB0ZWQgdGhlIHJlc3BvbnNlLiBJdCBtaWdodCBiZSBvdmVycmlkZGVuL2V4dGVuZGVkIGJ5IGFuIGV4dGVuZGVkIHRyYW5zcG9ydCBsYXllci4gU2VlXG4gICAgICogdGhlIGBUd2lsaW9SZWFsdGltZVRyYW5zcG9ydExheWVyYCBmb3IgYW4gZXhhbXBsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbGFwc2VkVGltZSAtIFRoZSBlbGFwc2VkIHRpbWUgc2luY2UgdGhlIHJlc3BvbnNlIHN0YXJ0ZWQuXG4gICAgICovXG4gICAgX2ludGVycnVwdChlbGFwc2VkVGltZSkge1xuICAgICAgICAvLyBpbW1lZGlhdGVseSBlbWl0IHRoaXMgZXZlbnQgc28gdGhlIGNsaWVudCBjYW4gc3RvcCBwbGF5aW5nIGF1ZGlvXG4gICAgICAgIHRoaXMuZW1pdCgnYXVkaW9faW50ZXJydXB0ZWQnKTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlJyxcbiAgICAgICAgICAgIGl0ZW1faWQ6IHRoaXMuI2N1cnJlbnRJdGVtSWQsXG4gICAgICAgICAgICBjb250ZW50X2luZGV4OiB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXgsXG4gICAgICAgICAgICBhdWRpb19lbmRfbXM6IGVsYXBzZWRUaW1lLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBvbmdvaW5nIHJlc3BvbnNlLiBUaGlzIG1ldGhvZCBpcyB0cmlnZ2VyZWQgYXV0b21hdGljYWxseSBieSB0aGUgY2xpZW50IHdoZW5cbiAgICAgKiB2b2ljZSBhY3Rpdml0eSBkZXRlY3Rpb24gKFZBRCkgaXMgZW5hYmxlZCAoZGVmYXVsdCkgYXMgd2VsbCBhcyB3aGVuIGFuIG91dHB1dCBndWFyZHJhaWwgZ290XG4gICAgICogdHJpZ2dlcmVkLlxuICAgICAqXG4gICAgICogWW91IGNhbiBhbHNvIGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkgaWYgeW91IHdhbnQgdG8gaW50ZXJydXB0IHRoZSBjb252ZXJzYXRpb24gZm9yIGV4YW1wbGVcbiAgICAgKiBiYXNlZCBvbiBhbiBldmVudCBpbiB0aGUgY2xpZW50LlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNjdXJyZW50SXRlbUlkIHx8IHR5cGVvZiB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NhbmNlbFJlc3BvbnNlKCk7XG4gICAgICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gRGF0ZS5ub3coKSAtIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXA7XG4gICAgICAgIGlmIChlbGFwc2VkVGltZSA+PSAwICYmIGVsYXBzZWRUaW1lIDwgdGhpcy5fYXVkaW9MZW5ndGhNcykge1xuICAgICAgICAgICAgdGhpcy5faW50ZXJydXB0KGVsYXBzZWRUaW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNjdXJyZW50SXRlbUlkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAgICAgdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4ID0gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebsocket.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/realtimeAgent.mjs":
/*!**************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/realtimeAgent.mjs ***!
  \**************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RealtimeAgent: () => (/* binding */ RealtimeAgent)\n/* harmony export */ });\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-core@0.0.5_ws@8.18.3_zod@3.25.76/node_modules/@openai/agents-core/dist/index.mjs\");\n\n/**\n * A specialized agent instance that is meant to be used within a `RealtimeSession` to build\n * voice agents. Due to the nature of this agent, some configuration options are not supported\n * that are supported by regular `Agent` instances. For example:\n * - `model` choice is not supported as all RealtimeAgents will be handled by the same model within\n *   a `RealtimeSession`\n * - `modelSettings` is not supported as all RealtimeAgents will be handled by the same model within\n *   a `RealtimeSession`\n * - `outputType` is not supported as RealtimeAgents do not support structured outputs\n * - `toolUseBehavior` is not supported as all RealtimeAgents will be handled by the same model within\n *   a `RealtimeSession`\n * - `voice` can be configured on an `Agent` level however it cannot be changed after the first\n *    agent within a `RealtimeSession` spoke\n *\n * @example\n * ```ts\n * const agent = new RealtimeAgent({\n *   name: 'my-agent',\n *   instructions: 'You are a helpful assistant that can answer questions and help with tasks.',\n * })\n *\n * const session = new RealtimeSession(agent);\n * ```\n */\nclass RealtimeAgent extends _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.Agent {\n    /**\n     * The voice intended to be used by the agent. If another agent already spoke during the\n     * RealtimeSession, changing the voice during a handoff will fail.\n     */\n    voice;\n    constructor(config) {\n        super(config);\n        this.voice = config.voice ?? 'ash';\n    }\n}\n//# sourceMappingURL=realtimeAgent.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L3JlYWx0aW1lQWdlbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ08sNEJBQTRCLHNEQUFLO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy95dXdhbmcvcHJvamVjdHMvb3BlbmFpLXJlYWx0aW1lLWFnZW50cy9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjVfem9kQDMuMjUuNzYvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvcmVhbHRpbWVBZ2VudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWdlbnQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgYWdlbnQgaW5zdGFuY2UgdGhhdCBpcyBtZWFudCB0byBiZSB1c2VkIHdpdGhpbiBhIGBSZWFsdGltZVNlc3Npb25gIHRvIGJ1aWxkXG4gKiB2b2ljZSBhZ2VudHMuIER1ZSB0byB0aGUgbmF0dXJlIG9mIHRoaXMgYWdlbnQsIHNvbWUgY29uZmlndXJhdGlvbiBvcHRpb25zIGFyZSBub3Qgc3VwcG9ydGVkXG4gKiB0aGF0IGFyZSBzdXBwb3J0ZWQgYnkgcmVndWxhciBgQWdlbnRgIGluc3RhbmNlcy4gRm9yIGV4YW1wbGU6XG4gKiAtIGBtb2RlbGAgY2hvaWNlIGlzIG5vdCBzdXBwb3J0ZWQgYXMgYWxsIFJlYWx0aW1lQWdlbnRzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgc2FtZSBtb2RlbCB3aXRoaW5cbiAqICAgYSBgUmVhbHRpbWVTZXNzaW9uYFxuICogLSBgbW9kZWxTZXR0aW5nc2AgaXMgbm90IHN1cHBvcnRlZCBhcyBhbGwgUmVhbHRpbWVBZ2VudHMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBzYW1lIG1vZGVsIHdpdGhpblxuICogICBhIGBSZWFsdGltZVNlc3Npb25gXG4gKiAtIGBvdXRwdXRUeXBlYCBpcyBub3Qgc3VwcG9ydGVkIGFzIFJlYWx0aW1lQWdlbnRzIGRvIG5vdCBzdXBwb3J0IHN0cnVjdHVyZWQgb3V0cHV0c1xuICogLSBgdG9vbFVzZUJlaGF2aW9yYCBpcyBub3Qgc3VwcG9ydGVkIGFzIGFsbCBSZWFsdGltZUFnZW50cyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgbW9kZWwgd2l0aGluXG4gKiAgIGEgYFJlYWx0aW1lU2Vzc2lvbmBcbiAqIC0gYHZvaWNlYCBjYW4gYmUgY29uZmlndXJlZCBvbiBhbiBgQWdlbnRgIGxldmVsIGhvd2V2ZXIgaXQgY2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgdGhlIGZpcnN0XG4gKiAgICBhZ2VudCB3aXRoaW4gYSBgUmVhbHRpbWVTZXNzaW9uYCBzcG9rZVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZUFnZW50IGV4dGVuZHMgQWdlbnQge1xuICAgIC8qKlxuICAgICAqIFRoZSB2b2ljZSBpbnRlbmRlZCB0byBiZSB1c2VkIGJ5IHRoZSBhZ2VudC4gSWYgYW5vdGhlciBhZ2VudCBhbHJlYWR5IHNwb2tlIGR1cmluZyB0aGVcbiAgICAgKiBSZWFsdGltZVNlc3Npb24sIGNoYW5naW5nIHRoZSB2b2ljZSBkdXJpbmcgYSBoYW5kb2ZmIHdpbGwgZmFpbC5cbiAgICAgKi9cbiAgICB2b2ljZTtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy52b2ljZSA9IGNvbmZpZy52b2ljZSA/PyAnYXNoJztcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFsdGltZUFnZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/realtimeAgent.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/realtimeSession.mjs":
/*!****************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/realtimeSession.mjs ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RealtimeSession: () => (/* binding */ RealtimeSession)\n/* harmony export */ });\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-core@0.0.5_ws@8.18.3_zod@3.25.76/node_modules/@openai/agents-core/dist/index.mjs\");\n/* harmony import */ var _openai_agents_core_shims__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @openai/agents-core/_shims */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-core@0.0.5_ws@8.18.3_zod@3.25.76/node_modules/@openai/agents-core/dist/shims/shims-node.mjs\");\n/* harmony import */ var _openai_agents_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @openai/agents-core/utils */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-core@0.0.5_ws@8.18.3_zod@3.25.76/node_modules/@openai/agents-core/dist/utils/index.mjs\");\n/* harmony import */ var _guardrail_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./guardrail.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/guardrail.mjs\");\n/* harmony import */ var _openaiRealtimeWebRtc_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./openaiRealtimeWebRtc.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebRtc.mjs\");\n/* harmony import */ var _openaiRealtimeWebsocket_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./openaiRealtimeWebsocket.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebsocket.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/utils.mjs\");\n/* harmony import */ var _logger_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./logger.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/logger.mjs\");\n\n\n\n\n\n\n\n\n/**\n * A `RealtimeSession` is the corner piece of building Voice Agents. It's the equivalent of a\n * Runner in text-based agents except that it automatically handles multiple turns by maintaining a\n * connection with the underlying transport layer.\n *\n * The session handles managing the local history copy, executes tools, runs output guardrails, and\n * facilities handoffs.\n *\n * The actual audio handling and generation of model responses is handled by the underlying\n * transport layer. By default if you are using a browser with WebRTC support, the session will\n * automatically use the WebRTC version of the OpenAI Realtime API. On the server or if you pass\n * `websocket` as the transport layer, the session will establish a connection using WebSockets.\n *\n * In the case of WebRTC, in the browser, the transport layer will also automatically configure the\n * microphone and audio output to be used by the session.\n *\n * You can also create a transport layer instance yourself and pass it in to have more control over\n * the configuration or even extend the existing ones. Check out the `TwilioRealtimeTransportLayer`\n * for an example of how to create a custom transport layer.\n *\n * @example\n * ```ts\n * const agent = new RealtimeAgent({\n *   name: 'my-agent',\n *   instructions: 'You are a helpful assistant that can answer questions and help with tasks.',\n * })\n *\n * const session = new RealtimeSession(agent);\n * session.connect({\n *   apiKey: 'your-api-key',\n * });\n * ```\n */\nclass RealtimeSession extends _openai_agents_core_shims__WEBPACK_IMPORTED_MODULE_1__.RuntimeEventEmitter {\n    initialAgent;\n    options;\n    #transport;\n    #currentAgent;\n    #currentTools = [];\n    #context;\n    #outputGuardrails = [];\n    #outputGuardrailSettings;\n    #transcribedTextDeltas = {};\n    #history = [];\n    #shouldIncludeAudioData;\n    #interruptedByGuardrail = {};\n    constructor(initialAgent, options = {}) {\n        super();\n        this.initialAgent = initialAgent;\n        this.options = options;\n        if ((typeof options.transport === 'undefined' && (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.hasWebRTCSupport)()) ||\n            options.transport === 'webrtc') {\n            this.#transport = new _openaiRealtimeWebRtc_mjs__WEBPACK_IMPORTED_MODULE_4__.OpenAIRealtimeWebRTC();\n        }\n        else if (options.transport === 'websocket' ||\n            typeof options.transport === 'undefined') {\n            this.#transport = new _openaiRealtimeWebsocket_mjs__WEBPACK_IMPORTED_MODULE_5__.OpenAIRealtimeWebSocket();\n        }\n        else {\n            this.#transport = options.transport;\n        }\n        this.#currentAgent = initialAgent;\n        this.#context = new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.RunContext({\n            ...(options.context ?? {}),\n            history: this.#history,\n        });\n        this.#outputGuardrails = (options.outputGuardrails ?? []).map(_guardrail_mjs__WEBPACK_IMPORTED_MODULE_3__.defineRealtimeOutputGuardrail);\n        this.#outputGuardrailSettings = (0,_guardrail_mjs__WEBPACK_IMPORTED_MODULE_3__.getRealtimeGuardrailSettings)(options.outputGuardrailSettings ?? {});\n        this.#shouldIncludeAudioData = options.historyStoreAudio ?? false;\n    }\n    /**\n     * The transport layer used by the session.\n     */\n    get transport() {\n        return this.#transport;\n    }\n    /**\n     * The current agent in the session.\n     */\n    get currentAgent() {\n        return this.#currentAgent;\n    }\n    /**\n     * The current usage of the session.\n     */\n    get usage() {\n        return this.#context.usage;\n    }\n    /**\n     * The current context of the session.\n     */\n    get context() {\n        return this.#context;\n    }\n    /**\n     * Whether the session is muted. Might be `null` if the underlying transport layer does not\n     * support muting.\n     */\n    get muted() {\n        return this.#transport.muted;\n    }\n    /**\n     * The history of the session.\n     */\n    get history() {\n        return this.#history;\n    }\n    async #setCurrentAgent(agent) {\n        this.#currentAgent = agent;\n        const handoffs = this.#currentAgent.handoffs.map(_openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.getHandoff);\n        const handoffTools = handoffs.map((handoff) => handoff.getHandoffAsFunctionTool());\n        this.#currentTools = [\n            ...(await this.#currentAgent.getAllTools()).filter((tool) => tool.type === 'function'),\n            ...handoffTools,\n        ];\n    }\n    async #getSessionConfig(additionalConfig = {}) {\n        const instructions = await this.#currentAgent.getSystemPrompt(this.#context);\n        const tracingConfig = this.options\n            .tracingDisabled\n            ? null\n            : this.options.workflowName\n                ? {\n                    workflow_name: this.options.workflowName,\n                }\n                : 'auto';\n        if (tracingConfig !== null && tracingConfig !== 'auto') {\n            if (this.options.groupId) {\n                tracingConfig.group_id = this.options.groupId;\n            }\n            if (this.options.traceMetadata) {\n                tracingConfig.metadata = this.options.traceMetadata;\n            }\n        }\n        else if (this.options.groupId || this.options.traceMetadata) {\n            _logger_mjs__WEBPACK_IMPORTED_MODULE_7__[\"default\"].warn('In order to set traceMetadata or a groupId you need to specify a workflowName.');\n        }\n        return {\n            instructions,\n            voice: this.#currentAgent.voice,\n            model: this.options.model,\n            tools: this.#currentTools,\n            tracing: tracingConfig,\n            ...additionalConfig,\n        };\n    }\n    async updateAgent(newAgent) {\n        this.#currentAgent.emit('agent_handoff', this.#context, newAgent);\n        this.emit('agent_handoff', this.#context, this.#currentAgent, newAgent);\n        await this.#setCurrentAgent(newAgent);\n        await this.#transport.updateSessionConfig(await this.#getSessionConfig());\n        return newAgent;\n    }\n    async #handleHandoff(toolCall, handoff) {\n        const newAgent = (await handoff.onInvokeHandoff(this.#context, toolCall.arguments));\n        this.#currentAgent.emit('agent_handoff', this.#context, newAgent);\n        this.emit('agent_handoff', this.#context, this.#currentAgent, newAgent);\n        // update session with new agent\n        await this.#setCurrentAgent(newAgent);\n        await this.#transport.updateSessionConfig(await this.#getSessionConfig());\n        const output = (0,_openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.getTransferMessage)(newAgent);\n        this.#transport.sendFunctionCallOutput(toolCall, output, true);\n        return newAgent;\n    }\n    async #handleFunctionToolCall(toolCall, tool) {\n        this.#context.context.history = JSON.parse(JSON.stringify(this.#history)); // deep copy of the history\n        let parsedArgs = toolCall.arguments;\n        if (tool.parameters) {\n            if ((0,_openai_agents_core_utils__WEBPACK_IMPORTED_MODULE_2__.isZodObject)(tool.parameters)) {\n                parsedArgs = tool.parameters.parse(parsedArgs);\n            }\n            else {\n                parsedArgs = JSON.parse(parsedArgs);\n            }\n        }\n        const needsApproval = await tool.needsApproval(this.#context, parsedArgs, toolCall.callId);\n        if (needsApproval) {\n            const approval = this.context.isToolApproved({\n                toolName: tool.name,\n                callId: toolCall.callId,\n            });\n            if (approval === false) {\n                this.emit('agent_tool_start', this.#context, this.#currentAgent, tool);\n                this.#currentAgent.emit('agent_tool_start', this.#context, tool);\n                const result = 'Tool execution was not approved.';\n                this.#transport.sendFunctionCallOutput(toolCall, result, true);\n                this.emit('agent_tool_end', this.#context, this.#currentAgent, tool, result);\n                this.#currentAgent.emit('agent_tool_end', this.#context, tool, result);\n                return;\n            }\n            else if (typeof approval === 'undefined') {\n                this.emit('tool_approval_requested', this.#context, this.#currentAgent, {\n                    type: 'function_approval',\n                    tool,\n                    approvalItem: new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.RunToolApprovalItem(toolCall, this.#currentAgent),\n                });\n                return;\n            }\n        }\n        this.emit('agent_tool_start', this.#context, this.#currentAgent, tool);\n        this.#currentAgent.emit('agent_tool_start', this.#context, tool);\n        this.#context.context.history = JSON.parse(JSON.stringify(this.#history)); // deep copy of the history\n        const result = await tool.invoke(this.#context, toolCall.arguments);\n        const stringResult = (0,_openai_agents_core_utils__WEBPACK_IMPORTED_MODULE_2__.toSmartString)(result);\n        this.#transport.sendFunctionCallOutput(toolCall, stringResult, true);\n        this.emit('agent_tool_end', this.#context, this.#currentAgent, tool, stringResult);\n        this.#currentAgent.emit('agent_tool_end', this.#context, tool, stringResult);\n    }\n    async #handleFunctionCall(toolCall) {\n        const handoffMap = new Map(this.#currentAgent.handoffs\n            .map(_openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.getHandoff)\n            .map((handoff) => [handoff.toolName, handoff]));\n        const functionToolMap = new Map((await this.#currentAgent.getAllTools()).map((tool) => [tool.name, tool]));\n        const possibleHandoff = handoffMap.get(toolCall.name);\n        if (possibleHandoff) {\n            await this.#handleHandoff(toolCall, possibleHandoff);\n        }\n        else {\n            const functionTool = functionToolMap.get(toolCall.name);\n            if (functionTool && functionTool.type === 'function') {\n                await this.#handleFunctionToolCall(toolCall, functionTool);\n            }\n            else {\n                throw new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.ModelBehaviorError(`Tool ${toolCall.name} not found`);\n            }\n        }\n    }\n    async #runOutputGuardrails(output, responseId) {\n        if (this.#outputGuardrails.length === 0) {\n            return;\n        }\n        const guardrailArgs = {\n            agent: this.#currentAgent,\n            agentOutput: output,\n            context: this.#context,\n        };\n        const results = await Promise.all(this.#outputGuardrails.map((guardrail) => guardrail.run(guardrailArgs)));\n        const firstTripwireTriggered = results.find((result) => result.output.tripwireTriggered);\n        if (firstTripwireTriggered) {\n            // this ensures that if one guardrail already trips and we are in the middle of another\n            // guardrail run, we don't trip again\n            if (this.#interruptedByGuardrail[responseId]) {\n                return;\n            }\n            this.#interruptedByGuardrail[responseId] = true;\n            const error = new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.OutputGuardrailTripwireTriggered(`Output guardrail triggered: ${JSON.stringify(firstTripwireTriggered.output.outputInfo)}`, firstTripwireTriggered);\n            this.emit('guardrail_tripped', this.#context, this.#currentAgent, error);\n            this.interrupt();\n            const feedbackText = (0,_guardrail_mjs__WEBPACK_IMPORTED_MODULE_3__.getRealtimeGuardrailFeedbackMessage)(firstTripwireTriggered);\n            this.sendMessage(feedbackText);\n            return;\n        }\n    }\n    #setEventListeners() {\n        this.#transport.on('*', (event) => {\n            this.emit('transport_event', event);\n        });\n        this.#transport.on('audio', (event) => {\n            this.emit('audio', event);\n        });\n        this.#transport.on('turn_started', () => {\n            this.emit('agent_start', this.#context, this.#currentAgent);\n            this.#currentAgent.emit('agent_start', this.#context, this.#currentAgent);\n        });\n        this.#transport.on('turn_done', (event) => {\n            const item = event.response.output[event.response.output.length - 1];\n            const textOutput = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.getLastTextFromAudioOutputMessage)(item) ?? '';\n            this.emit('agent_end', this.#context, this.#currentAgent, textOutput);\n            this.#currentAgent.emit('agent_end', this.#context, textOutput);\n            this.#runOutputGuardrails(textOutput, event.response.id);\n        });\n        this.#transport.on('audio_done', () => {\n            this.emit('audio_stopped', this.#context, this.#currentAgent);\n        });\n        let lastRunIndex = 0;\n        let lastItemId;\n        this.#transport.on('audio_transcript_delta', (event) => {\n            try {\n                const delta = event.delta;\n                const itemId = event.itemId;\n                const responseId = event.responseId;\n                if (lastItemId !== itemId) {\n                    lastItemId = itemId;\n                    lastRunIndex = 0;\n                }\n                const currentText = this.#transcribedTextDeltas[itemId] ?? '';\n                const newText = currentText + delta;\n                this.#transcribedTextDeltas[itemId] = newText;\n                if (this.#outputGuardrailSettings.debounceTextLength < 0) {\n                    return;\n                }\n                const newRunIndex = Math.floor(newText.length / this.#outputGuardrailSettings.debounceTextLength);\n                if (newRunIndex > lastRunIndex) {\n                    lastRunIndex = newRunIndex;\n                    // We don't cancel existing runs because we want the first one to fail to fail\n                    // The transport layer should upon failure handle the interruption and stop the model\n                    // from generating further\n                    this.#runOutputGuardrails(newText, responseId);\n                }\n            }\n            catch (err) {\n                this.emit('error', {\n                    type: 'error',\n                    error: err,\n                });\n            }\n        });\n        this.#transport.on('item_update', (event) => {\n            try {\n                const isNew = !this.#history.some((item) => item.itemId === event.itemId);\n                this.#history = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.updateRealtimeHistory)(this.#history, event, this.#shouldIncludeAudioData);\n                this.#context.context.history = this.#history;\n                if (isNew) {\n                    const addedItem = this.#history.find((item) => item.itemId === event.itemId);\n                    if (addedItem) {\n                        this.emit('history_added', addedItem);\n                    }\n                }\n                this.emit('history_updated', this.#history);\n            }\n            catch (err) {\n                this.emit('error', {\n                    type: 'error',\n                    error: err,\n                });\n            }\n        });\n        this.#transport.on('item_deleted', (event) => {\n            try {\n                this.#history = this.#history.filter((item) => item.itemId !== event.itemId);\n                this.#context.context.history = this.#history;\n                this.emit('history_updated', this.#history);\n            }\n            catch (err) {\n                this.emit('error', {\n                    type: 'error',\n                    error: err,\n                });\n            }\n        });\n        this.#transport.on('function_call', async (event) => {\n            try {\n                await this.#handleFunctionCall(event);\n            }\n            catch (error) {\n                _logger_mjs__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error('Error handling function call', error);\n                this.emit('error', {\n                    type: 'error',\n                    error,\n                });\n            }\n        });\n        this.#transport.on('usage_update', (usage) => {\n            this.#context.usage.add(usage);\n        });\n        this.#transport.on('audio_interrupted', () => {\n            this.emit('audio_interrupted', this.#context, this.#currentAgent);\n        });\n        this.#transport.on('error', (error) => {\n            this.emit('error', error);\n        });\n    }\n    /**\n     * Connect to the session. This will establish the connection to the underlying transport layer\n     * and start the session.\n     *\n     * After connecting, the session will also emit a `history_updated` event with an empty history.\n     *\n     * @param options - The options for the connection.\n     */\n    async connect(options) {\n        // makes sure the current agent is correctly set and loads the tools\n        await this.#setCurrentAgent(this.initialAgent);\n        this.#setEventListeners();\n        await this.#transport.connect({\n            apiKey: options.apiKey ?? this.options.apiKey,\n            model: this.options.model,\n            initialSessionConfig: await this.#getSessionConfig(this.options.config),\n        });\n        this.#history = [];\n        this.emit('history_updated', this.#history);\n    }\n    /**\n     * Update the history of the session.\n     * @param newHistory - The new history to set.\n     */\n    updateHistory(newHistory) {\n        let updatedHistory;\n        if (typeof newHistory === 'function') {\n            updatedHistory = newHistory(this.#history);\n        }\n        else {\n            updatedHistory = newHistory;\n        }\n        this.#transport.resetHistory(this.#history, updatedHistory);\n    }\n    /**\n     * Send a message to the session.\n     * @param message - The message to send.\n     * @param otherEventData - Additional event data to send.\n     */\n    sendMessage(message, otherEventData = {}) {\n        this.#transport.sendMessage(message, otherEventData);\n    }\n    /**\n     * Mute the session.\n     * @param muted - Whether to mute the session.\n     */\n    mute(muted) {\n        this.#transport.mute(muted);\n    }\n    /**\n     * Disconnect from the session.\n     */\n    close() {\n        this.#interruptedByGuardrail = {};\n        this.#transport.close();\n    }\n    /**\n     * Send audio to the session.\n     * @param audio - The audio to send.\n     * @param options - Additional options.\n     * @param options.commit - Whether to finish the turn with this audio.\n     */\n    sendAudio(audio, options = {}) {\n        this.#transport.sendAudio(audio, options);\n    }\n    /**\n     * Interrupt the session artificially for example if you want to build a \"stop talking\"\n     * button.\n     */\n    interrupt() {\n        this.#transport.interrupt();\n    }\n    /**\n     * Approve a tool call. This will also trigger the tool call to the agent.\n     * @param approvalItem - The approval item to approve.\n     * @param options - Additional options.\n     * @param options.alwaysApprove - Whether to always approve the tool call.\n     */\n    async approve(approvalItem, options = { alwaysApprove: false }) {\n        this.#context.approveTool(approvalItem, options);\n        const tool = this.#currentAgent.tools.find((tool) => tool.name === approvalItem.rawItem.name);\n        if (tool && tool.type === 'function') {\n            await this.#handleFunctionToolCall(approvalItem.rawItem, tool);\n        }\n        else {\n            throw new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.ModelBehaviorError(`Tool ${approvalItem.rawItem.name} not found`);\n        }\n    }\n    /**\n     * Reject a tool call. This will also trigger the tool call to the agent.\n     * @param approvalItem - The approval item to reject.\n     * @param options - Additional options.\n     * @param options.alwaysReject - Whether to always reject the tool call.\n     */\n    async reject(approvalItem, options = { alwaysReject: false }) {\n        this.#context.rejectTool(approvalItem, options);\n        // we still need to simulate a tool call to the agent to let the agent know\n        const tool = this.#currentAgent.tools.find((tool) => tool.name === approvalItem.rawItem.name);\n        if (tool && tool.type === 'function') {\n            await this.#handleFunctionToolCall(approvalItem.rawItem, tool);\n        }\n        else {\n            throw new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.ModelBehaviorError(`Tool ${approvalItem.rawItem.name} not found`);\n        }\n    }\n}\n//# sourceMappingURL=realtimeSession.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L3JlYWx0aW1lU2Vzc2lvbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTZKO0FBQzVGO0FBQ007QUFDNkQ7QUFDbEU7QUFDTTtBQUNrQztBQUN4RTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ08sOEJBQThCLDBFQUFtQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0EseURBQXlELDREQUFnQjtBQUN6RTtBQUNBLGtDQUFrQywyRUFBb0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGlGQUF1QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDJEQUFVO0FBQ3RDLHFDQUFxQztBQUNyQztBQUNBLFNBQVM7QUFDVCxzRUFBc0UseUVBQTZCO0FBQ25HLHdDQUF3Qyw0RUFBNEIsc0NBQXNDO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsc0JBQXNCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixtRUFBa0IsU0FBUywyQkFBMkI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxxQkFBcUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsbUVBQWtCLFNBQVMsMkJBQTJCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMveXV3YW5nL3Byb2plY3RzL29wZW5haS1yZWFsdGltZS1hZ2VudHMvbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L3JlYWx0aW1lU2Vzc2lvbi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0SGFuZG9mZiwgZ2V0VHJhbnNmZXJNZXNzYWdlLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBSdW5Db250ZXh0LCBSdW5Ub29sQXBwcm92YWxJdGVtLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgUnVudGltZUV2ZW50RW1pdHRlciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGlzWm9kT2JqZWN0LCB0b1NtYXJ0U3RyaW5nIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS91dGlscyc7XG5pbXBvcnQgeyBkZWZpbmVSZWFsdGltZU91dHB1dEd1YXJkcmFpbCwgZ2V0UmVhbHRpbWVHdWFyZHJhaWxGZWVkYmFja01lc3NhZ2UsIGdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3MsIH0gZnJvbSBcIi4vZ3VhcmRyYWlsLm1qc1wiO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJSVEMgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzXCI7XG5pbXBvcnQgeyBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UsIGhhc1dlYlJUQ1N1cHBvcnQsIHVwZGF0ZVJlYWx0aW1lSGlzdG9yeSwgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuLyoqXG4gKiBBIGBSZWFsdGltZVNlc3Npb25gIGlzIHRoZSBjb3JuZXIgcGllY2Ugb2YgYnVpbGRpbmcgVm9pY2UgQWdlbnRzLiBJdCdzIHRoZSBlcXVpdmFsZW50IG9mIGFcbiAqIFJ1bm5lciBpbiB0ZXh0LWJhc2VkIGFnZW50cyBleGNlcHQgdGhhdCBpdCBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgbXVsdGlwbGUgdHVybnMgYnkgbWFpbnRhaW5pbmcgYVxuICogY29ubmVjdGlvbiB3aXRoIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBsYXllci5cbiAqXG4gKiBUaGUgc2Vzc2lvbiBoYW5kbGVzIG1hbmFnaW5nIHRoZSBsb2NhbCBoaXN0b3J5IGNvcHksIGV4ZWN1dGVzIHRvb2xzLCBydW5zIG91dHB1dCBndWFyZHJhaWxzLCBhbmRcbiAqIGZhY2lsaXRpZXMgaGFuZG9mZnMuXG4gKlxuICogVGhlIGFjdHVhbCBhdWRpbyBoYW5kbGluZyBhbmQgZ2VuZXJhdGlvbiBvZiBtb2RlbCByZXNwb25zZXMgaXMgaGFuZGxlZCBieSB0aGUgdW5kZXJseWluZ1xuICogdHJhbnNwb3J0IGxheWVyLiBCeSBkZWZhdWx0IGlmIHlvdSBhcmUgdXNpbmcgYSBicm93c2VyIHdpdGggV2ViUlRDIHN1cHBvcnQsIHRoZSBzZXNzaW9uIHdpbGxcbiAqIGF1dG9tYXRpY2FsbHkgdXNlIHRoZSBXZWJSVEMgdmVyc2lvbiBvZiB0aGUgT3BlbkFJIFJlYWx0aW1lIEFQSS4gT24gdGhlIHNlcnZlciBvciBpZiB5b3UgcGFzc1xuICogYHdlYnNvY2tldGAgYXMgdGhlIHRyYW5zcG9ydCBsYXllciwgdGhlIHNlc3Npb24gd2lsbCBlc3RhYmxpc2ggYSBjb25uZWN0aW9uIHVzaW5nIFdlYlNvY2tldHMuXG4gKlxuICogSW4gdGhlIGNhc2Ugb2YgV2ViUlRDLCBpbiB0aGUgYnJvd3NlciwgdGhlIHRyYW5zcG9ydCBsYXllciB3aWxsIGFsc28gYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlXG4gKiBtaWNyb3Bob25lIGFuZCBhdWRpbyBvdXRwdXQgdG8gYmUgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAqXG4gKiBZb3UgY2FuIGFsc28gY3JlYXRlIGEgdHJhbnNwb3J0IGxheWVyIGluc3RhbmNlIHlvdXJzZWxmIGFuZCBwYXNzIGl0IGluIHRvIGhhdmUgbW9yZSBjb250cm9sIG92ZXJcbiAqIHRoZSBjb25maWd1cmF0aW9uIG9yIGV2ZW4gZXh0ZW5kIHRoZSBleGlzdGluZyBvbmVzLiBDaGVjayBvdXQgdGhlIGBUd2lsaW9SZWFsdGltZVRyYW5zcG9ydExheWVyYFxuICogZm9yIGFuIGV4YW1wbGUgb2YgaG93IHRvIGNyZWF0ZSBhIGN1c3RvbSB0cmFuc3BvcnQgbGF5ZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCBhZ2VudCA9IG5ldyBSZWFsdGltZUFnZW50KHtcbiAqICAgbmFtZTogJ215LWFnZW50JyxcbiAqICAgaW5zdHJ1Y3Rpb25zOiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50IHRoYXQgY2FuIGFuc3dlciBxdWVzdGlvbnMgYW5kIGhlbHAgd2l0aCB0YXNrcy4nLFxuICogfSlcbiAqXG4gKiBjb25zdCBzZXNzaW9uID0gbmV3IFJlYWx0aW1lU2Vzc2lvbihhZ2VudCk7XG4gKiBzZXNzaW9uLmNvbm5lY3Qoe1xuICogICBhcGlLZXk6ICd5b3VyLWFwaS1rZXknLFxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJlYWx0aW1lU2Vzc2lvbiBleHRlbmRzIFJ1bnRpbWVFdmVudEVtaXR0ZXIge1xuICAgIGluaXRpYWxBZ2VudDtcbiAgICBvcHRpb25zO1xuICAgICN0cmFuc3BvcnQ7XG4gICAgI2N1cnJlbnRBZ2VudDtcbiAgICAjY3VycmVudFRvb2xzID0gW107XG4gICAgI2NvbnRleHQ7XG4gICAgI291dHB1dEd1YXJkcmFpbHMgPSBbXTtcbiAgICAjb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3M7XG4gICAgI3RyYW5zY3JpYmVkVGV4dERlbHRhcyA9IHt9O1xuICAgICNoaXN0b3J5ID0gW107XG4gICAgI3Nob3VsZEluY2x1ZGVBdWRpb0RhdGE7XG4gICAgI2ludGVycnVwdGVkQnlHdWFyZHJhaWwgPSB7fTtcbiAgICBjb25zdHJ1Y3Rvcihpbml0aWFsQWdlbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmluaXRpYWxBZ2VudCA9IGluaXRpYWxBZ2VudDtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgaWYgKCh0eXBlb2Ygb3B0aW9ucy50cmFuc3BvcnQgPT09ICd1bmRlZmluZWQnICYmIGhhc1dlYlJUQ1N1cHBvcnQoKSkgfHxcbiAgICAgICAgICAgIG9wdGlvbnMudHJhbnNwb3J0ID09PSAnd2VicnRjJykge1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0ID0gbmV3IE9wZW5BSVJlYWx0aW1lV2ViUlRDKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy50cmFuc3BvcnQgPT09ICd3ZWJzb2NrZXQnIHx8XG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy50cmFuc3BvcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQgPSBuZXcgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydCA9IG9wdGlvbnMudHJhbnNwb3J0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudCA9IGluaXRpYWxBZ2VudDtcbiAgICAgICAgdGhpcy4jY29udGV4dCA9IG5ldyBSdW5Db250ZXh0KHtcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmNvbnRleHQgPz8ge30pLFxuICAgICAgICAgICAgaGlzdG9yeTogdGhpcy4jaGlzdG9yeSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI291dHB1dEd1YXJkcmFpbHMgPSAob3B0aW9ucy5vdXRwdXRHdWFyZHJhaWxzID8/IFtdKS5tYXAoZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwpO1xuICAgICAgICB0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncyA9IGdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3Mob3B0aW9ucy5vdXRwdXRHdWFyZHJhaWxTZXR0aW5ncyA/PyB7fSk7XG4gICAgICAgIHRoaXMuI3Nob3VsZEluY2x1ZGVBdWRpb0RhdGEgPSBvcHRpb25zLmhpc3RvcnlTdG9yZUF1ZGlvID8/IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgdHJhbnNwb3J0IGxheWVyIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IHRyYW5zcG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3RyYW5zcG9ydDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgYWdlbnQgaW4gdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRBZ2VudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgdXNhZ2Ugb2YgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IHVzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY29udGV4dC51c2FnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29udGV4dCBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgY29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbnRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHNlc3Npb24gaXMgbXV0ZWQuIE1pZ2h0IGJlIGBudWxsYCBpZiB0aGUgdW5kZXJseWluZyB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3RcbiAgICAgKiBzdXBwb3J0IG11dGluZy5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFuc3BvcnQubXV0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBoaXN0b3J5IG9mIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jaGlzdG9yeTtcbiAgICB9XG4gICAgYXN5bmMgI3NldEN1cnJlbnRBZ2VudChhZ2VudCkge1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQgPSBhZ2VudDtcbiAgICAgICAgY29uc3QgaGFuZG9mZnMgPSB0aGlzLiNjdXJyZW50QWdlbnQuaGFuZG9mZnMubWFwKGdldEhhbmRvZmYpO1xuICAgICAgICBjb25zdCBoYW5kb2ZmVG9vbHMgPSBoYW5kb2Zmcy5tYXAoKGhhbmRvZmYpID0+IGhhbmRvZmYuZ2V0SGFuZG9mZkFzRnVuY3Rpb25Ub29sKCkpO1xuICAgICAgICB0aGlzLiNjdXJyZW50VG9vbHMgPSBbXG4gICAgICAgICAgICAuLi4oYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldEFsbFRvb2xzKCkpLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSxcbiAgICAgICAgICAgIC4uLmhhbmRvZmZUb29scyxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgYXN5bmMgI2dldFNlc3Npb25Db25maWcoYWRkaXRpb25hbENvbmZpZyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGluc3RydWN0aW9ucyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRTeXN0ZW1Qcm9tcHQodGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IHRyYWNpbmdDb25maWcgPSB0aGlzLm9wdGlvbnNcbiAgICAgICAgICAgIC50cmFjaW5nRGlzYWJsZWRcbiAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgOiB0aGlzLm9wdGlvbnMud29ya2Zsb3dOYW1lXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIHdvcmtmbG93X25hbWU6IHRoaXMub3B0aW9ucy53b3JrZmxvd05hbWUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogJ2F1dG8nO1xuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZyAhPT0gbnVsbCAmJiB0cmFjaW5nQ29uZmlnICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgIHRyYWNpbmdDb25maWcuZ3JvdXBfaWQgPSB0aGlzLm9wdGlvbnMuZ3JvdXBJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgIHRyYWNpbmdDb25maWcubWV0YWRhdGEgPSB0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbnMuZ3JvdXBJZCB8fCB0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0luIG9yZGVyIHRvIHNldCB0cmFjZU1ldGFkYXRhIG9yIGEgZ3JvdXBJZCB5b3UgbmVlZCB0byBzcGVjaWZ5IGEgd29ya2Zsb3dOYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB2b2ljZTogdGhpcy4jY3VycmVudEFnZW50LnZvaWNlLFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcbiAgICAgICAgICAgIHRvb2xzOiB0aGlzLiNjdXJyZW50VG9vbHMsXG4gICAgICAgICAgICB0cmFjaW5nOiB0cmFjaW5nQ29uZmlnLFxuICAgICAgICAgICAgLi4uYWRkaXRpb25hbENvbmZpZyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlQWdlbnQobmV3QWdlbnQpIHtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCBuZXdBZ2VudCk7XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICBhd2FpdCB0aGlzLiNzZXRDdXJyZW50QWdlbnQobmV3QWdlbnQpO1xuICAgICAgICBhd2FpdCB0aGlzLiN0cmFuc3BvcnQudXBkYXRlU2Vzc2lvbkNvbmZpZyhhd2FpdCB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKCkpO1xuICAgICAgICByZXR1cm4gbmV3QWdlbnQ7XG4gICAgfVxuICAgIGFzeW5jICNoYW5kbGVIYW5kb2ZmKHRvb2xDYWxsLCBoYW5kb2ZmKSB7XG4gICAgICAgIGNvbnN0IG5ld0FnZW50ID0gKGF3YWl0IGhhbmRvZmYub25JbnZva2VIYW5kb2ZmKHRoaXMuI2NvbnRleHQsIHRvb2xDYWxsLmFyZ3VtZW50cykpO1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBuZXdBZ2VudCk7XG4gICAgICAgIC8vIHVwZGF0ZSBzZXNzaW9uIHdpdGggbmV3IGFnZW50XG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudChuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3RyYW5zcG9ydC51cGRhdGVTZXNzaW9uQ29uZmlnKGF3YWl0IHRoaXMuI2dldFNlc3Npb25Db25maWcoKSk7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGdldFRyYW5zZmVyTWVzc2FnZShuZXdBZ2VudCk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBvdXRwdXQsIHRydWUpO1xuICAgICAgICByZXR1cm4gbmV3QWdlbnQ7XG4gICAgfVxuICAgIGFzeW5jICNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKHRvb2xDYWxsLCB0b29sKSB7XG4gICAgICAgIHRoaXMuI2NvbnRleHQuY29udGV4dC5oaXN0b3J5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLiNoaXN0b3J5KSk7IC8vIGRlZXAgY29weSBvZiB0aGUgaGlzdG9yeVxuICAgICAgICBsZXQgcGFyc2VkQXJncyA9IHRvb2xDYWxsLmFyZ3VtZW50cztcbiAgICAgICAgaWYgKHRvb2wucGFyYW1ldGVycykge1xuICAgICAgICAgICAgaWYgKGlzWm9kT2JqZWN0KHRvb2wucGFyYW1ldGVycykpIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gdG9vbC5wYXJhbWV0ZXJzLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IEpTT04ucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmVlZHNBcHByb3ZhbCA9IGF3YWl0IHRvb2wubmVlZHNBcHByb3ZhbCh0aGlzLiNjb250ZXh0LCBwYXJzZWRBcmdzLCB0b29sQ2FsbC5jYWxsSWQpO1xuICAgICAgICBpZiAobmVlZHNBcHByb3ZhbCkge1xuICAgICAgICAgICAgY29uc3QgYXBwcm92YWwgPSB0aGlzLmNvbnRleHQuaXNUb29sQXBwcm92ZWQoe1xuICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wpO1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdG9vbCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gJ1Rvb2wgZXhlY3V0aW9uIHdhcyBub3QgYXBwcm92ZWQuJztcbiAgICAgICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgcmVzdWx0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFwcHJvdmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgndG9vbF9hcHByb3ZhbF9yZXF1ZXN0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2FwcHJvdmFsJyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbCxcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWxJdGVtOiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh0b29sQ2FsbCwgdGhpcy4jY3VycmVudEFnZW50KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sKTtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0b29sKTtcbiAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuI2hpc3RvcnkpKTsgLy8gZGVlcCBjb3B5IG9mIHRoZSBoaXN0b3J5XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvb2wuaW52b2tlKHRoaXMuI2NvbnRleHQsIHRvb2xDYWxsLmFyZ3VtZW50cyk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcocmVzdWx0KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIHN0cmluZ1Jlc3VsdCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wsIHN0cmluZ1Jlc3VsdCk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHN0cmluZ1Jlc3VsdCk7XG4gICAgfVxuICAgIGFzeW5jICNoYW5kbGVGdW5jdGlvbkNhbGwodG9vbENhbGwpIHtcbiAgICAgICAgY29uc3QgaGFuZG9mZk1hcCA9IG5ldyBNYXAodGhpcy4jY3VycmVudEFnZW50LmhhbmRvZmZzXG4gICAgICAgICAgICAubWFwKGdldEhhbmRvZmYpXG4gICAgICAgICAgICAubWFwKChoYW5kb2ZmKSA9PiBbaGFuZG9mZi50b29sTmFtZSwgaGFuZG9mZl0pKTtcbiAgICAgICAgY29uc3QgZnVuY3Rpb25Ub29sTWFwID0gbmV3IE1hcCgoYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldEFsbFRvb2xzKCkpLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICAgICAgY29uc3QgcG9zc2libGVIYW5kb2ZmID0gaGFuZG9mZk1hcC5nZXQodG9vbENhbGwubmFtZSk7XG4gICAgICAgIGlmIChwb3NzaWJsZUhhbmRvZmYpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUhhbmRvZmYodG9vbENhbGwsIHBvc3NpYmxlSGFuZG9mZik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvblRvb2wgPSBmdW5jdGlvblRvb2xNYXAuZ2V0KHRvb2xDYWxsLm5hbWUpO1xuICAgICAgICAgICAgaWYgKGZ1bmN0aW9uVG9vbCAmJiBmdW5jdGlvblRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwodG9vbENhbGwsIGZ1bmN0aW9uVG9vbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7dG9vbENhbGwubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgI3J1bk91dHB1dEd1YXJkcmFpbHMob3V0cHV0LCByZXNwb25zZUlkKSB7XG4gICAgICAgIGlmICh0aGlzLiNvdXRwdXRHdWFyZHJhaWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgICAgICBhZ2VudDogdGhpcy4jY3VycmVudEFnZW50LFxuICAgICAgICAgICAgYWdlbnRPdXRwdXQ6IG91dHB1dCxcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuI2NvbnRleHQsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLiNvdXRwdXRHdWFyZHJhaWxzLm1hcCgoZ3VhcmRyYWlsKSA9PiBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpKSk7XG4gICAgICAgIGNvbnN0IGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQgPSByZXN1bHRzLmZpbmQoKHJlc3VsdCkgPT4gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgIGlmIChmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGVuc3VyZXMgdGhhdCBpZiBvbmUgZ3VhcmRyYWlsIGFscmVhZHkgdHJpcHMgYW5kIHdlIGFyZSBpbiB0aGUgbWlkZGxlIG9mIGFub3RoZXJcbiAgICAgICAgICAgIC8vIGd1YXJkcmFpbCBydW4sIHdlIGRvbid0IHRyaXAgYWdhaW5cbiAgICAgICAgICAgIGlmICh0aGlzLiNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsW3Jlc3BvbnNlSWRdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbFtyZXNwb25zZUlkXSA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgT3V0cHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZC5vdXRwdXQub3V0cHV0SW5mbyl9YCwgZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2d1YXJkcmFpbF90cmlwcGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBlcnJvcik7XG4gICAgICAgICAgICB0aGlzLmludGVycnVwdCgpO1xuICAgICAgICAgICAgY29uc3QgZmVlZGJhY2tUZXh0ID0gZ2V0UmVhbHRpbWVHdWFyZHJhaWxGZWVkYmFja01lc3NhZ2UoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKGZlZWRiYWNrVGV4dCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgI3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJyonLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndHJhbnNwb3J0X2V2ZW50JywgZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpbycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpbycsIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbigndHVybl9zdGFydGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCd0dXJuX2RvbmUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBldmVudC5yZXNwb25zZS5vdXRwdXRbZXZlbnQucmVzcG9uc2Uub3V0cHV0Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY29uc3QgdGV4dE91dHB1dCA9IGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZShpdGVtKSA/PyAnJztcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0ZXh0T3V0cHV0KTtcbiAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0ZXh0T3V0cHV0KTtcbiAgICAgICAgICAgIHRoaXMuI3J1bk91dHB1dEd1YXJkcmFpbHModGV4dE91dHB1dCwgZXZlbnQucmVzcG9uc2UuaWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb19kb25lJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19zdG9wcGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBsYXN0UnVuSW5kZXggPSAwO1xuICAgICAgICBsZXQgbGFzdEl0ZW1JZDtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb190cmFuc2NyaXB0X2RlbHRhJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gZXZlbnQuZGVsdGE7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbUlkID0gZXZlbnQuaXRlbUlkO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlSWQgPSBldmVudC5yZXNwb25zZUlkO1xuICAgICAgICAgICAgICAgIGlmIChsYXN0SXRlbUlkICE9PSBpdGVtSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdEl0ZW1JZCA9IGl0ZW1JZDtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJ1bkluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRleHQgPSB0aGlzLiN0cmFuc2NyaWJlZFRleHREZWx0YXNbaXRlbUlkXSA/PyAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUZXh0ID0gY3VycmVudFRleHQgKyBkZWx0YTtcbiAgICAgICAgICAgICAgICB0aGlzLiN0cmFuc2NyaWJlZFRleHREZWx0YXNbaXRlbUlkXSA9IG5ld1RleHQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuI291dHB1dEd1YXJkcmFpbFNldHRpbmdzLmRlYm91bmNlVGV4dExlbmd0aCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuZXdSdW5JbmRleCA9IE1hdGguZmxvb3IobmV3VGV4dC5sZW5ndGggLyB0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncy5kZWJvdW5jZVRleHRMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdSdW5JbmRleCA+IGxhc3RSdW5JbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0UnVuSW5kZXggPSBuZXdSdW5JbmRleDtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgY2FuY2VsIGV4aXN0aW5nIHJ1bnMgYmVjYXVzZSB3ZSB3YW50IHRoZSBmaXJzdCBvbmUgdG8gZmFpbCB0byBmYWlsXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSB0cmFuc3BvcnQgbGF5ZXIgc2hvdWxkIHVwb24gZmFpbHVyZSBoYW5kbGUgdGhlIGludGVycnVwdGlvbiBhbmQgc3RvcCB0aGUgbW9kZWxcbiAgICAgICAgICAgICAgICAgICAgLy8gZnJvbSBnZW5lcmF0aW5nIGZ1cnRoZXJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhuZXdUZXh0LCByZXNwb25zZUlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignaXRlbV91cGRhdGUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNOZXcgPSAhdGhpcy4jaGlzdG9yeS5zb21lKChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNoaXN0b3J5ID0gdXBkYXRlUmVhbHRpbWVIaXN0b3J5KHRoaXMuI2hpc3RvcnksIGV2ZW50LCB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZGVkSXRlbSA9IHRoaXMuI2hpc3RvcnkuZmluZCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGRlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV9hZGRlZCcsIGFkZGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdpdGVtX2RlbGV0ZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHRoaXMuI2hpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiBpdGVtLml0ZW1JZCAhPT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdmdW5jdGlvbl9jYWxsJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uQ2FsbChldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGhhbmRsaW5nIGZ1bmN0aW9uIGNhbGwnLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3VzYWdlX3VwZGF0ZScsICh1c2FnZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jY29udGV4dC51c2FnZS5hZGQodXNhZ2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb19pbnRlcnJ1cHRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9faW50ZXJydXB0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIHNlc3Npb24uIFRoaXMgd2lsbCBlc3RhYmxpc2ggdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyXG4gICAgICogYW5kIHN0YXJ0IHRoZSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQWZ0ZXIgY29ubmVjdGluZywgdGhlIHNlc3Npb24gd2lsbCBhbHNvIGVtaXQgYSBgaGlzdG9yeV91cGRhdGVkYCBldmVudCB3aXRoIGFuIGVtcHR5IGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgLy8gbWFrZXMgc3VyZSB0aGUgY3VycmVudCBhZ2VudCBpcyBjb3JyZWN0bHkgc2V0IGFuZCBsb2FkcyB0aGUgdG9vbHNcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KHRoaXMuaW5pdGlhbEFnZW50KTtcbiAgICAgICAgdGhpcy4jc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LmNvbm5lY3Qoe1xuICAgICAgICAgICAgYXBpS2V5OiBvcHRpb25zLmFwaUtleSA/PyB0aGlzLm9wdGlvbnMuYXBpS2V5LFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcbiAgICAgICAgICAgIGluaXRpYWxTZXNzaW9uQ29uZmlnOiBhd2FpdCB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKHRoaXMub3B0aW9ucy5jb25maWcpLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jaGlzdG9yeSA9IFtdO1xuICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfdXBkYXRlZCcsIHRoaXMuI2hpc3RvcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGhpc3Rvcnkgb2YgdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG5ld0hpc3RvcnkgLSBUaGUgbmV3IGhpc3RvcnkgdG8gc2V0LlxuICAgICAqL1xuICAgIHVwZGF0ZUhpc3RvcnkobmV3SGlzdG9yeSkge1xuICAgICAgICBsZXQgdXBkYXRlZEhpc3Rvcnk7XG4gICAgICAgIGlmICh0eXBlb2YgbmV3SGlzdG9yeSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdXBkYXRlZEhpc3RvcnkgPSBuZXdIaXN0b3J5KHRoaXMuI2hpc3RvcnkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXBkYXRlZEhpc3RvcnkgPSBuZXdIaXN0b3J5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5yZXNldEhpc3RvcnkodGhpcy4jaGlzdG9yeSwgdXBkYXRlZEhpc3RvcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEgPSB7fSkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBtdXRlZCAtIFdoZXRoZXIgdG8gbXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBtdXRlKG11dGVkKSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5tdXRlKG11dGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzY29ubmVjdCBmcm9tIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLiNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsID0ge307XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5jbG9zZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGF1ZGlvIHRvIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBhdWRpbyAtIFRoZSBhdWRpbyB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmNvbW1pdCAtIFdoZXRoZXIgdG8gZmluaXNoIHRoZSB0dXJuIHdpdGggdGhpcyBhdWRpby5cbiAgICAgKi9cbiAgICBzZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBzZXNzaW9uIGFydGlmaWNpYWxseSBmb3IgZXhhbXBsZSBpZiB5b3Ugd2FudCB0byBidWlsZCBhIFwic3RvcCB0YWxraW5nXCJcbiAgICAgKiBidXR0b24uXG4gICAgICovXG4gICAgaW50ZXJydXB0KCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuaW50ZXJydXB0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmUgYSB0b29sIGNhbGwuIFRoaXMgd2lsbCBhbHNvIHRyaWdnZXIgdGhlIHRvb2wgY2FsbCB0byB0aGUgYWdlbnQuXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSBhcHByb3ZhbCBpdGVtIHRvIGFwcHJvdmUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYWx3YXlzQXBwcm92ZSAtIFdoZXRoZXIgdG8gYWx3YXlzIGFwcHJvdmUgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhc3luYyBhcHByb3ZlKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzQXBwcm92ZTogZmFsc2UgfSkge1xuICAgICAgICB0aGlzLiNjb250ZXh0LmFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHRvb2wgPSB0aGlzLiNjdXJyZW50QWdlbnQudG9vbHMuZmluZCgodG9vbCkgPT4gdG9vbC5uYW1lID09PSBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lKTtcbiAgICAgICAgaWYgKHRvb2wgJiYgdG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKGFwcHJvdmFsSXRlbS5yYXdJdGVtLCB0b29sKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHthcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWplY3QgYSB0b29sIGNhbGwuIFRoaXMgd2lsbCBhbHNvIHRyaWdnZXIgdGhlIHRvb2wgY2FsbCB0byB0aGUgYWdlbnQuXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSBhcHByb3ZhbCBpdGVtIHRvIHJlamVjdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5hbHdheXNSZWplY3QgLSBXaGV0aGVyIHRvIGFsd2F5cyByZWplY3QgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhc3luYyByZWplY3QoYXBwcm92YWxJdGVtLCBvcHRpb25zID0geyBhbHdheXNSZWplY3Q6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5yZWplY3RUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgICAgIC8vIHdlIHN0aWxsIG5lZWQgdG8gc2ltdWxhdGUgYSB0b29sIGNhbGwgdG8gdGhlIGFnZW50IHRvIGxldCB0aGUgYWdlbnQga25vd1xuICAgICAgICBjb25zdCB0b29sID0gdGhpcy4jY3VycmVudEFnZW50LnRvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wubmFtZSA9PT0gYXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZSk7XG4gICAgICAgIGlmICh0b29sICYmIHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbChhcHByb3ZhbEl0ZW0ucmF3SXRlbSwgdG9vbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7YXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFsdGltZVNlc3Npb24ubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/realtimeSession.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/shims/shims-node.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/shims/shims-node.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WebSocket: () => (/* reexport safe */ ws__WEBPACK_IMPORTED_MODULE_0__.WebSocket),\n/* harmony export */   isBrowserEnvironment: () => (/* binding */ isBrowserEnvironment)\n/* harmony export */ });\n/* harmony import */ var ws__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ws */ \"(ssr)/../../node_modules/.pnpm/ws@8.18.3/node_modules/ws/wrapper.mjs\");\n\nfunction isBrowserEnvironment() {\n    return false;\n}\n//# sourceMappingURL=shims-node.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L3NoaW1zL3NoaW1zLW5vZGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQjtBQUN4QjtBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL3l1d2FuZy9wcm9qZWN0cy9vcGVuYWktcmVhbHRpbWUtYWdlbnRzL25vZGVfbW9kdWxlcy8ucG5wbS9Ab3BlbmFpK2FnZW50cy1yZWFsdGltZUAwLjAuNV96b2RAMy4yNS43Ni9ub2RlX21vZHVsZXMvQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvZGlzdC9zaGltcy9zaGltcy1ub2RlLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBXZWJTb2NrZXQgfSBmcm9tICd3cyc7XG5leHBvcnQgZnVuY3Rpb24gaXNCcm93c2VyRW52aXJvbm1lbnQoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hpbXMtbm9kZS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/shims/shims-node.mjs\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/utils.mjs":
/*!******************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/utils.mjs ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HEADERS: () => (/* binding */ HEADERS),\n/* harmony export */   WEBSOCKET_META: () => (/* binding */ WEBSOCKET_META),\n/* harmony export */   arrayBufferToBase64: () => (/* binding */ arrayBufferToBase64),\n/* harmony export */   base64ToArrayBuffer: () => (/* binding */ base64ToArrayBuffer),\n/* harmony export */   diffRealtimeHistory: () => (/* binding */ diffRealtimeHistory),\n/* harmony export */   getLastTextFromAudioOutputMessage: () => (/* binding */ getLastTextFromAudioOutputMessage),\n/* harmony export */   hasWebRTCSupport: () => (/* binding */ hasWebRTCSupport),\n/* harmony export */   removeAudioFromContent: () => (/* binding */ removeAudioFromContent),\n/* harmony export */   updateRealtimeHistory: () => (/* binding */ updateRealtimeHistory)\n/* harmony export */ });\n/* harmony import */ var _metadata_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./metadata.mjs */ \"(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/metadata.mjs\");\n\n/**\n * Converts a base64 string to an ArrayBuffer\n * @param {string} base64\n * @returns {ArrayBuffer}\n */\nfunction base64ToArrayBuffer(base64) {\n    const binaryString = atob(base64);\n    const len = binaryString.length;\n    const bytes = new Uint8Array(len);\n    for (let i = 0; i < len; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n}\n/**\n * Converts an ArrayBuffer to a base64 string\n * @param {ArrayBuffer} arrayBuffer\n * @returns {string}\n */\nfunction arrayBufferToBase64(arrayBuffer) {\n    const binaryString = String.fromCharCode(...new Uint8Array(arrayBuffer));\n    return btoa(binaryString);\n}\n/**\n * Get the last text from an audio output message\n * @param item\n * @returns\n */\nfunction getLastTextFromAudioOutputMessage(item) {\n    if (typeof item === 'undefined' ||\n        item === null ||\n        typeof item !== 'object' ||\n        !('type' in item) ||\n        typeof item.type !== 'string' ||\n        !item.type) {\n        return undefined;\n    }\n    if (item.type !== 'message') {\n        return undefined;\n    }\n    if (!('content' in item) ||\n        !Array.isArray(item.content) ||\n        item.content.length < 1) {\n        return undefined;\n    }\n    const lastContentItem = item.content[item.content.length - 1];\n    if (!('type' in lastContentItem) ||\n        typeof lastContentItem.type !== 'string') {\n        return undefined;\n    }\n    if (lastContentItem.type === 'text') {\n        return typeof lastContentItem.text === 'string'\n            ? lastContentItem.text\n            : undefined;\n    }\n    if (lastContentItem.type === 'audio') {\n        return typeof lastContentItem.transcript === 'string'\n            ? lastContentItem.transcript\n            : undefined;\n    }\n    return undefined;\n}\n/**\n * Compare two conversation histories to determine the removals, additions, and updates.\n * @param oldHistory - The old history.\n * @param newHistory - The new history.\n * @returns A diff of the two histories.\n */\nfunction diffRealtimeHistory(oldHistory, newHistory) {\n    const removals = oldHistory.filter((item) => !newHistory.some((newItem) => newItem.itemId === item.itemId));\n    const additions = newHistory.filter((item) => !oldHistory.some((oldItem) => oldItem.itemId === item.itemId));\n    const updates = newHistory.filter((item) => oldHistory.some((oldItem) => oldItem.itemId === item.itemId &&\n        JSON.stringify(oldItem) !== JSON.stringify(item)));\n    return {\n        removals,\n        additions,\n        updates,\n    };\n}\n/**\n * Check if the browser supports WebRTC.\n * @returns True if WebRTC is supported, false otherwise.\n */\nfunction hasWebRTCSupport() {\n    if (typeof window === 'undefined') {\n        return false;\n    }\n    return typeof window['RTCPeerConnection'] !== 'undefined';\n}\n/**\n * Removes the audio data from all content in a message by setting it to null.\n * @param item\n * @returns\n */\nfunction removeAudioFromContent(item) {\n    if (item.role === 'system') {\n        return item;\n    }\n    if (item.role === 'assistant') {\n        return {\n            ...item,\n            content: item.content.map((entry) => {\n                if (entry.type === 'audio') {\n                    return {\n                        ...entry,\n                        audio: null,\n                    };\n                }\n                return entry;\n            }),\n        };\n    }\n    if (item.role === 'user') {\n        return {\n            ...item,\n            content: item.content.map((entry) => {\n                if (entry.type === 'input_audio') {\n                    return {\n                        ...entry,\n                        audio: null,\n                    };\n                }\n                return entry;\n            }),\n        };\n    }\n    return item;\n}\n/**\n * Updates the realtime history array based on the incoming event and options.\n * @param history - The current history array.\n * @param event - The event to process (RealtimeItem).\n * @param shouldIncludeAudioData - Whether to include audio data in message items.\n * @returns The updated history array.\n */\nfunction updateRealtimeHistory(history, event, shouldIncludeAudioData) {\n    const newEvent = !shouldIncludeAudioData && event.type === 'message'\n        ? removeAudioFromContent(event)\n        : event;\n    const existingIndex = history.findIndex((item) => item.itemId === event.itemId);\n    if (existingIndex !== -1) {\n        // Update existing item\n        return history.map((item, idx) => {\n            if (idx === existingIndex) {\n                return newEvent;\n            }\n            if (!shouldIncludeAudioData && item.type === 'message') {\n                return removeAudioFromContent(item);\n            }\n            return item;\n        });\n    }\n    else if (event.previousItemId) {\n        // Insert after previousItemId if found, else at end\n        const prevIndex = history.findIndex((item) => item.itemId === event.previousItemId);\n        if (prevIndex !== -1) {\n            return [\n                ...history.slice(0, prevIndex + 1),\n                newEvent,\n                ...history.slice(prevIndex + 1),\n            ];\n        }\n        else {\n            return [...history, newEvent];\n        }\n    }\n    else {\n        return [...history, newEvent];\n    }\n}\n/**\n * The headers to use for the Realtime API.\n */\nconst HEADERS = {\n    'User-Agent': `Agents/JavaScript ${_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].version}`,\n    'X-OpenAI-Agents-SDK': `openai-agents-sdk.${_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].version}`,\n};\n/**\n * Browser websocket header\n */\nconst WEBSOCKET_META = `openai-agents-sdk.${_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].version}`;\n//# sourceMappingURL=utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC41X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L3V0aWxzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXNDO0FBQ3RDO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGFBQWE7QUFDeEIsYUFBYTtBQUNiO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHVDQUF1QyxxREFBUSxTQUFTO0FBQ3hELGdEQUFnRCxxREFBUSxTQUFTO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ08sNENBQTRDLHFEQUFRLFNBQVM7QUFDcEUiLCJzb3VyY2VzIjpbIi9Vc2Vycy95dXdhbmcvcHJvamVjdHMvb3BlbmFpLXJlYWx0aW1lLWFnZW50cy9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjVfem9kQDMuMjUuNzYvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvdXRpbHMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNRVRBREFUQSBmcm9tIFwiLi9tZXRhZGF0YS5tanNcIjtcbi8qKlxuICogQ29udmVydHMgYSBiYXNlNjQgc3RyaW5nIHRvIGFuIEFycmF5QnVmZmVyXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZTY0XG4gKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NCkge1xuICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IGF0b2IoYmFzZTY0KTtcbiAgICBjb25zdCBsZW4gPSBiaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICAgIHJldHVybiBieXRlcy5idWZmZXI7XG59XG4vKipcbiAqIENvbnZlcnRzIGFuIEFycmF5QnVmZmVyIHRvIGEgYmFzZTY0IHN0cmluZ1xuICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYXJyYXlCdWZmZXJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcnJheUJ1ZmZlclRvQmFzZTY0KGFycmF5QnVmZmVyKSB7XG4gICAgY29uc3QgYmluYXJ5U3RyaW5nID0gU3RyaW5nLmZyb21DaGFyQ29kZSguLi5uZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcikpO1xuICAgIHJldHVybiBidG9hKGJpbmFyeVN0cmluZyk7XG59XG4vKipcbiAqIEdldCB0aGUgbGFzdCB0ZXh0IGZyb20gYW4gYXVkaW8gb3V0cHV0IG1lc3NhZ2VcbiAqIEBwYXJhbSBpdGVtXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlKGl0ZW0pIHtcbiAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGl0ZW0gPT09IG51bGwgfHxcbiAgICAgICAgdHlwZW9mIGl0ZW0gIT09ICdvYmplY3QnIHx8XG4gICAgICAgICEoJ3R5cGUnIGluIGl0ZW0pIHx8XG4gICAgICAgIHR5cGVvZiBpdGVtLnR5cGUgIT09ICdzdHJpbmcnIHx8XG4gICAgICAgICFpdGVtLnR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGl0ZW0udHlwZSAhPT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghKCdjb250ZW50JyBpbiBpdGVtKSB8fFxuICAgICAgICAhQXJyYXkuaXNBcnJheShpdGVtLmNvbnRlbnQpIHx8XG4gICAgICAgIGl0ZW0uY29udGVudC5sZW5ndGggPCAxKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxhc3RDb250ZW50SXRlbSA9IGl0ZW0uY29udGVudFtpdGVtLmNvbnRlbnQubGVuZ3RoIC0gMV07XG4gICAgaWYgKCEoJ3R5cGUnIGluIGxhc3RDb250ZW50SXRlbSkgfHxcbiAgICAgICAgdHlwZW9mIGxhc3RDb250ZW50SXRlbS50eXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAobGFzdENvbnRlbnRJdGVtLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGxhc3RDb250ZW50SXRlbS50ZXh0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBsYXN0Q29udGVudEl0ZW0udGV4dFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChsYXN0Q29udGVudEl0ZW0udHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGxhc3RDb250ZW50SXRlbS50cmFuc2NyaXB0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBsYXN0Q29udGVudEl0ZW0udHJhbnNjcmlwdFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4vKipcbiAqIENvbXBhcmUgdHdvIGNvbnZlcnNhdGlvbiBoaXN0b3JpZXMgdG8gZGV0ZXJtaW5lIHRoZSByZW1vdmFscywgYWRkaXRpb25zLCBhbmQgdXBkYXRlcy5cbiAqIEBwYXJhbSBvbGRIaXN0b3J5IC0gVGhlIG9sZCBoaXN0b3J5LlxuICogQHBhcmFtIG5ld0hpc3RvcnkgLSBUaGUgbmV3IGhpc3RvcnkuXG4gKiBAcmV0dXJucyBBIGRpZmYgb2YgdGhlIHR3byBoaXN0b3JpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaWZmUmVhbHRpbWVIaXN0b3J5KG9sZEhpc3RvcnksIG5ld0hpc3RvcnkpIHtcbiAgICBjb25zdCByZW1vdmFscyA9IG9sZEhpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiAhbmV3SGlzdG9yeS5zb21lKChuZXdJdGVtKSA9PiBuZXdJdGVtLml0ZW1JZCA9PT0gaXRlbS5pdGVtSWQpKTtcbiAgICBjb25zdCBhZGRpdGlvbnMgPSBuZXdIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gIW9sZEhpc3Rvcnkuc29tZSgob2xkSXRlbSkgPT4gb2xkSXRlbS5pdGVtSWQgPT09IGl0ZW0uaXRlbUlkKSk7XG4gICAgY29uc3QgdXBkYXRlcyA9IG5ld0hpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiBvbGRIaXN0b3J5LnNvbWUoKG9sZEl0ZW0pID0+IG9sZEl0ZW0uaXRlbUlkID09PSBpdGVtLml0ZW1JZCAmJlxuICAgICAgICBKU09OLnN0cmluZ2lmeShvbGRJdGVtKSAhPT0gSlNPTi5zdHJpbmdpZnkoaXRlbSkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmFscyxcbiAgICAgICAgYWRkaXRpb25zLFxuICAgICAgICB1cGRhdGVzLFxuICAgIH07XG59XG4vKipcbiAqIENoZWNrIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIFdlYlJUQy5cbiAqIEByZXR1cm5zIFRydWUgaWYgV2ViUlRDIGlzIHN1cHBvcnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzV2ViUlRDU3VwcG9ydCgpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvd1snUlRDUGVlckNvbm5lY3Rpb24nXSAhPT0gJ3VuZGVmaW5lZCc7XG59XG4vKipcbiAqIFJlbW92ZXMgdGhlIGF1ZGlvIGRhdGEgZnJvbSBhbGwgY29udGVudCBpbiBhIG1lc3NhZ2UgYnkgc2V0dGluZyBpdCB0byBudWxsLlxuICogQHBhcmFtIGl0ZW1cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVBdWRpb0Zyb21Db250ZW50KGl0ZW0pIHtcbiAgICBpZiAoaXRlbS5yb2xlID09PSAnc3lzdGVtJykge1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgY29udGVudDogaXRlbS5jb250ZW50Lm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ2lucHV0X2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBpdGVtO1xufVxuLyoqXG4gKiBVcGRhdGVzIHRoZSByZWFsdGltZSBoaXN0b3J5IGFycmF5IGJhc2VkIG9uIHRoZSBpbmNvbWluZyBldmVudCBhbmQgb3B0aW9ucy5cbiAqIEBwYXJhbSBoaXN0b3J5IC0gVGhlIGN1cnJlbnQgaGlzdG9yeSBhcnJheS5cbiAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBwcm9jZXNzIChSZWFsdGltZUl0ZW0pLlxuICogQHBhcmFtIHNob3VsZEluY2x1ZGVBdWRpb0RhdGEgLSBXaGV0aGVyIHRvIGluY2x1ZGUgYXVkaW8gZGF0YSBpbiBtZXNzYWdlIGl0ZW1zLlxuICogQHJldHVybnMgVGhlIHVwZGF0ZWQgaGlzdG9yeSBhcnJheS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJlYWx0aW1lSGlzdG9yeShoaXN0b3J5LCBldmVudCwgc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSkge1xuICAgIGNvbnN0IG5ld0V2ZW50ID0gIXNob3VsZEluY2x1ZGVBdWRpb0RhdGEgJiYgZXZlbnQudHlwZSA9PT0gJ21lc3NhZ2UnXG4gICAgICAgID8gcmVtb3ZlQXVkaW9Gcm9tQ29udGVudChldmVudClcbiAgICAgICAgOiBldmVudDtcbiAgICBjb25zdCBleGlzdGluZ0luZGV4ID0gaGlzdG9yeS5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkID09PSBldmVudC5pdGVtSWQpO1xuICAgIGlmIChleGlzdGluZ0luZGV4ICE9PSAtMSkge1xuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgaXRlbVxuICAgICAgICByZXR1cm4gaGlzdG9yeS5tYXAoKGl0ZW0sIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlkeCA9PT0gZXhpc3RpbmdJbmRleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXdFdmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSAmJiBpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZW1vdmVBdWRpb0Zyb21Db250ZW50KGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudC5wcmV2aW91c0l0ZW1JZCkge1xuICAgICAgICAvLyBJbnNlcnQgYWZ0ZXIgcHJldmlvdXNJdGVtSWQgaWYgZm91bmQsIGVsc2UgYXQgZW5kXG4gICAgICAgIGNvbnN0IHByZXZJbmRleCA9IGhpc3RvcnkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQucHJldmlvdXNJdGVtSWQpO1xuICAgICAgICBpZiAocHJldkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAuLi5oaXN0b3J5LnNsaWNlKDAsIHByZXZJbmRleCArIDEpLFxuICAgICAgICAgICAgICAgIG5ld0V2ZW50LFxuICAgICAgICAgICAgICAgIC4uLmhpc3Rvcnkuc2xpY2UocHJldkluZGV4ICsgMSksXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFsuLi5oaXN0b3J5LCBuZXdFdmVudF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbLi4uaGlzdG9yeSwgbmV3RXZlbnRdO1xuICAgIH1cbn1cbi8qKlxuICogVGhlIGhlYWRlcnMgdG8gdXNlIGZvciB0aGUgUmVhbHRpbWUgQVBJLlxuICovXG5leHBvcnQgY29uc3QgSEVBREVSUyA9IHtcbiAgICAnVXNlci1BZ2VudCc6IGBBZ2VudHMvSmF2YVNjcmlwdCAke01FVEFEQVRBLnZlcnNpb259YCxcbiAgICAnWC1PcGVuQUktQWdlbnRzLVNESyc6IGBvcGVuYWktYWdlbnRzLXNkay4ke01FVEFEQVRBLnZlcnNpb259YCxcbn07XG4vKipcbiAqIEJyb3dzZXIgd2Vic29ja2V0IGhlYWRlclxuICovXG5leHBvcnQgY29uc3QgV0VCU09DS0VUX01FVEEgPSBgb3BlbmFpLWFnZW50cy1zZGsuJHtNRVRBREFUQS52ZXJzaW9ufWA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@openai+agents-realtime@0.0.5_zod@3.25.76/node_modules/@openai/agents-realtime/dist/utils.mjs\n");

/***/ })

};
;